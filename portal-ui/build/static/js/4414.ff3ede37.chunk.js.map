{"version":3,"file":"static/js/4414.ff3ede37.chunk.js","mappings":"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","sources":["screens/Console/Common/FormComponents/FileSelector/FileSelector.tsx","screens/Console/Common/FormComponents/FileSelector/utils.ts","screens/Console/Common/ModalWrapper/ModalWrapper.tsx","screens/Console/Configurations/TiersConfiguration/UpdateTierCredentialsModal.tsx","screens/shared/ErrorBlock.tsx","../node_modules/@mui/icons-material/AttachFile.js","../node_modules/@mui/icons-material/Cancel.js"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { useState } from \"react\";\nimport get from \"lodash/get\";\nimport { Grid, InputLabel, Tooltip } from \"@mui/material\";\nimport IconButton from \"@mui/material/IconButton\";\nimport AttachFileIcon from \"@mui/icons-material/AttachFile\";\nimport CancelIcon from \"@mui/icons-material/Cancel\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  fieldBasic,\n  fileInputStyles,\n  tooltipHelper,\n} from \"../common/styleLibrary\";\nimport { fileProcess } from \"./utils\";\nimport { HelpIcon } from \"mds\";\nimport ErrorBlock from \"../../../../shared/ErrorBlock\";\n\ninterface InputBoxProps {\n  label: string;\n  classes: any;\n  onChange: (e: string, i: string) => void;\n  id: string;\n  name: string;\n  disabled?: boolean;\n  tooltip?: string;\n  required?: boolean;\n  error?: string;\n  accept?: string;\n  value?: string;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...fieldBasic,\n    ...tooltipHelper,\n    valueString: {\n      maxWidth: 350,\n      whiteSpace: \"nowrap\",\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      marginTop: 2,\n    },\n    fileInputField: {\n      margin: \"13px 0\",\n      \"@media (max-width: 900px)\": {\n        flexFlow: \"column\",\n      },\n    },\n    ...fileInputStyles,\n    inputLabel: {\n      ...fieldBasic.inputLabel,\n      fontWeight: \"normal\",\n    },\n    textBoxContainer: {\n      ...fieldBasic.textBoxContainer,\n      maxWidth: \"100%\",\n      border: \"1px solid #eaeaea\",\n      paddingLeft: \"15px\",\n    },\n  });\n\nconst FileSelector = ({\n  label,\n  classes,\n  onChange,\n  id,\n  name,\n  disabled = false,\n  tooltip = \"\",\n  required,\n  error = \"\",\n  accept = \"\",\n  value = \"\",\n}: InputBoxProps) => {\n  const [showFileSelector, setShowSelector] = useState(false);\n\n  return (\n    <React.Fragment>\n      <Grid\n        item\n        xs={12}\n        className={`${classes.fileInputField} ${classes.fieldBottom} ${\n          classes.fieldContainer\n        } ${error !== \"\" ? classes.errorInField : \"\"}`}\n      >\n        {label !== \"\" && (\n          <InputLabel\n            htmlFor={id}\n            className={`${error !== \"\" ? classes.fieldLabelError : \"\"} ${\n              classes.inputLabel\n            }`}\n          >\n            <span>\n              {label}\n              {required ? \"*\" : \"\"}\n            </span>\n            {tooltip !== \"\" && (\n              <div className={classes.tooltipContainer}>\n                <Tooltip title={tooltip} placement=\"top-start\">\n                  <div className={classes.tooltip}>\n                    <HelpIcon />\n                  </div>\n                </Tooltip>\n              </div>\n            )}\n          </InputLabel>\n        )}\n\n        {showFileSelector || value === \"\" ? (\n          <div className={classes.textBoxContainer}>\n            <input\n              type=\"file\"\n              name={name}\n              onChange={(e) => {\n                const fileName = get(e, \"target.files[0].name\", \"\");\n                fileProcess(e, (data: any) => {\n                  onChange(data, fileName);\n                });\n              }}\n              accept={accept}\n              required={required}\n              disabled={disabled}\n              className={classes.fileInputField}\n            />\n\n            {value !== \"\" && (\n              <IconButton\n                color=\"primary\"\n                aria-label=\"upload picture\"\n                component=\"span\"\n                onClick={() => {\n                  setShowSelector(false);\n                }}\n                disableRipple={false}\n                disableFocusRipple={false}\n                size=\"small\"\n              >\n                <CancelIcon />\n              </IconButton>\n            )}\n\n            {error !== \"\" && <ErrorBlock errorMessage={error} />}\n          </div>\n        ) : (\n          <div className={classes.fileReselect}>\n            <div className={classes.valueString}>{value}</div>\n            <IconButton\n              color=\"primary\"\n              aria-label=\"upload picture\"\n              component=\"span\"\n              onClick={() => {\n                setShowSelector(true);\n              }}\n              disableRipple={false}\n              disableFocusRipple={false}\n              size=\"small\"\n            >\n              <AttachFileIcon />\n            </IconButton>\n          </div>\n        )}\n      </Grid>\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(FileSelector);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const fileProcess = (evt: any, callback: any) => {\n  const file = evt.target.files[0];\n  const reader = new FileReader();\n  reader.readAsDataURL(file);\n\n  reader.onload = () => {\n    // reader.readAsDataURL(file) output will be something like: data:application/x-x509-ca-cert;base64,LS0tLS1CRUdJTiBDRVJUSU\n    // we care only about the actual base64 part (everything after \"data:application/x-x509-ca-cert;base64,\")\n    const fileBase64 = reader.result;\n    if (fileBase64) {\n      const fileArray = fileBase64.toString().split(\"base64,\");\n\n      if (fileArray.length === 2) {\n        callback(fileArray[1]);\n      }\n    }\n  };\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Snackbar from \"@mui/material/Snackbar\";\nimport { Dialog, DialogContent, DialogTitle } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  deleteDialogStyles,\n  snackBarCommon,\n} from \"../FormComponents/common/styleLibrary\";\nimport { AppState, useAppDispatch } from \"../../../../store\";\nimport CloseIcon from \"@mui/icons-material/Close\";\nimport MainError from \"../MainError/MainError\";\nimport { setModalSnackMessage } from \"../../../../systemSlice\";\n\ninterface IModalProps {\n  classes: any;\n  onClose: () => void;\n  modalOpen: boolean;\n  title: string | React.ReactNode;\n  children: any;\n  wideLimit?: boolean;\n  noContentPadding?: boolean;\n  titleIcon?: React.ReactNode;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    ...deleteDialogStyles,\n    content: {\n      padding: 25,\n      paddingBottom: 0,\n    },\n    customDialogSize: {\n      width: \"100%\",\n      maxWidth: 765,\n    },\n    ...snackBarCommon,\n  });\n\nconst ModalWrapper = ({\n  onClose,\n  modalOpen,\n  title,\n  children,\n  classes,\n  wideLimit = true,\n  noContentPadding,\n  titleIcon = null,\n}: IModalProps) => {\n  const dispatch = useAppDispatch();\n  const [openSnackbar, setOpenSnackbar] = useState<boolean>(false);\n\n  const modalSnackMessage = useSelector(\n    (state: AppState) => state.system.modalSnackBar\n  );\n\n  useEffect(() => {\n    dispatch(setModalSnackMessage(\"\"));\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (modalSnackMessage) {\n      if (modalSnackMessage.message === \"\") {\n        setOpenSnackbar(false);\n        return;\n      }\n      // Open SnackBar\n      if (modalSnackMessage.type !== \"error\") {\n        setOpenSnackbar(true);\n      }\n    }\n  }, [modalSnackMessage]);\n\n  const closeSnackBar = () => {\n    setOpenSnackbar(false);\n    dispatch(setModalSnackMessage(\"\"));\n  };\n\n  const customSize = wideLimit\n    ? {\n        classes: {\n          paper: classes.customDialogSize,\n        },\n      }\n    : { maxWidth: \"lg\" as const, fullWidth: true };\n\n  let message = \"\";\n\n  if (modalSnackMessage) {\n    message = modalSnackMessage.detailedErrorMsg;\n    if (\n      modalSnackMessage.detailedErrorMsg === \"\" ||\n      modalSnackMessage.detailedErrorMsg.length < 5\n    ) {\n      message = modalSnackMessage.message;\n    }\n  }\n\n  return (\n    <Dialog\n      open={modalOpen}\n      classes={classes}\n      {...customSize}\n      scroll={\"paper\"}\n      onClose={(event, reason) => {\n        if (reason !== \"backdropClick\") {\n          onClose(); // close on Esc but not on click outside\n        }\n      }}\n      className={classes.root}\n    >\n      <DialogTitle className={classes.title}>\n        <div className={classes.titleText}>\n          {titleIcon} {title}\n        </div>\n        <div className={classes.closeContainer}>\n          <IconButton\n            aria-label=\"close\"\n            id={\"close\"}\n            className={classes.closeButton}\n            onClick={onClose}\n            disableRipple\n            size=\"small\"\n          >\n            <CloseIcon />\n          </IconButton>\n        </div>\n      </DialogTitle>\n\n      <MainError isModal={true} />\n      <Snackbar\n        open={openSnackbar}\n        className={classes.snackBarModal}\n        onClose={() => {\n          closeSnackBar();\n        }}\n        message={message}\n        ContentProps={{\n          className: `${classes.snackBar} ${\n            modalSnackMessage && modalSnackMessage.type === \"error\"\n              ? classes.errorSnackBar\n              : \"\"\n          }`,\n        }}\n        autoHideDuration={\n          modalSnackMessage && modalSnackMessage.type === \"error\" ? 10000 : 5000\n        }\n      />\n      <DialogContent className={noContentPadding ? \"\" : classes.content}>\n        {children}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default withStyles(styles)(ModalWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport get from \"lodash/get\";\nimport { Button } from \"mds\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { LinearProgress } from \"@mui/material\";\nimport Grid from \"@mui/material/Grid\";\nimport {\n  formFieldStyles,\n  modalBasic,\n} from \"../../Common/FormComponents/common/styleLibrary\";\n\nimport InputBoxWrapper from \"../../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport FileSelector from \"../../Common/FormComponents/FileSelector/FileSelector\";\nimport api from \"../../../../common/api\";\nimport { ITierElement } from \"./types\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport ModalWrapper from \"../../Common/ModalWrapper/ModalWrapper\";\nimport { LockIcon } from \"mds\";\nimport { setModalErrorSnackMessage } from \"../../../../systemSlice\";\nimport { useAppDispatch } from \"../../../../store\";\n\ninterface ITierCredentialsModal {\n  open: boolean;\n  closeModalAndRefresh: (refresh: boolean) => any;\n  classes: any;\n  tierData: ITierElement;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    buttonContainer: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n    },\n    ...modalBasic,\n    ...formFieldStyles,\n  });\n\nconst UpdateTierCredentialsModal = ({\n  open,\n  closeModalAndRefresh,\n  classes,\n  tierData,\n}: ITierCredentialsModal) => {\n  const dispatch = useAppDispatch();\n  const [savingTiers, setSavingTiers] = useState<boolean>(false);\n  const [creds, setCreds] = useState<string>(\"\");\n  const [encodedCreds, setEncodedCreds] = useState<string>(\"\");\n\n  const [accountName, setAccountName] = useState<string>(\"\");\n  const [accountKey, setAccountKey] = useState<string>(\"\");\n\n  // Validations\n  const [isFormValid, setIsFormValid] = useState<boolean>(true);\n\n  const type = get(tierData, \"type\", \"\");\n  const name = get(tierData, `${type}.name`, \"\");\n\n  useEffect(() => {\n    let valid = true;\n\n    if (type === \"s3\" || type === \"azure\" || type === \"minio\") {\n      if (accountName === \"\" || accountKey === \"\") {\n        valid = false;\n      }\n    } else if (type === \"gcs\") {\n      if (encodedCreds === \"\") {\n        valid = false;\n      }\n    }\n    setIsFormValid(valid);\n  }, [accountKey, accountName, encodedCreds, type]);\n\n  const addRecord = () => {\n    let rules = {};\n\n    if (type === \"s3\" || type === \"azure\" || type === \"minio\") {\n      rules = {\n        access_key: accountName,\n        secret_key: accountKey,\n      };\n    } else if (type === \"gcs\") {\n      rules = {\n        creds: encodedCreds,\n      };\n    }\n    if (name !== \"\") {\n      api\n        .invoke(\"PUT\", `/api/v1/admin/tiers/${type}/${name}/credentials`, rules)\n        .then(() => {\n          setSavingTiers(false);\n          closeModalAndRefresh(true);\n        })\n        .catch((err: ErrorResponseHandler) => {\n          setSavingTiers(false);\n          dispatch(setModalErrorSnackMessage(err));\n        });\n    } else {\n      setModalErrorSnackMessage({\n        errorMessage: \"There was an error retrieving tier information\",\n        detailedError: \"\",\n      });\n    }\n  };\n\n  return (\n    <ModalWrapper\n      modalOpen={open}\n      titleIcon={<LockIcon />}\n      onClose={() => {\n        closeModalAndRefresh(false);\n      }}\n      title={`Update Credentials - ${type} / ${name}`}\n    >\n      <form\n        noValidate\n        autoComplete=\"off\"\n        onSubmit={(e: React.FormEvent<HTMLFormElement>) => {\n          e.preventDefault();\n          setSavingTiers(true);\n          addRecord();\n        }}\n      >\n        <Grid container>\n          <Grid item xs={12}>\n            {(type === \"s3\" || type === \"minio\") && (\n              <Fragment>\n                <div className={classes.formFieldRow}>\n                  <InputBoxWrapper\n                    id=\"accessKey\"\n                    name=\"accessKey\"\n                    label=\"Access Key\"\n                    placeholder=\"Enter Access Key\"\n                    value={accountName}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                      setAccountName(e.target.value);\n                    }}\n                  />\n                </div>\n                <div className={classes.formFieldRow}>\n                  <InputBoxWrapper\n                    id=\"secretKey\"\n                    name=\"secretKey\"\n                    label=\"Secret Key\"\n                    placeholder=\"Enter Secret Key\"\n                    value={accountKey}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                      setAccountKey(e.target.value);\n                    }}\n                  />\n                </div>\n              </Fragment>\n            )}\n            {type === \"gcs\" && (\n              <Fragment>\n                <FileSelector\n                  accept=\".json\"\n                  id=\"creds\"\n                  label=\"Credentials\"\n                  name=\"creds\"\n                  onChange={(encodedValue, fileName) => {\n                    setEncodedCreds(encodedValue);\n                    setCreds(fileName);\n                  }}\n                  value={creds}\n                />\n              </Fragment>\n            )}\n            {type === \"azure\" && (\n              <Fragment>\n                <div className={classes.formFieldRow}>\n                  <InputBoxWrapper\n                    id=\"accountName\"\n                    name=\"accountName\"\n                    label=\"Account Name\"\n                    placeholder=\"Enter Account Name\"\n                    value={accountName}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                      setAccountName(e.target.value);\n                    }}\n                  />\n                </div>\n                <div className={classes.formFieldRow}>\n                  <InputBoxWrapper\n                    id=\"accountKey\"\n                    name=\"accountKey\"\n                    label=\"Account Key\"\n                    placeholder=\"Enter Account Key\"\n                    value={accountKey}\n                    onChange={(e: React.ChangeEvent<HTMLInputElement>) => {\n                      setAccountKey(e.target.value);\n                    }}\n                  />\n                </div>\n              </Fragment>\n            )}\n          </Grid>\n          <Grid item xs={12} className={classes.buttonContainer}>\n            <Button\n              id={\"save-credentials\"}\n              type=\"submit\"\n              variant=\"callAction\"\n              disabled={savingTiers || !isFormValid}\n              label={\"Save\"}\n            />\n          </Grid>\n          {savingTiers && (\n            <Grid item xs={12}>\n              <LinearProgress />\n            </Grid>\n          )}\n        </Grid>\n      </form>\n    </ModalWrapper>\n  );\n};\n\nexport default withStyles(styles)(UpdateTierCredentialsModal);\n","import React from \"react\";\nimport Typography from \"@mui/material/Typography\";\nimport { Theme } from \"@mui/material/styles\";\n\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    errorBlock: {\n      color: theme.palette?.error.main || \"#C83B51\",\n    },\n  });\n\ninterface IErrorBlockProps {\n  classes: any;\n  errorMessage: string;\n  withBreak?: boolean;\n}\n\nconst ErrorBlock = ({\n  classes,\n  errorMessage,\n  withBreak = true,\n}: IErrorBlockProps) => {\n  return (\n    <React.Fragment>\n      {withBreak && <br />}\n      <Typography component=\"p\" variant=\"body1\" className={classes.errorBlock}>\n        {errorMessage}\n      </Typography>\n    </React.Fragment>\n  );\n};\n\nexport default withStyles(styles)(ErrorBlock);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z\"\n}), 'AttachFile');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z\"\n}), 'Cancel');\nexports.default = _default;"],"names":["withStyles","theme","createStyles","fieldBasic","tooltipHelper","valueString","maxWidth","whiteSpace","overflow","textOverflow","marginTop","fileInputField","margin","flexFlow","fileInputStyles","inputLabel","fontWeight","textBoxContainer","border","paddingLeft","label","classes","onChange","id","name","disabled","tooltip","required","error","accept","value","useState","showFileSelector","setShowSelector","Grid","item","xs","className","fieldBottom","fieldContainer","errorInField","InputLabel","htmlFor","fieldLabelError","tooltipContainer","Tooltip","title","placement","type","e","fileName","get","evt","callback","file","target","files","reader","FileReader","readAsDataURL","onload","fileBase64","result","fileArray","toString","split","length","fileProcess","data","IconButton","color","component","onClick","disableRipple","disableFocusRipple","size","Cancel","ErrorBlock","errorMessage","fileReselect","AttachFile","deleteDialogStyles","content","padding","paddingBottom","customDialogSize","width","snackBarCommon","onClose","modalOpen","children","wideLimit","noContentPadding","titleIcon","dispatch","useAppDispatch","openSnackbar","setOpenSnackbar","modalSnackMessage","useSelector","state","system","modalSnackBar","useEffect","setModalSnackMessage","message","customSize","paper","fullWidth","detailedErrorMsg","open","scroll","event","reason","root","titleText","closeContainer","closeButton","isModal","snackBarModal","ContentProps","snackBar","errorSnackBar","autoHideDuration","buttonContainer","display","justifyContent","modalBasic","formFieldStyles","closeModalAndRefresh","tierData","savingTiers","setSavingTiers","creds","setCreds","encodedCreds","setEncodedCreds","accountName","setAccountName","accountKey","setAccountKey","isFormValid","setIsFormValid","valid","noValidate","autoComplete","onSubmit","preventDefault","rules","access_key","secret_key","api","then","catch","err","setModalErrorSnackMessage","detailedError","addRecord","container","Fragment","formFieldRow","placeholder","encodedValue","variant","errorBlock","palette","main","withBreak","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx","d"],"sourceRoot":""}