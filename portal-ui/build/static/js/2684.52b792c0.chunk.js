"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[2684],{46707:function(e,n,t){var i=t(1413),r=(t(72791),t(80184));n.Z=function(e){return(0,r.jsxs)("svg",(0,i.Z)((0,i.Z)({xmlns:"http://www.w3.org/2000/svg",className:"min-icon",fill:"currentcolor",viewBox:"0 0 256 256"},e),{},{children:[(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"certificate_svg__a",children:(0,r.jsx)("path",{"data-name":"Rect\\xE1ngulo 2156",fill:"#07193e",d:"M0 0h256v222.048H0z"})})}),(0,r.jsxs)("g",{"data-name":"Grupo 4763",transform:"translate(0 17)",clipPath:"url(#certificate_svg__a)",fill:"#07193e",children:[(0,r.jsx)("path",{"data-name":"Trazado 8152",d:"M240-.002H16a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h120l4.64-5.6 7.44-9.12A66.72 66.72 0 0 1 256 98.958v-82.96a16 16 0 0 0-16-16m-130.96 149.7H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 1 1 0 14.592m0-56H47.3a7.3 7.3 0 1 1 0-14.592h61.74a7.3 7.3 0 0 1 0 14.592m66.96-39.3a6.419 6.419 0 0 1-6.4 6.4H46.4a6.419 6.419 0 0 1-6.4-6.4v-1.792a6.419 6.419 0 0 1 6.4-6.4h123.2a6.419 6.419 0 0 1 6.4 6.4Z"}),(0,r.jsx)("path",{"data-name":"Trazado 8153",d:"M256 137.486a50.96 50.96 0 1 0-86.16 36.72l-15.52 18.96 7.2 28.88 29.28-35.68a50.018 50.018 0 0 0 28.4 0l29.28 35.68 7.2-28.88-15.52-18.96a50.75 50.75 0 0 0 15.84-36.72m-50.928 29.688a29.688 29.688 0 0 1-.072-59.376h.072a29.688 29.688 0 0 1 0 59.376"})]}),(0,r.jsx)("path",{"data-name":"Rect\\xE1ngulo 2157",fill:"none",d:"M0 0h256v256H0z"})]}))}},54639:function(e,n,t){t.d(n,{Z:function(){return C}});var i=t(29439),r=t(1413),a=t(72791),s=t(26181),o=t.n(s),c=t(61889),l=t(30829),u=t(20068),d=t(13400),m=t(99663),x=t(86711),f=t(11135),p=t(25787),h=t(23814),Z=t(84570),j=t(22512),v=t(80184),C=(0,p.Z)((function(e){return(0,f.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({},h.YI),h.Hr),{},{valueString:{maxWidth:350,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginTop:2},fileInputField:{margin:"13px 0","@media (max-width: 900px)":{flexFlow:"column"}}},h.bV),{},{inputLabel:(0,r.Z)((0,r.Z)({},h.YI.inputLabel),{},{fontWeight:"normal"}),textBoxContainer:(0,r.Z)((0,r.Z)({},h.YI.textBoxContainer),{},{maxWidth:"100%",border:"1px solid #eaeaea",paddingLeft:"15px"})}))}))((function(e){var n=e.label,t=e.classes,r=e.onChange,s=e.id,f=e.name,p=e.disabled,h=void 0!==p&&p,C=e.tooltip,g=void 0===C?"":C,b=e.required,y=e.error,A=void 0===y?"":y,N=e.accept,S=void 0===N?"":N,k=e.value,R=void 0===k?"":k,I=(0,a.useState)(!1),P=(0,i.Z)(I,2),w=P[0],T=P[1];return(0,v.jsx)(a.Fragment,{children:(0,v.jsxs)(c.ZP,{item:!0,xs:12,className:"".concat(t.fileInputField," ").concat(t.fieldBottom," ").concat(t.fieldContainer," ").concat(""!==A?t.errorInField:""),children:[""!==n&&(0,v.jsxs)(l.Z,{htmlFor:s,className:"".concat(""!==A?t.fieldLabelError:""," ").concat(t.inputLabel),children:[(0,v.jsxs)("span",{children:[n,b?"*":""]}),""!==g&&(0,v.jsx)("div",{className:t.tooltipContainer,children:(0,v.jsx)(u.Z,{title:g,placement:"top-start",children:(0,v.jsx)("div",{className:t.tooltip,children:(0,v.jsx)(Z.Z,{})})})})]}),w||""===R?(0,v.jsxs)("div",{className:t.textBoxContainer,children:[(0,v.jsx)("input",{type:"file",name:f,onChange:function(e){var n=o()(e,"target.files[0].name","");!function(e,n){var t=e.target.files[0],i=new FileReader;i.readAsDataURL(t),i.onload=function(){var e=i.result;if(e){var t=e.toString().split("base64,");2===t.length&&n(t[1])}}}(e,(function(e){r(e,n)}))},accept:S,required:b,disabled:h,className:t.fileInputField}),""!==R&&(0,v.jsx)(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){T(!1)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(x.Z,{})}),""!==A&&(0,v.jsx)(j.Z,{errorMessage:A})]}):(0,v.jsxs)("div",{className:t.fileReselect,children:[(0,v.jsx)("div",{className:t.valueString,children:R}),(0,v.jsx)(d.Z,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){T(!0)},disableRipple:!1,disableFocusRipple:!1,size:"small",children:(0,v.jsx)(m.Z,{})})]})]})})}))},80666:function(e,n,t){t(72791);var i=t(11135),r=t(25787),a=t(90983),s=t(81918),o=t(91614),c=t(61889),l=t(20890),u=t(64554),d=t(94721),m=t(90493),x=t(15021),f=t(20653),p=t(49900),h=t(52502),Z=t(46431),j=t.n(Z),v=t(46707),C=t(80184);n.Z=(0,r.Z)((function(e){return(0,i.Z)({certificateIcon:{float:"left",paddingTop:"5px !important",paddingRight:"10px !important"},certificateInfo:{float:"right"},certificateWrapper:{height:"auto",margin:5,border:"1px solid #E2E2E2",userSelect:"text",borderRadius:4,"& h6":{fontWeight:"bold"},"& div":{padding:0}},certificateExpiry:{color:"#616161",display:"flex",alignItems:"center",flexWrap:"wrap",marginBottom:5,"& .label":{fontWeight:"bold"}},certificateDomains:{color:"#616161","& .label":{fontWeight:"bold"}},certificatesList:{border:"1px solid #E2E2E2",borderRadius:4,color:"#616161",textTransform:"lowercase",overflowY:"scroll",maxHeight:145,marginBottom:10},certificatesListItem:{padding:"0px 16px",borderBottom:"1px solid #E2E2E2","& div":{minWidth:0},"& svg":{fontSize:12,marginRight:10,opacity:.5},"& span":{fontSize:12}}})}))((function(e){var n=e.classes,t=e.certificateInfo,i=e.onDelete,r=void 0===i?function(){}:i,Z=t.domains||[];return(0,C.jsx)(s.Z,{variant:"outlined",color:"primary",className:n.certificateWrapper,label:(0,C.jsxs)(o.Z,{children:[(0,C.jsx)(c.ZP,{item:!0,xs:1,className:n.certificateIcon,children:(0,C.jsx)(v.Z,{})}),(0,C.jsxs)(c.ZP,{item:!0,xs:11,className:n.certificateInfo,children:[(0,C.jsx)(l.Z,{variant:"subtitle1",display:"block",gutterBottom:!0,children:t.name}),(0,C.jsxs)(u.Z,{className:n.certificateExpiry,children:[(0,C.jsx)(h.Z,{color:"inherit",fontSize:"small"}),"\xa0",(0,C.jsx)("span",{className:"label",children:"Expiry:\xa0"}),(0,C.jsx)("span",{children:(0,C.jsx)(j(),{format:"YYYY/MM/DD",children:t.expiry})})]}),(0,C.jsx)(d.Z,{}),(0,C.jsx)("br",{}),(0,C.jsx)(u.Z,{className:n.certificateDomains,children:(0,C.jsx)("span",{className:"label",children:"".concat(Z.length," Domain (s):")})}),(0,C.jsx)(m.Z,{className:n.certificatesList,children:Z.map((function(e){return(0,C.jsxs)(x.ZP,{className:n.certificatesListItem,children:[(0,C.jsx)(f.Z,{children:(0,C.jsx)(a.Z,{})}),(0,C.jsx)(p.Z,{primary:e})]})}))})]})]}),onDelete:r},t.name)}))},12684:function(e,n,t){t.r(n);var i=t(4942),r=t(93433),a=t(29439),s=t(1413),o=t(72791),c=t(60364),l=t(51691),u=t(36151),d=t(11135),m=t(25787),x=t(61889),f=t(23814),p=t(81551),h=t(15900),Z=t(87995),j=t(37516),v=t(54639),C=t(81207),g=t(2148),b=t(72401),y=t(80666),A=t(50896),N=t(18158),S=t(1078),k=t(80184),R=(0,c.$j)((function(e){return{loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo}}),null);n.default=(0,m.Z)((function(e){return(0,d.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)((0,s.Z)({},f.oZ),f.bK),{},{loaderAlign:{textAlign:"center"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},(0,f.Bz)(e.spacing(4))),f.QV),f.DF),f.oO),f.AK))}))(R((function(e){var n=e.classes,t=(0,p.TL)(),d=(0,c.v9)((function(e){return e.tenants.tenantInfo})),m=(0,c.v9)((function(e){return e.tenants.loadingTenant})),f=(0,o.useState)(!1),R=(0,a.Z)(f,2),I=R[0],P=R[1],w=(0,o.useState)(!1),T=(0,a.Z)(w,2),_=T[0],G=T[1],F=(0,o.useState)(!1),B=(0,a.Z)(F,2),E=B[0],D=B[1],L=(0,o.useState)(!1),M=(0,a.Z)(L,2),W=M[0],U=M[1],z=(0,o.useState)([]),O=(0,a.Z)(z,2),H=O[0],Y=O[1],K=(0,o.useState)([]),q=(0,a.Z)(K,2),V=q[0],Q=q[1],$=(0,o.useState)([]),J=(0,a.Z)($,2),X=J[0],ee=J[1],ne=(0,o.useState)([]),te=(0,a.Z)(ne,2),ie=te[0],re=te[1],ae=(0,o.useState)([]),se=(0,a.Z)(ae,2),oe=se[0],ce=se[1],le=(0,c.v9)((function(e){return e.editTenantSecurityContext.runAsGroup})),ue=(0,c.v9)((function(e){return e.editTenantSecurityContext.runAsUser})),de=(0,c.v9)((function(e){return e.editTenantSecurityContext.fsGroup})),me=(0,c.v9)((function(e){return e.editTenantSecurityContext.runAsNonRoot})),xe=(0,o.useCallback)((function(){C.Z.invoke("GET","/api/v1/namespaces/".concat(null===d||void 0===d?void 0:d.namespace,"/tenants/").concat(null===d||void 0===d?void 0:d.name,"/security")).then((function(e){D(e.autoCert),(e.customCertificates.minio||e.customCertificates.minioCAs)&&U(!0),re(e.customCertificates.minio||[]),ce(e.customCertificates.minioCAs||[]),t((0,S.Be)(e.securityContext.runAsGroup)),t((0,S.wT)(e.securityContext.runAsUser)),t((0,S.FP)(e.securityContext.fsGroup)),t((0,S.vM)(e.securityContext.runAsNonRoot))})).catch((function(e){t((0,Z.Ih)(e))}))}),[d,t]);(0,o.useEffect)((function(){d&&xe()}),[d,xe]);var fe=function(e){Y([].concat((0,r.Z)(H),[e.name]));var n=ie.filter((function(n){return n.name!==e.name})),t=oe.filter((function(n){return n.name!==e.name}));re(n),ce(t)},pe=function(e,n,t,r,a){var o=V,c=function(){};switch(e){case"minio":o=V,c=Q;break;case"minioCAs":o=X,c=ee}c(o.map((function(e){var o;return e.id===n?(0,s.Z)((0,s.Z)({},e),{},(o={},(0,i.Z)(o,t,r),(0,i.Z)(o,"encoded_".concat(t),a),o)):e})))},he=function(e,n){var t=V,i=function(){};switch(e){case"minio":t=V,i=Q;break;case"minioCAs":t=X,i=ee}t.length>1&&i(t.filter((function(e){return e.id!==n})))},Ze=function(e){var n=V,t=function(){};switch(e){case"minio":n=V,t=Q;break;case"minioCAs":n=X,t=ee}t([].concat((0,r.Z)(n),[{id:Date.now().toString(),key:"",cert:"",encoded_key:"",encoded_cert:""}]))};return(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)(g.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,k.jsx)(h.EjK,{}),isLoading:I,onClose:function(){return G(!1)},isOpen:_,onConfirm:function(){P(!0);var e={autoCert:E,customCertificates:{},securityContext:{runAsGroup:le,runAsUser:ue,runAsNonRoot:me,fsGroup:de}};e.customCertificates=W?{secretsToBeDeleted:H,minio:V.map((function(e){return{crt:e.encoded_cert,key:e.encoded_key}})).filter((function(e){return e.crt&&e.key})),minioCAs:X.map((function(e){return e.encoded_cert})).filter((function(e){return e}))}:{secretsToBeDeleted:[].concat((0,r.Z)(ie.map((function(e){return e.name}))),(0,r.Z)(oe.map((function(e){return e.name})))),minio:[],minioCAs:[]},C.Z.invoke("POST","/api/v1/namespaces/".concat(null===d||void 0===d?void 0:d.namespace,"/tenants/").concat(null===d||void 0===d?void 0:d.name,"/security"),e).then((function(){P(!1),G(!1),Q([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),ee([{cert:"",encoded_cert:"",encoded_key:"",id:Date.now().toString(),key:""}]),xe()})).catch((function(e){t((0,Z.Ih)(e)),P(!1)}))},confirmationContent:(0,k.jsx)(l.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),m?(0,k.jsx)("div",{className:n.loaderAlign,children:(0,k.jsx)(b.Z,{})}):(0,k.jsxs)(x.ZP,{container:!0,spacing:1,children:[(0,k.jsxs)(x.ZP,{item:!0,xs:12,children:[(0,k.jsx)("h1",{className:n.sectionTitle,children:"Security"}),(0,k.jsx)("hr",{className:n.hrClass})]}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:(0,k.jsx)(j.Z,{value:"enableAutoCert",id:"enableAutoCert",name:"enableAutoCert",checked:E,onChange:function(e){var n=e.target.checked;D(n)},label:"TLS",description:"The internode certificates will be generated and managed by MinIO Operator"})}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:(0,k.jsx)(j.Z,{value:"enableCustomCerts",id:"enableCustomCerts",name:"enableCustomCerts",checked:W,onChange:function(e){var n=e.target.checked;U(n)},label:"Custom Certificates",description:"Certificates used to terminated TLS at MinIO"})}),W&&(0,k.jsxs)(o.Fragment,{children:[(0,k.jsx)(x.ZP,{item:!0,xs:12,children:(0,k.jsx)(A.Z,{children:"MinIO Certificates"})}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:ie.map((function(e){return(0,k.jsx)(y.Z,{certificateInfo:e,onDelete:function(){return fe(e)}})}))}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:V.map((function(e){return(0,k.jsxs)(x.ZP,{container:!0,alignItems:"center",style:{borderBottom:"1px solid #eaeaea"},children:[(0,k.jsx)(x.ZP,{item:!0,xs:5,children:(0,k.jsx)(v.Z,{onChange:function(n,t){return pe("minio",e.id,"cert",t,n)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,k.jsx)(x.ZP,{item:!0,xs:5,children:(0,k.jsx)(v.Z,{onChange:function(n,t){return pe("minio",e.id,"key",t,n)},accept:".key,.pem",id:"tlsKey",name:"tlsKey",label:"Key",value:e.key})}),(0,k.jsx)(x.ZP,{item:!0,xs:2,children:(0,k.jsx)(u.Z,{variant:"outlined",color:"secondary",onClick:function(){return he("minio",e.id)},children:"Remove"})})]},e.id)}))}),(0,k.jsx)(x.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(u.Z,{variant:"outlined",color:"primary",endIcon:(0,k.jsx)(h.dtP,{}),onClick:function(){return Ze("minio")},children:"Add Certificate"})}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:(0,k.jsx)(A.Z,{children:"MinIO CA Certificates"})}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:oe.map((function(e){return(0,k.jsx)(y.Z,{certificateInfo:e,onDelete:function(){return fe(e)}})}))}),(0,k.jsx)(x.ZP,{item:!0,xs:12,children:X.map((function(e){return(0,k.jsxs)(x.ZP,{container:!0,style:{borderBottom:"1px solid #eaeaea"},alignItems:"center",justifyContent:"space-between",children:[(0,k.jsx)(x.ZP,{item:!0,xs:5,className:n.fileItem,children:(0,k.jsx)(v.Z,{onChange:function(n,t){return pe("minioCAs",e.id,"cert",t,n)},accept:".cer,.crt,.cert,.pem",id:"tlsCert",name:"tlsCert",label:"Cert",value:e.cert})}),(0,k.jsx)(x.ZP,{item:!0,xs:2,children:(0,k.jsx)(u.Z,{variant:"outlined",color:"secondary",onClick:function(){return he("minioCAs",e.id)},children:"Remove"})})]},e.id)}))}),(0,k.jsx)(x.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(u.Z,{variant:"outlined",color:"primary",endIcon:(0,k.jsx)(h.dtP,{}),onClick:function(){return Ze("minioCAs")},children:"Add CA Certificate"})})]}),(0,k.jsx)(x.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,k.jsx)(N.Z,{classes:n,runAsGroup:le,runAsUser:ue,fsGroup:de,runAsNonRoot:me,setFSGroup:function(e){return t((0,S.FP)(e))},setRunAsUser:function(e){return t((0,S.wT)(e))},setRunAsGroup:function(e){return t((0,S.Be)(e))},setRunAsNonRoot:function(e){return t((0,S.vM)(e))}})}),(0,k.jsx)(x.ZP,{item:!0,xs:12,textAlign:"right",children:(0,k.jsx)(u.Z,{type:"submit",variant:"contained",color:"primary",disabled:_||I,onClick:function(){return G(!0)},children:"Save"})})]})]})})))},18158:function(e,n,t){var i=t(72791),r=t(21435),a=t(37516),s=t(61889),o=t(60364),c=t(80184);n.Z=function(e){var n=e.classes,t=e.runAsGroup,l=e.runAsUser,u=e.fsGroup,d=e.runAsNonRoot,m=e.setRunAsUser,x=e.setRunAsGroup,f=e.setFSGroup,p=e.setRunAsNonRoot,h=(0,o.I0)();return(0,c.jsx)(i.Fragment,{children:(0,c.jsxs)("fieldset",{className:"".concat(n.fieldGroup," ").concat(n.fieldSpaceTop," "),children:[(0,c.jsx)("legend",{className:n.descriptionText,children:"Security Context"}),(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsxs)("div",{className:"".concat(n.multiContainerStackNarrow," "),children:[(0,c.jsx)("div",{className:n.configSectionItem,children:(0,c.jsx)(r.Z,{type:"number",id:"securityContext_runAsUser",name:"securityContext_runAsUser",onChange:function(e){h(m(e.target.value))},label:"Run As User",value:l,required:!0,min:"0"})}),(0,c.jsx)("div",{className:n.configSectionItem,children:(0,c.jsx)(r.Z,{type:"number",id:"securityContext_runAsGroup",name:"securityContext_runAsGroup",onChange:function(e){h(x(e.target.value))},label:"Run As Group",value:t,required:!0,min:"0"})}),(0,c.jsx)("div",{className:n.configSectionItem,children:(0,c.jsx)(r.Z,{type:"number",id:"securityContext_fsGroup",name:"securityContext_fsGroup",onChange:function(e){h(f(e.target.value))},label:"FsGroup",value:u,required:!0,min:"0"})})]})}),(0,c.jsx)("br",{}),(0,c.jsx)(s.ZP,{item:!0,xs:12,children:(0,c.jsx)("div",{className:n.multiContainer,children:(0,c.jsx)(a.Z,{value:"SecurityContextRunAsNonRoot",id:"securityContext_runAsNonRoot",name:"securityContext_runAsNonRoot",checked:d,onChange:function(){h(p(!d))},label:"Do not run as Root"})})})]})})}},22512:function(e,n,t){var i=t(72791),r=t(20890),a=t(11135),s=t(25787),o=t(80184);n.Z=(0,s.Z)((function(e){var n;return(0,a.Z)({errorBlock:{color:(null===(n=e.palette)||void 0===n?void 0:n.error.main)||"#C83B51"}})}))((function(e){var n=e.classes,t=e.errorMessage,a=e.withBreak,s=void 0===a||a;return(0,o.jsxs)(i.Fragment,{children:[s&&(0,o.jsx)("br",{}),(0,o.jsx)(r.Z,{component:"p",variant:"body1",className:n.errorBlock,children:t})]})}))}}]);
//# sourceMappingURL=2684.52b792c0.chunk.js.map