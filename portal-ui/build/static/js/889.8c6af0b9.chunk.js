"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[889],{20889:function(e,a,t){t.r(a);var l=t(29439),i=t(1413),n=t(72791),s=t(75952),r=t(11135),c=t(25787),o=t(26181),d=t.n(o),u=t(61889),m=t(23814),h=t(21435),x=t(56028),g=t(81207),p=t(90673),f=t(37516),Z=t(45248),v=t(17420),j=t(38588),b=t(56578),S=t(87995),y=t(25469),C=t(80184);a.default=(0,c.Z)((function(e){return(0,r.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({multiContainer:{display:"flex",alignItems:"center"},sizeFactorContainer:{"& label":{display:"none"},"& div:first-child":{marginBottom:0,"@media (max-width: 600px)":{marginTop:"7px"}}}},m.bK),m.QV),m.DF),m.ID),{},{modalFormScrollable:(0,i.Z)((0,i.Z)({},m.ID.modalFormScrollable),{},{paddingRight:10})}))}))((function(e){var a=e.open,t=e.closeModalAndRefresh,i=e.classes,r=e.bucketName,c=e.setReplicationRules,o=(0,y.TL)(),m=(0,n.useState)(!1),R=(0,l.Z)(m,2),k=R[0],N=R[1],P=(0,n.useState)("1"),w=(0,l.Z)(P,2),F=w[0],D=w[1],T=(0,n.useState)(""),M=(0,l.Z)(T,2),B=M[0],K=M[1],L=(0,n.useState)(""),_=(0,l.Z)(L,2),A=_[0],I=_[1],U=(0,n.useState)(""),z=(0,l.Z)(U,2),E=z[0],O=z[1],G=(0,n.useState)(""),V=(0,l.Z)(G,2),Q=V[0],q=V[1],H=(0,n.useState)(""),Y=(0,l.Z)(H,2),J=Y[0],W=Y[1],X=(0,n.useState)(""),$=(0,l.Z)(X,2),ee=$[0],ae=$[1],te=(0,n.useState)(""),le=(0,l.Z)(te,2),ie=le[0],ne=le[1],se=(0,n.useState)(!0),re=(0,l.Z)(se,2),ce=re[0],oe=re[1],de=(0,n.useState)(!0),ue=(0,l.Z)(de,2),me=ue[0],he=ue[1],xe=(0,n.useState)(!0),ge=(0,l.Z)(xe,2),pe=ge[0],fe=ge[1],Ze=(0,n.useState)(!0),ve=(0,l.Z)(Ze,2),je=ve[0],be=ve[1],Se=(0,n.useState)(""),ye=(0,l.Z)(Se,2),Ce=ye[0],Re=ye[1],ke=(0,n.useState)("async"),Ne=(0,l.Z)(ke,2),Pe=Ne[0],we=Ne[1],Fe=(0,n.useState)("100"),De=(0,l.Z)(Fe,2),Te=De[0],Me=De[1],Be=(0,n.useState)("Gi"),Ke=(0,l.Z)(Be,2),Le=Ke[0],_e=Ke[1],Ae=(0,n.useState)("60"),Ie=(0,l.Z)(Ae,2),Ue=Ie[0],ze=Ie[1];(0,n.useEffect)((function(){if(0!==c.length){var e=c.reduce((function(e,a){return a.priority>e?a.priority:e}),0);D((e+1).toString())}else D("1")}),[c]);return(0,C.jsx)(x.Z,{modalOpen:a,onClose:function(){t()},title:"Set Bucket Replication",titleIcon:(0,C.jsx)(j.xRg,{}),children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),N(!0),function(){var e=[{originBucket:r,destinationBucket:ee}],a=parseInt(Ue),l="".concat(ce?"https://":"http://").concat(E),i={accessKey:B,secretKey:A,targetURL:l,region:ie,bucketsRelation:e,syncMode:Pe,bandwidth:"async"===Pe?parseInt((0,Z.Pw)(Te,Le,!0)):0,healthCheckPeriod:a,prefix:J,tags:Ce,replicateDeleteMarkers:me,replicateDeletes:pe,priority:parseInt(F),storageClass:Q,replicateMetadata:je};g.Z.invoke("POST","/api/v1/buckets-replication",i).then((function(e){N(!1);var a=d()(e,"replicationState",[]);if(a.length>0){var l=a[0];return N(!1),l.errorString&&""!==l.errorString?void o((0,S.zb)({errorMessage:l.errorString,detailedError:""})):void t()}o((0,S.zb)({errorMessage:"No changes applied",detailedError:""}))})).catch((function(e){N(!1),o((0,S.zb)(e))}))}()},children:(0,C.jsxs)(u.ZP,{container:!0,children:[(0,C.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalFormScrollable,children:[(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"priority",name:"priority",onChange:function(e){e.target.validity.valid&&D(e.target.value)},label:"Priority",value:F,pattern:"[0-9]*"})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"targetURL",name:"targetURL",onChange:function(e){O(e.target.value)},placeholder:"play.min.io",label:"Target URL",value:E})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(f.Z,{checked:ce,id:"useTLS",name:"useTLS",label:"Use TLS",onChange:function(e){oe(e.target.checked)},value:"yes"})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"accessKey",name:"accessKey",onChange:function(e){K(e.target.value)},label:"Access Key",value:B})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"secretKey",name:"secretKey",onChange:function(e){I(e.target.value)},label:"Secret Key",value:A})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"targetBucket",name:"targetBucket",onChange:function(e){ae(e.target.value)},label:"Target Bucket",value:ee})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"region",name:"region",onChange:function(e){ne(e.target.value)},label:"Region",value:ie})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(p.Z,{id:"replication_mode",name:"replication_mode",onChange:function(e){we(e.target.value)},label:"Replication Mode",value:Pe,options:[{label:"Asynchronous",value:"async"},{label:"Synchronous",value:"sync"}]})}),"async"===Pe&&(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)("div",{className:i.multiContainer,children:(0,C.jsx)(h.Z,{type:"number",id:"bandwidth_scalar",name:"bandwidth_scalar",onChange:function(e){e.target.validity.valid&&Me(e.target.value)},label:"Bandwidth",value:Te,min:"0",pattern:"[0-9]*",overlayObject:(0,C.jsx)(b.Z,{id:"quota_unit",onUnitChange:function(e){_e(e)},unitSelected:Le,unitsList:(0,Z.zQ)(["Ki"]),disabled:!1})})})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"healthCheck",name:"healthCheck",onChange:function(e){ze(e.target.value)},label:"Health Check Duration",value:Ue})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:"".concat(i.spacerTop," ").concat(i.formFieldRow),children:(0,C.jsx)(h.Z,{id:"storageClass",name:"storageClass",onChange:function(e){q(e.target.value)},placeholder:"STANDARD_IA,REDUCED_REDUNDANCY etc",label:"Storage Class",value:Q})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,children:(0,C.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,C.jsx)("legend",{className:i.descriptionText,children:"Object Filters"}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(h.Z,{id:"prefix",name:"prefix",onChange:function(e){W(e.target.value)},placeholder:"prefix",label:"Prefix",value:J})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(v.Z,{name:"tags",label:"Tags",elements:"",onChange:function(e){Re(e)},keyPlaceholder:"Tag Key",valuePlaceholder:"Tag Value",withBorder:!0})})]})}),(0,C.jsx)(u.ZP,{item:!0,xs:12,children:(0,C.jsxs)("fieldset",{className:i.fieldGroup,children:[(0,C.jsx)("legend",{className:i.descriptionText,children:"Replication Options"}),(0,C.jsxs)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:[(0,C.jsx)(f.Z,{checked:je,id:"metadatataSync",name:"metadatataSync",label:"Metadata Sync",onChange:function(e){be(e.target.checked)},value:je,description:"Metadata Sync"}),(0,C.jsx)(f.Z,{checked:me,id:"deleteMarker",name:"deleteMarker",label:"Delete Marker",onChange:function(e){he(e.target.checked)},value:me,description:"Replicate soft deletes"})]}),(0,C.jsx)(u.ZP,{item:!0,xs:12,className:i.formFieldRow,children:(0,C.jsx)(f.Z,{checked:pe,id:"repDelete",name:"repDelete",label:"Deletes",onChange:function(e){fe(e.target.checked)},value:pe,description:"Replicate versioned deletes"})})]})})]}),(0,C.jsxs)(u.ZP,{item:!0,xs:12,className:i.modalButtonBar,children:[(0,C.jsx)(s.zx,{id:"cancel",type:"button",variant:"regular",disabled:k,onClick:function(){t()},label:"Cancel"}),(0,C.jsx)(s.zx,{id:"submit",type:"submit",variant:"callAction",color:"primary",disabled:k,label:"Save"})]})]})})})}))}}]);
//# sourceMappingURL=889.8c6af0b9.chunk.js.map