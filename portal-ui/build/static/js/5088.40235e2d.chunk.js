"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5088],{23804:function(e,n,t){t(72791);var i=t(11135),s=t(25787),o=t(61889),r=t(80184);n.Z=(0,s.Z)((function(e){return(0,i.Z)({root:{border:"1px solid #E2E2E2",borderRadius:2,backgroundColor:"#FBFAFA",paddingLeft:25,paddingTop:31,paddingBottom:21,paddingRight:30},leftItems:{fontSize:16,fontWeight:"bold",marginBottom:15,display:"flex",alignItems:"center","& .min-icon":{marginRight:15,height:28,width:38}},helpText:{fontSize:16,paddingLeft:5}})}))((function(e){var n=e.classes,t=e.iconComponent,i=e.title,s=e.help;return(0,r.jsx)("div",{className:n.root,children:(0,r.jsxs)(o.ZP,{container:!0,children:[(0,r.jsxs)(o.ZP,{item:!0,xs:12,className:n.leftItems,children:[t,i]}),(0,r.jsx)(o.ZP,{item:!0,xs:12,className:n.helpText,children:s})]})})}))},75088:function(e,n,t){t.r(n),t.d(n,{default:function(){return F}});var i=t(4942),s=t(29439),o=t(1413),r=t(72791),a=t(28182),l=t(95087),c=t(25469),d=t(60364),x=t(16871),g=t(75952),u="error",f="success",m="inProgress",p=t(11135),h=t(25787),v=t(26824),j=t(23814),Z=t(61889),b=t(32291),y=t(93385),w=t(38588),C=t(81207),S=t(72401),N=t(80184),D=(0,h.Z)((function(e){return(0,p.Z)({titleBar:{borderBottom:"#E5E5E5 1px solid",padding:"30px 25px",fontSize:20,color:"#07193E",fontWeight:"bold",borderRadius:"10px 10px 0px 0px",paddingTop:0},divisorContainer:{padding:25},serversData:{color:"#07193E",fontSize:18,display:"flex",alignItems:"center","& svg":{marginRight:10}},minioVersionContainer:{fontSize:12,color:"#07193E",justifyContent:"center",alignSelf:"center",alignItems:"center",display:"flex"},versionIcon:{color:"#07193E",marginRight:20},loaderAlign:{textAlign:"center"},advancedContainer:{justifyContent:"flex-end",display:"flex"},optionsContainer:{padding:0,marginBottom:25},advancedConfiguration:{color:"#2781B0",fontSize:10,textDecoration:"underline",border:"none",backgroundColor:"transparent",cursor:"pointer",alignItems:"center",display:"flex","&:hover":{color:"#07193E"},"& svg":{width:10,alignSelf:"center",marginLeft:5}},advancedOpen:{transform:"rotateZ(-90deg) translateX(-4px) translateY(2px)"},advancedClosed:{transform:"rotateZ(90deg)"},advancedContent:{backgroundColor:"#F5F7F9",maxHeight:0,transitionDuration:"0.3s",overflow:"hidden",padding:"0 15px","&.open":{maxHeight:400,padding:15}}})}))((function(e){var n=e.title,t=e.children,i=e.classes,o=e.advancedVisible,a=e.advancedContent,l=(0,r.useState)("N/A"),c=(0,s.Z)(l,2),d=c[0],x=c[1],g=(0,r.useState)(0),u=(0,s.Z)(g,2),f=u[0],m=u[1],p=(0,r.useState)(0),h=(0,s.Z)(p,2),v=h[0],j=h[1],b=(0,r.useState)(!0),D=(0,s.Z)(b,2),E=D[0],I=D[1],P=(0,r.useState)(!1),R=(0,s.Z)(P,2),k=R[0],A=R[1];return(0,r.useEffect)((function(){E&&C.Z.invoke("GET","/api/v1/admin/info?defaultOnly=true").then((function(e){var n,t=null===(n=e.servers)||void 0===n?void 0:n.length;if(m(t),e.servers.length>0){x(e.servers[0].version);var i=e.servers.reduce((function(e,n){return e+n.drives.length}),0);j(i)}I(!1)})).catch((function(e){I(!1)}))}),[E]),(0,N.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,N.jsx)(Z.ZP,{item:!0,xs:12,className:i.titleBar,children:n}),(0,N.jsxs)(Z.ZP,{item:!0,xs:12,children:[(0,N.jsxs)(Z.ZP,{item:!0,xs:12,className:i.optionsContainer,children:[(0,N.jsx)(Z.ZP,{container:!0,className:i.divisorContainer,children:E?(0,N.jsx)(r.Fragment,{children:(0,N.jsx)(Z.ZP,{item:!0,xs:12,className:i.loaderAlign,children:(0,N.jsx)(S.Z,{style:{width:25,height:25}})})}):(0,N.jsxs)(r.Fragment,{children:[(0,N.jsxs)(Z.ZP,{item:!0,xs:12,md:4,className:i.serversData,children:[(0,N.jsx)(w.FU8,{})," ",(0,N.jsx)("strong",{children:f}),"\xa0nodes,\xa0",(0,N.jsx)("strong",{children:v}),"\xa0 drives"]}),(0,N.jsxs)(Z.ZP,{item:!0,xs:12,md:4,className:i.minioVersionContainer,children:[(0,N.jsx)("span",{className:i.versionIcon,children:(0,N.jsx)(w.Dbk,{})})," ","MinIO VERSION\xa0",(0,N.jsx)("strong",{children:d})]}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,md:4,className:i.advancedContainer,children:o&&(0,N.jsxs)("button",{onClick:function(){A(!k)},className:i.advancedConfiguration,children:["Advanced configurations"," ",(0,N.jsx)("span",{className:k?i.advancedOpen:i.advancedClosed,children:(0,N.jsx)(y.Z,{})})]})})]})}),a&&(0,N.jsx)(Z.ZP,{xs:12,className:"".concat(i.advancedContent," ").concat(k?"open":""),children:a})]}),t]})]})})),E=t(74794),I=t(23804),P=t(89357),R=t(87995),k=t(12808),A=t(31460),F=(0,h.Z)((function(e){return(0,p.Z)((0,o.Z)((0,o.Z)({loading:{paddingTop:8,paddingLeft:40},buttons:{justifyContent:"flex-start",gap:20},localMessage:{fontSize:24,color:"#07193E",fontWeight:"bold",textAlign:"center",marginBottom:10},progressResult:{textAlign:"center",marginBottom:25},startDiagnostic:{display:"flex",justifyContent:"flex-end",margin:25,marginBottom:0},startDiagnosticCenter:{textAlign:"center",marginTop:0}},j.OR),(0,j.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=(0,c.TL)(),o=(0,x.s0)(),p=(0,d.v9)((function(e){return e.healthInfo.message})),h=((0,d.v9)((function(e){var n;return null===e||void 0===e||null===(n=e.system)||void 0===n?void 0:n.licenseInfo}))||{}).plan,j=void 0===h?"":h,y="STANDARD"===j||"ENTERPRISE"===j,w=(0,d.v9)((function(e){return e.system.serverDiagnosticStatus})),C=(0,r.useState)(!1),F=(0,s.Z)(C,2),z=F[0],B=F[1],T=(0,r.useState)(!0),H=(0,s.Z)(T,2),L=H[0],O=H[1],V=(0,r.useState)(""),M=(0,s.Z)(V,2),U=M[0],W=M[1],Y=(0,r.useState)("Start Diagnostic"),K=(0,s.Z)(Y,2),G=K[0],X=K[1],_=(0,r.useState)("New Diagnostic"),J=(0,s.Z)(_,2),q=J[0],Q=J[1],$=(0,r.useState)(""),ee=(0,s.Z)($,2),ne=ee[0],te=ee[1],ie=w===f||w===u;(0,r.useEffect)((function(){return w===m?(Q("Diagnostic in progress..."),void W("Diagnostic started. Please do not refresh page during diagnosis.")):w===f?(Q("Diagnostic complete"),W("Diagnostic file is ready to be downloaded."),void X("Start New Diagnostic")):w===u?(Q("Error"),W("An error occurred while getting the Diagnostic file."),void X("Retry Diagnostic")):void 0}),[w,z]),(0,r.useEffect)((function(){w===f&&p!=={}&&O(!1),w===m&&O(!0),B(!1)}),[w,p]),(0,r.useEffect)((function(){if(z){t((0,k.Xp)()),te("");var e=new URL(window.location.toString()),n=e.port,i=(0,v.x2)(e.protocol),s=new URL(document.baseURI).pathname,o=new l.w3cwebsocket("".concat(i,"://").concat(e.hostname,":").concat(n).concat(s,"ws/health-info?deadline=1h")),r=null;null!==o&&(o.onopen=function(){console.log("WebSocket Client Connected"),o.send("ok"),r=setInterval((function(){o.send("ok")}),1e4),W("Diagnostic started. Please do not refresh page during diagnosis."),t((0,R.KY)(m))},o.onmessage=function(e){var n=JSON.parse(e.data.toString());n.serverHealthInfo&&(n.serverHealthInfo.timestamp=new Date(n.serverHealthInfo.timestamp.toString()),t((0,k.ec)(n.serverHealthInfo))),""!==n.encoded&&te(n.encoded)},o.onerror=function(e){console.log("error closing websocket:",e.message),o.close(1e3),clearInterval(r),t((0,R.KY)(u))},o.onclose=function(e){clearInterval(r),e.code===v.HE||e.code===v.ci||e.code===v.V9?(console.log("connection closed by server with code:",e.code),W("An error occurred while getting the Diagnostic file."),t((0,R.KY)(u))):(console.log("connection closed by server"),W("Diagnostic file is ready to be downloaded."),t((0,R.KY)(f)))})}else B(!1)}),[z,t]);return(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)(b.Z,{label:"Health"}),(0,N.jsxs)(E.Z,{children:[!y&&(0,N.jsx)(A.Z,{compactMode:!0}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,className:n.boxy,children:(0,N.jsx)(D,{title:q,advancedVisible:!1,children:(0,N.jsx)(Z.ZP,{container:!0,className:n.buttons,children:(0,N.jsxs)(Z.ZP,{item:!0,xs:12,className:n.progressResult,children:[(0,N.jsx)("div",{className:n.localMessage,children:U}),w===m?(0,N.jsx)("div",{className:n.loading,children:(0,N.jsx)(S.Z,{style:{width:25,height:25}})}):(0,N.jsxs)(r.Fragment,{children:[w!==u&&!L&&(0,N.jsx)(g.zx,{id:"download",type:"submit",variant:"callAction",onClick:function(){return function(){var e=document.createElement("a");e.setAttribute("href","data:application/gzip;base64,".concat(ne)),e.setAttribute("download","diagnostic.json.gz"),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e)}()},disabled:L,label:"Download"}),(0,N.jsx)(Z.ZP,{item:!0,xs:12,className:(0,a.Z)(n.startDiagnostic,(0,i.Z)({},n.startDiagnosticCenter,!ie)),children:(0,N.jsx)(g.zx,{id:"start-new-diagnostic",type:"submit",variant:y?"callAction":"regular",disabled:z,onClick:function(){"STANDARD"===j||"ENTERPRISE"===j?B(!0):o("/support/register")},label:G})})]})]},"start-download")})})}),!z&&y&&(0,N.jsxs)(r.Fragment,{children:[(0,N.jsx)("br",{}),(0,N.jsx)(I.Z,{title:"During the health diagnostics run, all production traffic will be suspended.",iconComponent:(0,N.jsx)(P.Z,{}),help:(0,N.jsx)(r.Fragment,{})})]})]})]})}))},31460:function(e,n,t){var i=t(72791),s=t(61889),o=t(36151),r=t(64554),a=t(16871),l=t(89357),c=t(23804),d=t(80184);n.Z=function(e){var n=e.compactMode,t=void 0!==n&&n,x=(0,a.s0)(),g=(0,d.jsx)(o.Z,{type:"submit",variant:"contained",color:"primary",onClick:function(){return x("/support/register")},children:"Register your Cluster"}),u="Use your MinIO Subscription Network login credentials to register this cluster.";return t?(0,d.jsxs)(i.Fragment,{children:[(0,d.jsx)(c.Z,{title:(0,d.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexGrow:1},children:[(0,d.jsx)("span",{children:u})," ",g]}),iconComponent:(0,d.jsx)(l.Z,{}),help:(0,d.jsx)(i.Fragment,{})}),(0,d.jsx)("br",{})]}):(0,d.jsx)(r.Z,{sx:{padding:"25px",border:"1px solid #eaeaea",display:"flex",alignItems:"center",justifyContent:"center",flexFlow:{sm:"row",xs:"column"},marginBottom:"15px"},children:(0,d.jsxs)(s.ZP,{container:!0,children:[(0,d.jsx)(s.ZP,{item:!0,xs:12,children:(0,d.jsx)(r.Z,{sx:{marginRight:"8px",fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center","& .min-icon":{width:"83px",height:"14px",marginLeft:"5px",marginRight:"5px"}},children:"Register your cluster"})}),(0,d.jsx)(s.ZP,{item:!0,xs:12,children:(0,d.jsx)(r.Z,{sx:{display:"flex",flexFlow:{xs:"column",md:"row"}},children:(0,d.jsxs)(r.Z,{sx:{display:"flex",flexFlow:"column",flex:"2"},children:[(0,d.jsx)(r.Z,{sx:{fontSize:"16px",display:"flex",flexFlow:"column",marginTop:"15px",marginBottom:"15px"},children:u}),(0,d.jsx)(r.Z,{sx:{flex:"1"},children:(0,d.jsx)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:g})})]})})})]})})}},26824:function(e,n,t){t.d(n,{HE:function(){return o},V9:function(){return i},ci:function(){return s},x2:function(){return r}});var i=1006,s=1008,o=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}}}]);
//# sourceMappingURL=5088.40235e2d.chunk.js.map