{"version":3,"file":"static/js/5088.40235e2d.chunk.js","mappings":"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","sources":["common/HelpBox.tsx","screens/Console/HealthInfo/types.ts","screens/Console/Common/TestWrapper/TestWrapper.tsx","screens/Console/HealthInfo/HealthInfo.tsx","screens/Console/Support/RegisterCluster.tsx","utils/wsUtils.ts"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport Grid from \"@mui/material/Grid\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    root: {\n      border: \"1px solid #E2E2E2\",\n      borderRadius: 2,\n      backgroundColor: \"#FBFAFA\",\n      paddingLeft: 25,\n      paddingTop: 31,\n      paddingBottom: 21,\n      paddingRight: 30,\n    },\n    leftItems: {\n      fontSize: 16,\n      fontWeight: \"bold\",\n      marginBottom: 15,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& .min-icon\": {\n        marginRight: 15,\n        height: 28,\n        width: 38,\n      },\n    },\n    helpText: {\n      fontSize: 16,\n      paddingLeft: 5,\n    },\n  });\n\ninterface IHelpBox {\n  classes: any;\n  iconComponent: any;\n  title: string | React.ReactNode;\n  help: any;\n}\n\nconst HelpBox = ({ classes, iconComponent, title, help }: IHelpBox) => {\n  return (\n    <div className={classes.root}>\n      <Grid container>\n        <Grid item xs={12} className={classes.leftItems}>\n          {iconComponent}\n          {title}\n        </Grid>\n        <Grid item xs={12} className={classes.helpText}>\n          {help}\n        </Grid>\n      </Grid>\n    </div>\n  );\n};\n\nexport default withStyles(styles)(HelpBox);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const DiagStatError = \"error\";\nexport const DiagStatSuccess = \"success\";\nexport const DiagStatInProgress = \"inProgress\";\n\nexport interface HealthInfoMessage {\n  timestamp: Date;\n  error: string;\n  perf: perfInfo;\n  minio: minioHealthInfo;\n  sys: sysHealthInfo;\n}\n\nexport interface ReportMessage {\n  encoded: string;\n  serverHealthInfo: HealthInfoMessage;\n}\n\nexport interface perfInfo {\n  drives: serverDrivesInfo[];\n  net: serverNetHealthInfo[];\n  net_parallel: serverNetHealthInfo;\n  error: string;\n}\n\nexport interface serverDrivesInfo {\n  addr: string;\n  serial: drivePerfInfo[];\n  parallel: drivePerfInfo[];\n  error: string;\n}\n\nexport interface drivePerfInfo {\n  endpoint: string;\n  latency: diskLatency;\n  throughput: diskThroughput;\n  error: string;\n}\n\nexport interface diskLatency {\n  avg_secs: number;\n  percentile50_secs: number;\n  percentile90_secs: number;\n  percentile99_secs: number;\n  min_secs: number;\n  max_secs: number;\n}\n\nexport interface diskThroughput {\n  avg_bytes_per_sec: number;\n  percentile50_bytes_per_sec: number;\n  percentile90_bytes_per_sec: number;\n  percentile99_bytes_per_sec: number;\n  min_bytes_per_sec: number;\n  max_bytes_per_sec: number;\n}\n\nexport interface serverNetHealthInfo {\n  addr: string;\n  net: netPerfInfo[];\n  error: string;\n}\n\nexport interface netPerfInfo {\n  remote: string;\n  latency: netLatency;\n  throughput: netThroughput;\n  error: string;\n}\n\nexport interface netLatency {\n  avg_secs: number;\n  percentile50_secs: number;\n  percentile90_secs: number;\n  percentile99_secs: number;\n  min_secs: number;\n  max_secs: number;\n}\n\nexport interface netThroughput {\n  avg_bytes_per_sec: number;\n  percentile50_bytes_per_sec: number;\n  percentile90_bytes_per_sec: number;\n  percentile99_bytes_per_sec: number;\n  min_bytes_per_sec: number;\n  max_bytes_per_sec: number;\n}\n\nexport interface minioHealthInfo {\n  info: infoMessage;\n  config: any;\n  error: string;\n}\n\nexport interface infoMessage {\n  mode: string;\n  domain: string[];\n  region: string;\n  sqsARN: string[];\n  deploymentID: string;\n  buckets: buckets;\n  objects: objects;\n  usage: usage;\n  services: services;\n  backend: any;\n  servers: serverProperties[];\n}\n\nexport interface buckets {\n  count: number;\n}\n\nexport interface objects {\n  count: number;\n}\n\nexport interface usage {\n  size: number;\n}\n\nexport interface services {\n  vault: vault;\n  ldap: ldap;\n  logger: Map<string, status[]>[];\n  audit: Map<string, status[]>[];\n  notifications: Map<string, Map<string, status[]>[]>;\n}\n\nexport interface vault {\n  status: string;\n  encrypt: string;\n  decrypt: string;\n}\n\nexport interface ldap {\n  status: string;\n}\n\nexport interface status {\n  status: string;\n}\n\nexport interface serverProperties {\n  state: string;\n  endpoint: string;\n  uptime: number;\n  version: string;\n  commitID: string;\n  network: Map<string, string>;\n  drives: disk[];\n}\n\nexport interface disk {\n  endpoint: string;\n  rootDisk: boolean;\n  path: string;\n  healing: boolean;\n  state: string;\n  uuid: string;\n  model: string;\n  totalspace: number;\n  usedspace: number;\n  availspace: number;\n  readthroughput: number;\n  writethroughput: number;\n  readlatency: number;\n  writelatency: number;\n  utilization: number;\n}\n\nexport interface sysHealthInfo {\n  cpus: serverCpuInfo[];\n  drives: serverDiskHwInfo[];\n  osinfos: serverOsInfo[];\n  meminfos: serverMemInfo[];\n  procinfos: serverProcInfo[];\n  error: string;\n}\n\nexport interface serverCpuInfo {\n  addr: string;\n  cpu: cpuInfoStat[];\n  time: cpuTimeStat[];\n  error: string;\n}\n\nexport interface cpuInfoStat {\n  cpu: number;\n  vendorId: string;\n  family: string;\n  model: string;\n  stepping: number;\n  physicalId: string;\n  coreId: string;\n  cores: number;\n  modelName: string;\n  mhz: number;\n  cacheSize: number;\n  flags: string[];\n  microcode: string;\n}\n\nexport interface cpuTimeStat {\n  cpu: string;\n  user: number;\n  system: number;\n  idle: number;\n  nice: number;\n  iowait: number;\n  irq: number;\n  softirq: number;\n  steal: number;\n  guest: number;\n  guestNice: number;\n}\n\nexport interface serverDiskHwInfo {\n  addr: string;\n  usages: diskUsageStat[];\n  partitions: partitionStat[];\n  counters: Map<string, diskIOCountersStat>;\n  error: string;\n}\n\nexport interface diskUsageStat {\n  path: string;\n  fstype: string;\n  total: number;\n  free: number;\n  used: number;\n  usedPercent: number;\n  inodesTotal: number;\n  inodesUsed: number;\n  inodesFree: number;\n  inodesUsedPercent: number;\n}\n\nexport interface partitionStat {\n  device: string;\n  mountpoint: string;\n  fstype: string;\n  opts: string;\n  smartInfo: smartInfo;\n}\n\nexport interface smartInfo {\n  device: string;\n  scsi: scsiInfo;\n  nvme: nvmeInfo;\n  ata: ataInfo;\n  error: string;\n}\n\nexport interface scsiInfo {\n  scsiCapacityBytes: number;\n  scsiModeSenseBuf: string;\n  scsirespLen: number;\n  scsiBdLen: number;\n  scsiOffset: number;\n  sciRpm: number;\n}\n\nexport interface nvmeInfo {\n  serialNum: string;\n  vendorId: string;\n  firmwareVersion: string;\n  modelNum: string;\n  spareAvailable: string;\n  spareThreshold: string;\n  temperature: string;\n  criticalWarning: string;\n  maxDataTransferPages: number;\n  controllerBusyTime: number;\n  powerOnHours: number;\n  powerCycles: number;\n  unsafeShutdowns: number;\n  mediaAndDataIntgerityErrors: number;\n  dataUnitsReadBytes: number;\n  dataUnitsWrittenBytes: number;\n  hostReadCommands: number;\n  hostWriteCommands: number;\n}\n\nexport interface ataInfo {\n  scsiLuWWNDeviceID: string;\n  serialNum: string;\n  modelNum: string;\n  firmwareRevision: string;\n  RotationRate: string;\n  MajorVersion: string;\n  MinorVersion: string;\n  smartSupportAvailable: boolean;\n  smartSupportEnabled: boolean;\n  smartErrorLog: string;\n  transport: string;\n}\n\nexport interface diskIOCountersStat {\n  readCount: number;\n  mergedReadCount: number;\n  DriteCount: number;\n  mergedWriteCount: number;\n  readBytes: number;\n  writeBytes: number;\n  readTime: number;\n  writeTime: number;\n  iopsInProgress: number;\n  ioTime: number;\n  weightedIO: number;\n  name: string;\n  serialNumber: string;\n  label: string;\n}\n\nexport interface serverOsInfo {\n  addr: string;\n  info: infoStat;\n  sensors: temperatureStat[];\n  users: userStat[];\n  error: string;\n}\n\nexport interface infoStat {\n  hostname: string;\n  uptime: number;\n  bootTime: number;\n  procs: number;\n  os: string;\n  platform: string;\n  platformFamily: string;\n  platformVersion: string;\n  kernelVersion: string;\n  kernelArch: string;\n  virtualizationSystem: string;\n  virtualizationRole: string;\n  hostid: string;\n}\n\nexport interface temperatureStat {\n  sensorKey: string;\n  sensorTemperature: number;\n}\n\nexport interface userStat {\n  user: string;\n  terminal: string;\n  host: string;\n  started: number;\n}\n\nexport interface serverMemInfo {\n  addr: string;\n  swap: swapMemoryStat;\n  virtualmem: virtualMemoryStat;\n  error: string;\n}\n\nexport interface swapMemoryStat {\n  total: number;\n  used: number;\n  free: number;\n  usedPercent: number;\n  sin: number;\n  sout: number;\n  pgin: number;\n  pgout: number;\n  pgfault: number;\n  pgmajfault: number;\n}\n\nexport interface virtualMemoryStat {\n  total: number;\n  available: number;\n  used: number;\n  usedPercent: number;\n  free: number;\n  active: number;\n  inactive: number;\n  wired: number;\n  laundry: number;\n  buffers: number;\n  cached: number;\n  writeback: number;\n  dirty: number;\n  writebacktmp: number;\n  shared: number;\n  slab: number;\n  sreclaimable: number;\n  sunreclaim: number;\n  pagetables: number;\n  swapcached: number;\n  commitlimit: number;\n  committedas: number;\n  hightotal: number;\n  highfree: number;\n  lowtotal: number;\n  lowfree: number;\n  swaptotal: number;\n  swapfree: number;\n  mapped: number;\n  vmalloctotal: number;\n  vmallocused: number;\n  vmallocchunk: number;\n  hugepagestotal: number;\n  hugepagesfree: number;\n  hugepagesize: number;\n}\n\nexport interface serverProcInfo {\n  addr: string;\n  processes: sysProcess[];\n  error: string;\n}\n\nexport interface sysProcess {\n  pid: number;\n  background: boolean;\n  cpupercent: number;\n  children: number[];\n  cmd: string;\n  connections: nethwConnectionStat[];\n  createtime: number;\n  cwd: string;\n  exe: string;\n  gids: number[];\n  iocounters: processIOCountersStat;\n  isrunning: boolean;\n  meminfo: memoryInfoStat;\n  memmaps: any[];\n  mempercent: number;\n  name: string;\n  netiocounters: nethwIOCounterStat[];\n  nice: number;\n  numctxswitches: processNmCtxSwitchesStat;\n  numfds: number;\n  numthreads: number;\n  pagefaults: processPageFaultsStat;\n  parent: number;\n  ppid: number;\n  rlimit: processRLimitStat[];\n  status: string;\n  tgid: number;\n  cputimes: cpuTimeStat;\n  uids: number[];\n  username: string;\n}\n\nexport interface nethwConnectionStat {\n  fd: number;\n  family: number;\n  type: number;\n  localaddr: netAddr;\n  remoteaddr: netAddr;\n  status: string;\n  uids: number[];\n  pid: number;\n}\n\nexport interface netAddr {\n  ip: string;\n  port: number;\n}\n\nexport interface processIOCountersStat {\n  readCount: number;\n  writeCount: number;\n  readBytes: number;\n  writeBytes: number;\n}\n\nexport interface memoryInfoStat {\n  rss: number;\n  vms: number;\n  hwm: number;\n  data: number;\n  stack: number;\n  locked: number;\n  swap: number;\n}\n\nexport interface nethwIOCounterStat {\n  name: string;\n  bytesSent: number;\n  bytesRecv: number;\n  packetsSent: number;\n  packetsRecv: number;\n  errin: number;\n  errout: number;\n  dropin: number;\n  dropout: number;\n  fifoin: number;\n  fifoout: number;\n}\n\nexport interface processNmCtxSwitchesStat {\n  voluntary: number;\n  involuntary: number;\n}\n\nexport interface processPageFaultsStat {\n  minorFaults: number;\n  majorFaults: number;\n  childMinorFaults: number;\n  childMajorFaults: number;\n}\n\nexport interface processRLimitStat {\n  resource: number;\n  soft: number;\n  hard: number;\n  used: number;\n}\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { Grid } from \"@mui/material\";\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\nimport { DrivesIcon, VersionIcon } from \"../../../../icons\";\nimport { ServerInfo, Usage } from \"../../Dashboard/types\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport api from \"../../../../common/api\";\nimport Loader from \"../Loader/Loader\";\n\ninterface ITestWrapper {\n  title: any;\n  children: any;\n  classes: any;\n  advancedVisible: boolean;\n  advancedContent?: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    titleBar: {\n      borderBottom: \"#E5E5E5 1px solid\",\n      padding: \"30px 25px\",\n      fontSize: 20,\n      color: \"#07193E\",\n      fontWeight: \"bold\",\n      borderRadius: \"10px 10px 0px 0px\",\n      paddingTop: 0,\n    },\n    divisorContainer: {\n      padding: 25,\n    },\n    serversData: {\n      color: \"#07193E\",\n      fontSize: 18,\n      display: \"flex\",\n      alignItems: \"center\",\n      \"& svg\": {\n        marginRight: 10,\n      },\n    },\n    minioVersionContainer: {\n      fontSize: 12,\n      color: \"#07193E\",\n      justifyContent: \"center\",\n      alignSelf: \"center\",\n      alignItems: \"center\",\n      display: \"flex\",\n    },\n    versionIcon: {\n      color: \"#07193E\",\n      marginRight: 20,\n    },\n    loaderAlign: {\n      textAlign: \"center\",\n    },\n    advancedContainer: {\n      justifyContent: \"flex-end\",\n      display: \"flex\",\n    },\n    optionsContainer: {\n      padding: 0,\n      marginBottom: 25,\n    },\n    advancedConfiguration: {\n      color: \"#2781B0\",\n      fontSize: 10,\n      textDecoration: \"underline\",\n      border: \"none\",\n      backgroundColor: \"transparent\",\n      cursor: \"pointer\",\n      alignItems: \"center\",\n      display: \"flex\",\n\n      \"&:hover\": {\n        color: \"#07193E\",\n      },\n\n      \"& svg\": {\n        width: 10,\n        alignSelf: \"center\",\n        marginLeft: 5,\n      },\n    },\n    advancedOpen: {\n      transform: \"rotateZ(-90deg) translateX(-4px) translateY(2px)\",\n    },\n    advancedClosed: {\n      transform: \"rotateZ(90deg)\",\n    },\n    advancedContent: {\n      backgroundColor: \"#F5F7F9\",\n      maxHeight: 0,\n      transitionDuration: \"0.3s\",\n      overflow: \"hidden\",\n      padding: \"0 15px\",\n      \"&.open\": {\n        maxHeight: 400,\n        padding: 15,\n      },\n    },\n  });\n\nconst TestWrapper = ({\n  title,\n  children,\n  classes,\n  advancedVisible,\n  advancedContent,\n}: ITestWrapper) => {\n  const [version, setVersion] = useState<string>(\"N/A\");\n  const [totalNodes, setTotalNodes] = useState<number>(0);\n  const [totalDrives, setTotalDrives] = useState<number>(0);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [advancedOpen, setAdvancedOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    if (loading) {\n      api\n        .invoke(\"GET\", `/api/v1/admin/info?defaultOnly=true`)\n        .then((res: Usage) => {\n          const totalServers = res.servers?.length;\n          setTotalNodes(totalServers);\n\n          if (res.servers.length > 0) {\n            setVersion(res.servers[0].version);\n\n            const totalServers = res.servers.reduce(\n              (prevTotal: number, currentElement: ServerInfo) => {\n                return prevTotal + currentElement.drives.length;\n              },\n              0\n            );\n            setTotalDrives(totalServers);\n          }\n\n          setLoading(false);\n        })\n        .catch((err: ErrorResponseHandler) => {\n          setLoading(false);\n        });\n    }\n  }, [loading]);\n\n  return (\n    <Grid item xs={12}>\n      <Grid item xs={12} className={classes.titleBar}>\n        {title}\n      </Grid>\n      <Grid item xs={12}>\n        <Grid item xs={12} className={classes.optionsContainer}>\n          <Grid container className={classes.divisorContainer}>\n            {!loading ? (\n              <Fragment>\n                <Grid item xs={12} md={4} className={classes.serversData}>\n                  <DrivesIcon /> <strong>{totalNodes}</strong>\n                  &nbsp;nodes,&nbsp;\n                  <strong>{totalDrives}</strong>&nbsp; drives\n                </Grid>\n                <Grid\n                  item\n                  xs={12}\n                  md={4}\n                  className={classes.minioVersionContainer}\n                >\n                  <span className={classes.versionIcon}>\n                    <VersionIcon />\n                  </span>{\" \"}\n                  MinIO VERSION&nbsp;<strong>{version}</strong>\n                </Grid>\n                <Grid item xs={12} md={4} className={classes.advancedContainer}>\n                  {advancedVisible && (\n                    <button\n                      onClick={() => {\n                        setAdvancedOpen(!advancedOpen);\n                      }}\n                      className={classes.advancedConfiguration}\n                    >\n                      Advanced configurations{\" \"}\n                      <span\n                        className={\n                          advancedOpen\n                            ? classes.advancedOpen\n                            : classes.advancedClosed\n                        }\n                      >\n                        <ArrowForwardIosIcon />\n                      </span>\n                    </button>\n                  )}\n                </Grid>\n              </Fragment>\n            ) : (\n              <Fragment>\n                <Grid item xs={12} className={classes.loaderAlign}>\n                  <Loader style={{ width: 25, height: 25 }} />\n                </Grid>\n              </Fragment>\n            )}\n          </Grid>\n          {advancedContent && (\n            <Grid\n              xs={12}\n              className={`${classes.advancedContent} ${\n                advancedOpen ? \"open\" : \"\"\n              }`}\n            >\n              {advancedContent}\n            </Grid>\n          )}\n        </Grid>\n        {children}\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default withStyles(styles)(TestWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\nimport { Fragment, useEffect, useState } from \"react\";\nimport clsx from \"clsx\";\nimport {\n  ICloseEvent,\n  IMessageEvent,\n  w3cwebsocket as W3CWebSocket,\n} from \"websocket\";\nimport { AppState, useAppDispatch } from \"../../../store\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"mds\";\nimport {\n  DiagStatError,\n  DiagStatInProgress,\n  DiagStatSuccess,\n  HealthInfoMessage,\n  ReportMessage,\n} from \"./types\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  WSCloseAbnormalClosure,\n  WSCloseInternalServerErr,\n  WSClosePolicyViolation,\n  wsProtocol,\n} from \"../../../utils/wsUtils\";\nimport {\n  actionsTray,\n  containerForHeader,\n} from \"../Common/FormComponents/common/styleLibrary\";\nimport { Grid } from \"@mui/material\";\nimport PageHeader from \"../Common/PageHeader/PageHeader\";\n\nimport TestWrapper from \"../Common/TestWrapper/TestWrapper\";\nimport PageLayout from \"../Common/Layout/PageLayout\";\nimport HelpBox from \"../../../common/HelpBox\";\nimport WarnIcon from \"../../../icons/WarnIcon\";\nimport Loader from \"../Common/Loader/Loader\";\nimport { setServerDiagStat } from \"../../../systemSlice\";\nimport {\n  healthInfoMessageReceived,\n  healthInfoResetMessage,\n} from \"./healthInfoSlice\";\nimport RegisterCluster from \"../Support/RegisterCluster\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    loading: {\n      paddingTop: 8,\n      paddingLeft: 40,\n    },\n    buttons: {\n      justifyContent: \"flex-start\",\n      gap: 20,\n    },\n    localMessage: {\n      fontSize: 24,\n      color: \"#07193E\",\n      fontWeight: \"bold\",\n      textAlign: \"center\",\n      marginBottom: 10,\n    },\n    progressResult: {\n      textAlign: \"center\",\n      marginBottom: 25,\n    },\n    startDiagnostic: {\n      display: \"flex\",\n      justifyContent: \"flex-end\",\n      margin: 25,\n      marginBottom: 0,\n    },\n    startDiagnosticCenter: {\n      textAlign: \"center\",\n      marginTop: 0,\n    },\n    ...actionsTray,\n    ...containerForHeader(theme.spacing(4)),\n  });\n\ninterface IHealthInfo {\n  classes: any;\n  namespace: string;\n  tenant: string;\n}\n\nconst HealthInfo = ({ classes }: IHealthInfo) => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const message = useSelector((state: AppState) => state.healthInfo.message);\n\n  const licenseInfo = useSelector(\n    (state: AppState) => state?.system?.licenseInfo\n  );\n\n  const { plan = \"\" } = licenseInfo || {};\n  const registeredCluster = plan === \"STANDARD\" || plan === \"ENTERPRISE\";\n\n  const serverDiagnosticStatus = useSelector(\n    (state: AppState) => state.system.serverDiagnosticStatus\n  );\n  const [startDiagnostic, setStartDiagnostic] = useState(false);\n  const [downloadDisabled, setDownloadDisabled] = useState(true);\n  const [localMessage, setMessage] = useState<string>(\"\");\n  const [buttonStartText, setButtonStartText] =\n    useState<string>(\"Start Diagnostic\");\n  const [title, setTitle] = useState<string>(\"New Diagnostic\");\n  const [diagFileContent, setDiagFileContent] = useState<string>(\"\");\n\n  const isDiagnosticComplete =\n    serverDiagnosticStatus === DiagStatSuccess ||\n    serverDiagnosticStatus === DiagStatError;\n\n  const download = () => {\n    let element = document.createElement(\"a\");\n    element.setAttribute(\n      \"href\",\n      `data:application/gzip;base64,${diagFileContent}`\n    );\n    element.setAttribute(\"download\", \"diagnostic.json.gz\");\n\n    element.style.display = \"none\";\n    document.body.appendChild(element);\n\n    element.click();\n\n    document.body.removeChild(element);\n  };\n\n  useEffect(() => {\n    if (serverDiagnosticStatus === DiagStatInProgress) {\n      setTitle(\"Diagnostic in progress...\");\n      setMessage(\n        \"Diagnostic started. Please do not refresh page during diagnosis.\"\n      );\n      return;\n    }\n\n    if (serverDiagnosticStatus === DiagStatSuccess) {\n      setTitle(\"Diagnostic complete\");\n      setMessage(\"Diagnostic file is ready to be downloaded.\");\n      setButtonStartText(\"Start New Diagnostic\");\n      return;\n    }\n\n    if (serverDiagnosticStatus === DiagStatError) {\n      setTitle(\"Error\");\n      setMessage(\"An error occurred while getting the Diagnostic file.\");\n      setButtonStartText(\"Retry Diagnostic\");\n      return;\n    }\n  }, [serverDiagnosticStatus, startDiagnostic]);\n\n  useEffect(() => {\n    if (\n      serverDiagnosticStatus === DiagStatSuccess &&\n      message !== ({} as HealthInfoMessage)\n    ) {\n      // Allow download of diagnostics file only when\n      // it succeded fetching all the results and info is not empty.\n      setDownloadDisabled(false);\n    }\n    if (serverDiagnosticStatus === DiagStatInProgress) {\n      // Disable Start Diagnotic and Disable Download buttons\n      // if a Diagnosis is in progress.\n      setDownloadDisabled(true);\n    }\n    setStartDiagnostic(false);\n  }, [serverDiagnosticStatus, message]);\n\n  useEffect(() => {\n    if (startDiagnostic) {\n      dispatch(healthInfoResetMessage());\n      setDiagFileContent(\"\");\n      const url = new URL(window.location.toString());\n      const isDev = process.env.NODE_ENV === \"development\";\n      const port = isDev ? \"9090\" : url.port;\n\n      const wsProt = wsProtocol(url.protocol);\n\n      // check if we are using base path, if not this always is `/`\n      const baseLocation = new URL(document.baseURI);\n      const baseUrl = baseLocation.pathname;\n\n      const c = new W3CWebSocket(\n        `${wsProt}://${url.hostname}:${port}${baseUrl}ws/health-info?deadline=1h`\n      );\n\n      let interval: any | null = null;\n      if (c !== null) {\n        c.onopen = () => {\n          console.log(\"WebSocket Client Connected\");\n          c.send(\"ok\");\n          interval = setInterval(() => {\n            c.send(\"ok\");\n          }, 10 * 1000);\n          setMessage(\n            \"Diagnostic started. Please do not refresh page during diagnosis.\"\n          );\n          dispatch(setServerDiagStat(DiagStatInProgress));\n        };\n        c.onmessage = (message: IMessageEvent) => {\n          let m: ReportMessage = JSON.parse(message.data.toString());\n          if (m.serverHealthInfo) {\n            m.serverHealthInfo.timestamp = new Date(\n              m.serverHealthInfo.timestamp.toString()\n            );\n            dispatch(healthInfoMessageReceived(m.serverHealthInfo));\n          }\n          if (m.encoded !== \"\") {\n            setDiagFileContent(m.encoded);\n          }\n        };\n        c.onerror = (error: Error) => {\n          console.log(\"error closing websocket:\", error.message);\n          c.close(1000);\n          clearInterval(interval);\n          dispatch(setServerDiagStat(DiagStatError));\n        };\n        c.onclose = (event: ICloseEvent) => {\n          clearInterval(interval);\n          if (\n            event.code === WSCloseInternalServerErr ||\n            event.code === WSClosePolicyViolation ||\n            event.code === WSCloseAbnormalClosure\n          ) {\n            // handle close with error\n            console.log(\"connection closed by server with code:\", event.code);\n            setMessage(\"An error occurred while getting the Diagnostic file.\");\n            dispatch(setServerDiagStat(DiagStatError));\n          } else {\n            console.log(\"connection closed by server\");\n\n            setMessage(\"Diagnostic file is ready to be downloaded.\");\n            dispatch(setServerDiagStat(DiagStatSuccess));\n          }\n        };\n      }\n    } else {\n      // reset start status\n      setStartDiagnostic(false);\n    }\n  }, [startDiagnostic, dispatch]);\n\n  const startDiagnosticAction = () => {\n    if (plan !== \"STANDARD\" && plan !== \"ENTERPRISE\") {\n      navigate(\"/support/register\");\n      return;\n    }\n    setStartDiagnostic(true);\n  };\n\n  return (\n    <Fragment>\n      <PageHeader label=\"Health\" />\n      <PageLayout>\n        {!registeredCluster && <RegisterCluster compactMode />}\n        <Grid item xs={12} className={classes.boxy}>\n          <TestWrapper title={title} advancedVisible={false}>\n            <Grid container className={classes.buttons}>\n              <Grid\n                key=\"start-download\"\n                item\n                xs={12}\n                className={classes.progressResult}\n              >\n                <div className={classes.localMessage}>{localMessage}</div>\n                {serverDiagnosticStatus === DiagStatInProgress ? (\n                  <div className={classes.loading}>\n                    <Loader style={{ width: 25, height: 25 }} />\n                  </div>\n                ) : (\n                  <Fragment>\n                    {serverDiagnosticStatus !== DiagStatError &&\n                      !downloadDisabled && (\n                        <Button\n                          id={\"download\"}\n                          type=\"submit\"\n                          variant=\"callAction\"\n                          onClick={() => download()}\n                          disabled={downloadDisabled}\n                          label={\"Download\"}\n                        />\n                      )}\n                    <Grid\n                      item\n                      xs={12}\n                      className={clsx(classes.startDiagnostic, {\n                        [classes.startDiagnosticCenter]: !isDiagnosticComplete,\n                      })}\n                    >\n                      <Button\n                        id=\"start-new-diagnostic\"\n                        type=\"submit\"\n                        variant={!registeredCluster ? \"regular\" : \"callAction\"}\n                        disabled={startDiagnostic}\n                        onClick={startDiagnosticAction}\n                        label={buttonStartText}\n                      />\n                    </Grid>\n                  </Fragment>\n                )}\n              </Grid>\n            </Grid>\n          </TestWrapper>\n        </Grid>\n        {!startDiagnostic && registeredCluster && (\n          <Fragment>\n            <br />\n            <HelpBox\n              title={\n                \"During the health diagnostics run, all production traffic will be suspended.\"\n              }\n              iconComponent={<WarnIcon />}\n              help={<Fragment />}\n            />\n          </Fragment>\n        )}\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(HealthInfo);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\nimport Grid from \"@mui/material/Grid\";\nimport { Box, Button } from \"@mui/material\";\nimport { useNavigate } from \"react-router-dom\";\nimport WarnIcon from \"../../../icons/WarnIcon\";\nimport HelpBox from \"../../../common/HelpBox\";\n\ninterface IRegisterCluster {\n  compactMode?: boolean;\n}\n\nconst RegisterCluster = ({ compactMode = false }: IRegisterCluster) => {\n  const navigate = useNavigate();\n\n  const redirectButton = (\n    <Button\n      type=\"submit\"\n      variant=\"contained\"\n      color=\"primary\"\n      onClick={() => navigate(\"/support/register\")}\n    >\n      Register your Cluster\n    </Button>\n  );\n\n  const registerMessage =\n    \"Use your MinIO Subscription Network login credentials to register this cluster.\";\n\n  if (compactMode) {\n    return (\n      <Fragment>\n        <HelpBox\n          title={\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n                flexGrow: 1,\n              }}\n            >\n              <span>{registerMessage}</span> {redirectButton}\n            </div>\n          }\n          iconComponent={<WarnIcon />}\n          help={<Fragment />}\n        />\n        <br />\n      </Fragment>\n    );\n  }\n\n  return (\n    <Box\n      sx={{\n        padding: \"25px\",\n        border: \"1px solid #eaeaea\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        flexFlow: {\n          sm: \"row\",\n          xs: \"column\",\n        },\n        marginBottom: \"15px\",\n      }}\n    >\n      <Grid container>\n        <Grid item xs={12}>\n          <Box\n            sx={{\n              marginRight: \"8px\",\n              fontSize: \"16px\",\n              fontWeight: 600,\n              display: \"flex\",\n              alignItems: \"center\",\n\n              \"& .min-icon\": {\n                width: \"83px\",\n                height: \"14px\",\n                marginLeft: \"5px\",\n                marginRight: \"5px\",\n              },\n            }}\n          >\n            Register your cluster\n          </Box>\n        </Grid>\n        <Grid item xs={12}>\n          <Box\n            sx={{\n              display: \"flex\",\n              flexFlow: {\n                xs: \"column\",\n                md: \"row\",\n              },\n            }}\n          >\n            <Box\n              sx={{\n                display: \"flex\",\n                flexFlow: \"column\",\n                flex: \"2\",\n              }}\n            >\n              <Box\n                sx={{\n                  fontSize: \"16px\",\n                  display: \"flex\",\n                  flexFlow: \"column\",\n                  marginTop: \"15px\",\n                  marginBottom: \"15px\",\n                }}\n              >\n                {registerMessage}\n              </Box>\n              <Box\n                sx={{\n                  flex: \"1\",\n                }}\n              >\n                <Box\n                  sx={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    justifyContent: \"flex-end\",\n                  }}\n                >\n                  {redirectButton}\n                </Box>\n              </Box>\n            </Box>\n          </Box>\n        </Grid>\n      </Grid>\n    </Box>\n  );\n};\n\nexport default RegisterCluster;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\n// Close codes for websockets defined in RFC 6455\nexport const WSCloseNormalClosure = 1000;\nexport const WSCloseCloseGoingAway = 1001;\nexport const WSCloseAbnormalClosure = 1006;\nexport const WSClosePolicyViolation = 1008;\nexport const WSCloseInternalServerErr = 1011;\n\nexport const wsProtocol = (protocol: string): string => {\n  let wsProtocol = \"ws\";\n  if (protocol === \"https:\") {\n    wsProtocol = \"wss\";\n  }\n  return wsProtocol;\n};\n"],"names":["withStyles","theme","createStyles","root","border","borderRadius","backgroundColor","paddingLeft","paddingTop","paddingBottom","paddingRight","leftItems","fontSize","fontWeight","marginBottom","display","alignItems","marginRight","height","width","helpText","classes","iconComponent","title","help","className","container","item","xs","DiagStatError","DiagStatSuccess","DiagStatInProgress","titleBar","borderBottom","padding","color","divisorContainer","serversData","minioVersionContainer","justifyContent","alignSelf","versionIcon","loaderAlign","textAlign","advancedContainer","optionsContainer","advancedConfiguration","textDecoration","cursor","marginLeft","advancedOpen","transform","advancedClosed","advancedContent","maxHeight","transitionDuration","overflow","children","advancedVisible","useState","version","setVersion","totalNodes","setTotalNodes","totalDrives","setTotalDrives","loading","setLoading","setAdvancedOpen","useEffect","api","then","res","totalServers","servers","length","reduce","prevTotal","currentElement","drives","catch","err","Grid","Fragment","Loader","style","md","onClick","ArrowForwardIos","buttons","gap","localMessage","progressResult","startDiagnostic","margin","startDiagnosticCenter","marginTop","actionsTray","containerForHeader","spacing","dispatch","useAppDispatch","navigate","useNavigate","message","useSelector","state","healthInfo","system","licenseInfo","plan","registeredCluster","serverDiagnosticStatus","setStartDiagnostic","downloadDisabled","setDownloadDisabled","setMessage","buttonStartText","setButtonStartText","setTitle","diagFileContent","setDiagFileContent","isDiagnosticComplete","healthInfoResetMessage","url","URL","window","location","toString","port","wsProt","wsProtocol","protocol","baseUrl","document","baseURI","pathname","c","W3CWebSocket","hostname","interval","onopen","console","log","send","setInterval","setServerDiagStat","onmessage","m","JSON","parse","data","serverHealthInfo","timestamp","Date","healthInfoMessageReceived","encoded","onerror","error","close","clearInterval","onclose","event","code","WSCloseInternalServerErr","WSClosePolicyViolation","WSCloseAbnormalClosure","PageHeader","label","PageLayout","RegisterCluster","compactMode","boxy","id","type","variant","element","createElement","setAttribute","body","appendChild","click","removeChild","download","disabled","clsx","HelpBox","WarnIcon","redirectButton","registerMessage","flexGrow","sx","flexFlow","sm","flex"],"sourceRoot":""}