"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[5882],{85882:function(e,n,t){t.r(n),t.d(n,{default:function(){return Pn}});var i,o=t(1413),a=t(72791),r=t(78687),s=t(57689),c=t(11135),l=t(25787),d=t(61889),u=t(25469),f=t(23814),m=t(29439),h=t(57831),p=t(75952),x=t(99779),b=t(26181),v=t.n(b),j=t(81207),g=t(45248),_=t(84697),Z=t(93433),S=t(78029),T=t.n(S),w=t(11087),C=t(13400),E=t(38442),N=t(56087),y=t(75578),I=t(87995),F=t(54756),k=t(27454),O=t(80184),L=(0,y.Z)(a.lazy((function(){return t.e(2185).then(t.bind(t,62185))}))),B=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)({},f.cx),{},{slashSpacingStyle:{margin:"0 5px"}}))}))((function(e){var n=e.classes,t=e.bucketName,i=e.internalPaths,o=e.hidePathButton,c=e.additionalOptions,l=(0,u.TL)(),f=(0,s.s0)(),h=(0,r.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),x=(0,r.v9)((function(e){return e.objectBrowser.versionsMode})),b=(0,r.v9)((function(e){return e.objectBrowser.versionedFile})),v=(0,a.useState)(!1),j=(0,m.Z)(v,2),_=j[0],S=j[1],y=(0,E.F)(t,[N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS]),B=i;""!==i&&(B="/".concat(i));var P=B.split("/").filter((function(e){return""!==e})),D=P.length-1,A=P.map((function(e,i){var o="".concat(P.slice(0,i+1).join("/"),"/"),r="/browser/".concat(t,"/").concat(o?"".concat((0,g.LL)(o)):"");return i===D&&e===b?null:(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)("span",{className:n.slashSpacingStyle,children:"/"}),i===D?(0,O.jsx)("span",{style:{cursor:"default"},children:e}):(0,O.jsx)(w.rU,{to:r,onClick:function(){l((0,F.db)({status:!1,objectName:""}))},children:e})]},"breadcrumbs-".concat(i.toString()))})),R=[];x&&(R=[(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)("span",{children:[(0,O.jsx)("span",{className:n.slashSpacingStyle,children:"/"}),b," - Versions"]})},"breadcrumbs-versionedItem")]);var U=[(0,O.jsx)(a.Fragment,{children:(0,O.jsx)(w.rU,{to:"/browser/".concat(t),onClick:function(){l((0,F.db)({status:!1,objectName:""}))},children:t})},"breadcrumbs-root-path")].concat((0,Z.Z)(A),(0,Z.Z)(R));return(0,O.jsxs)(a.Fragment,{children:[(0,O.jsxs)("div",{className:n.breadcrumbsMain,children:[_&&(0,O.jsx)(L,{modalOpen:_,bucketName:t,folderName:i,onClose:function(){S(!1)}}),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:"".concat(n.breadcrumbs),children:[(0,O.jsx)(C.Z,{onClick:function(){x?l((0,F.db)({status:!1,objectName:""})):f(-1)},sx:{border:"#EAEDEE 1px solid",backgroundColor:"#fff",borderLeft:0,borderRadius:0,width:38,height:38,marginRight:"10px"},children:(0,O.jsx)(p.ubh,{})}),(0,O.jsx)("div",{className:n.breadcrumbsList,dir:"rtl",children:U}),(0,O.jsx)(T(),{text:"".concat(t,"/").concat(P.join("/")),children:(0,O.jsx)(p.zxk,{id:"copy-path",icon:(0,O.jsx)(p.TIy,{style:{width:"12px",height:"12px",fill:"#969FA8",marginTop:-1}}),variant:"regular",onClick:function(){l((0,I.y1)("Path copied to clipboard"))},style:{width:"28px",height:"28px",color:"#969FA8",border:"#969FA8 1px solid",marginRight:5}})}),(0,O.jsx)("div",{className:n.additionalOptions,children:c})]}),!o&&(0,O.jsx)(k.Z,{tooltip:y?"Choose or create a new path":(0,N.MK)([N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS],"create a new path"),children:(0,O.jsx)(p.zxk,{id:"new-path",onClick:function(){S(!0)},disabled:h||!y,icon:(0,O.jsx)(p.N$q,{style:{fill:"#969FA8"}}),style:{whiteSpace:"nowrap"},variant:"regular",label:"Create new path"})})]}),(0,O.jsx)("div",{className:n.breadcrumbsSecond,children:c})]})})),P=t(47922),D=t(14917),A=t(74794),R=t(71715),U=t(23786),M=t(49900),z=t(57064),G=(0,l.Z)((function(e){return(0,c.Z)({listUploadIcons:{height:20,"& .min-icon":{width:18,fill:"rgba(0,0,0,0.87)"}}})}))((function(e){var n=e.uploadPath,t=e.bucketName,i=e.forceDisable,o=void 0!==i&&i,r=e.uploadFileFunction,s=e.uploadFolderFunction,c=e.classes,l=a.useState(null),d=(0,m.Z)(l,2),u=d[0],f=d[1],h=Boolean(u),x=function(){f(null)},b=(0,E.F)(n,[N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS]),v=(0,E.F)(t,[N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS],!1,!0),j=b||v;return(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)(k.Z,{tooltip:j?"Upload Files":(0,N.MK)([N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS],"upload files to this bucket"),children:(0,O.jsx)(p.zxk,{id:"upload-main","aria-controls":"upload-main-menu","aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:function(e){f(e.currentTarget)},label:"Upload",icon:(0,O.jsx)(p.rG2,{}),variant:"callAction",disabled:o||!j})}),(0,O.jsxs)(R.Z,{id:"upload-main-menu","aria-labelledby":"upload-main",anchorEl:u,open:h,onClose:function(){x()},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[(0,O.jsxs)(U.Z,{onClick:function(){r(x)},disabled:!b||o,children:[(0,O.jsx)(z.Z,{className:c.listUploadIcons,children:(0,O.jsx)(p.rG2,{})}),(0,O.jsx)(M.Z,{children:"Upload File"})]}),(0,O.jsxs)(U.Z,{onClick:function(){s(x)},disabled:!v||o,children:[(0,O.jsx)(z.Z,{className:c.listUploadIcons,children:(0,O.jsx)(p.oXh,{})}),(0,O.jsx)(M.Z,{children:"Upload Folder"})]})]})]})})),K=t(72455),J=(0,K.Z)((function(e){return(0,c.Z)({detailsList:{borderColor:"#EAEDEE",borderWidth:0,borderStyle:"solid",borderRadius:3,borderBottomLeftRadius:0,borderBottomRightRadius:0,width:0,transitionDuration:"0.3s",overflowX:"hidden",overflowY:"auto",position:"relative",opacity:0,marginLeft:-1,"&.open":{width:300,minWidth:300,borderLeftWidth:1,opacity:1},"@media (max-width: 799px)":{"&.open":{width:"100%",minWidth:"100%",borderLeftWidth:0}}},closePanel:{position:"absolute",right:0,top:8,"& .min-icon":{width:14}}})})),W=function(e){var n=e.open,t=e.closePanel,i=e.className,o=void 0===i?"":i,a=e.children,r=J();return(0,O.jsxs)(d.ZP,{item:!0,className:"".concat(r.detailsList," ").concat(n?"open":""," ").concat(o," detailsListPanel"),children:[(0,O.jsx)(C.Z,{onClick:t,className:r.closePanel,children:(0,O.jsx)(p.oto,{})}),a]})},H=t(64554),V=t(34433),Y=[{value:"01",label:"January"},{value:"02",label:"February"},{value:"03",label:"March"},{value:"04",label:"April"},{value:"05",label:"May"},{value:"06",label:"June"},{value:"07",label:"July"},{value:"08",label:"August"},{value:"09",label:"September"},{value:"10",label:"October"},{value:"11",label:"November"},{value:"12",label:"December"}],q=Array.from(Array(31),(function(e,n){return n+1})),$=(new Date).getFullYear(),Q=Array.from(Array(25),(function(e,n){return n+$})),X=t(56028),ee=t(37516),ne=t(83679),te=t(4942),ie=t(28182),oe=t(30829),ae=t(20068),re=t(68096),se=t(58406),ce=t(4834),le=(0,l.Z)((function(e){return(0,c.Z)({root:{"& .MuiSelect-icon":{color:"#000","&.Mui-disabled":{color:"#9c9c9c"}}},input:{borderBottom:0,fontSize:12}})}))(ce.ZP),de=(0,a.forwardRef)((function(e,n){var t=e.classes,i=e.id,o=e.label,r=e.disableOptions,s=void 0!==r&&r,c=e.addSwitch,l=void 0!==c&&c,u=e.tooltip,f=void 0===u?"":u,h=e.borderBottom,x=void 0!==h&&h,b=e.onDateChange,v=e.value,j=void 0===v?"":v;(0,a.useImperativeHandle)(n,(function(){return{resetDate:D}}));var g=(0,a.useState)(!1),_=(0,m.Z)(g,2),Z=_[0],S=_[1],T=(0,a.useState)(""),w=(0,m.Z)(T,2),C=w[0],E=w[1],N=(0,a.useState)(""),y=(0,m.Z)(N,2),I=y[0],F=y[1],k=(0,a.useState)(""),L=(0,m.Z)(k,2),B=L[0],P=L[1];(0,a.useEffect)((function(){if(""!==j){var e=j.split("-");P(e[0]),E(e[1]),F("".concat(parseInt(e[2])))}}),[j]),(0,a.useEffect)((function(){var e=function(e,n,t){var i=Date.parse("".concat(e,"-").concat(n,"-").concat(t));if(isNaN(i))return[!1,""];var o=parseInt(n),a=parseInt(t),r=o<10?"0".concat(o):o,s=a<10?"0".concat(a):a,c=new Date(i).toISOString().split("T")[0],l="".concat(e,"-").concat(r,"-").concat(s);return[c===l,l]}(B,C,I),n=(0,m.Z)(e,2),t=n[0],i=n[1];b(i,t)}),[C,I,B,b]);var D=function(){E(""),F(""),P("")},A=function(){return s||!!l&&!Z};return(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:(0,ie.Z)(t.fieldContainer,(0,te.Z)({},t.fieldContainerBorder,x)),children:[(0,O.jsx)("div",{className:t.labelContainer,children:(0,O.jsxs)(d.ZP,{container:!0,children:[(0,O.jsxs)(oe.Z,{htmlFor:i,className:t.inputLabel,children:[(0,O.jsx)("span",{children:o}),""!==f&&(0,O.jsx)("div",{className:t.tooltipContainer,children:(0,O.jsx)(ae.Z,{title:f,placement:"top-start",children:(0,O.jsx)("div",{className:t.tooltip,children:(0,O.jsx)(p.byK,{})})})})]}),l&&(0,O.jsx)(ee.Z,{indicatorLabels:["Specific Date","Default (7 Days)"],checked:Z,value:"date_enabled",id:"date-status",name:"date-status",onChange:function(e){S(e.target.checked),e.target.checked||b("",!0)},switchOnly:!0})]})}),(0,O.jsxs)("div",{children:[(0,O.jsx)(re.Z,{disabled:A(),className:t.dateInput,children:(0,O.jsxs)(se.Z,{id:"".concat(i,"-month"),name:"".concat(i,"-month"),value:C,displayEmpty:!0,onChange:function(e){E(e.target.value)},input:(0,O.jsx)(le,{}),children:[(0,O.jsx)(U.Z,{value:"",disabled:!0,children:"<Month>"}),Y.map((function(e){return(0,O.jsx)(U.Z,{value:e.value,children:e.label},"select-".concat(i,"-monthOP-").concat(e.label))}))]})}),(0,O.jsx)(re.Z,{disabled:A(),className:t.dateInput,children:(0,O.jsxs)(se.Z,{id:"".concat(i,"-day"),name:"".concat(i,"-day"),value:I,displayEmpty:!0,onChange:function(e){F(e.target.value)},input:(0,O.jsx)(le,{}),children:[(0,O.jsx)(U.Z,{value:"",disabled:!0,children:"<Day>"}),q.map((function(e){return(0,O.jsx)(U.Z,{value:e,children:e},"select-".concat(i,"-dayOP-").concat(e))}))]})}),(0,O.jsx)(re.Z,{disabled:A(),className:t.dateInput,children:(0,O.jsxs)(se.Z,{id:"".concat(i,"-year"),name:"".concat(i,"-year"),value:B,displayEmpty:!0,onChange:function(e){P(e.target.value)},input:(0,O.jsx)(le,{}),children:[(0,O.jsx)(U.Z,{value:"",disabled:!0,children:"<Year>"}),Q.map((function(e){return(0,O.jsx)(U.Z,{value:e,children:e},"select-".concat(i,"-yearOP-").concat(e))}))]})})]})]})})),ue=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({dateInput:{"&:not(:last-child)":{marginRight:22}}},f.YI),f.Hr),{},{labelContainer:{flex:1},fieldContainer:(0,o.Z)((0,o.Z)({},f.YI.fieldContainer),{},{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:10,marginTop:11,marginBottom:6}),fieldContainerBorder:{borderBottom:"#9c9c9c 1px solid",marginBottom:20}}))}))(de),fe=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},f.DF),f.ID),f.bK),{},{dateSelector:{"& div":{borderBottom:0,marginBottom:0,"& div:nth-child(2)":{border:"1px solid #EAEAEA",paddingLeft:5,"& div":{border:0}}}}}))}))((function(e){var n=e.classes,t=e.open,i=e.closeModalAndRefresh,o=e.objectName,r=e.objectInfo,s=e.bucketName,c=(0,u.TL)(),l=(0,a.useState)(!0),f=(0,m.Z)(l,2),h=f[0],x=f[1],b=(0,a.useState)(""),v=(0,m.Z)(b,2),_=v[0],Z=v[1],S=(0,a.useState)(""),T=(0,m.Z)(S,2),w=T[0],C=T[1],E=(0,a.useState)(!1),N=(0,m.Z)(E,2),y=N[0],F=N[1],k=(0,a.useState)(!1),L=(0,m.Z)(k,2),B=L[0],P=L[1],D=(0,a.useState)(!1),A=(0,m.Z)(D,2),R=A[0],U=A[1];(0,a.useEffect)((function(){if(r.retention_mode&&(Z(r.retention_mode.toLowerCase()),U(!0)),r.retention_until_date){var e=new Date(r.retention_until_date);if("Invalid Date"!==e.toString()){var n=e.getFullYear(),t=(o=e.getMonth()+1)<10?"0".concat(o):"".concat(o),i=e.getDate();isNaN(i)||"NaN"===t||isNaN(n)||C("".concat(n,"-").concat(t,"-").concat(i))}U(!0)}var o}),[r]);var M=(0,a.useRef)(null),z=function(){x(!1),Z(""),M.current&&M.current.resetDate()},G=R&&("governance"===_||""===_);return(0,O.jsxs)(X.Z,{title:"Set Retention Policy",modalOpen:t,onClose:function(){z(),i(!1)},children:[(0,O.jsxs)("div",{className:n.spacerBottom,children:[(0,O.jsx)("strong",{children:"Selected Object"}),": ",o]}),(0,O.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault()}(e)},children:[G&&(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,O.jsx)(ee.Z,{value:"status",id:"status",name:"status",checked:h,onChange:function(e){x(!h)},label:"Status",indicatorLabels:["Enabled","Disabled"]})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,O.jsx)(ne.Z,{currentSelection:_,id:"type",name:"type",label:"Type",disableOptions:!h||R&&""!==_,onChange:function(e){Z(e.target.value)},selectorOptions:[{label:"Governance",value:"governance"},{label:"Compliance",value:"compliance"}]})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:"".concat(n.dateSelector," "),children:(0,O.jsx)(ue,{id:"date",label:"Date",disableOptions:!(h&&("governance"===_||"compliance"===_)),ref:M,value:w,borderBottom:!0,onDateChange:function(e,n){F(n),n&&C(e)}})}),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,O.jsx)(p.zxk,{id:"reset",type:"button",variant:"regular",onClick:z,label:"Reset"}),(0,O.jsx)(p.zxk,{id:"save",type:"submit",variant:"callAction",disabled:h&&""===_||h&&!y||B,onClick:function(){P(!0);var e=r.name,n=r.version_id,t=h||"governance"!==_?"".concat(w,"T23:59:59Z"):"";h||"governance"!==_?function(e,n,t){j.Z.invoke("PUT","/api/v1/buckets/".concat(s,"/objects/retention?prefix=").concat((0,g.LL)(e),"&version_id=").concat(n),{expires:t,mode:_}).then((function(e){P(!1),i(!0)})).catch((function(e){c((0,I.zb)(e)),P(!1)}))}(e,n,t):function(e,n){j.Z.invoke("DELETE","/api/v1/buckets/".concat(s,"/objects/retention?prefix=").concat((0,g.LL)(e),"&version_id=").concat(n)).then((function(){P(!1),i(!0)})).catch((function(e){c((0,I.zb)(e)),P(!1)}))}(e,n)},label:"Save"})]})]})]})})),me=t(51691),he=t(23508),pe=t(9505),xe=function(e){var n=e.closeDeleteModalAndRefresh,t=e.deleteOpen,i=e.selectedBucket,o=e.selectedObject,s=e.versioning,c=e.selectedVersion,l=void 0===c?"":c,d=(0,u.TL)(),f=(0,pe.Z)((function(){return n(!0)}),(function(e){return d((0,I.Ih)(e))})),h=(0,m.Z)(f,2),x=h[0],b=h[1],v=(0,a.useState)(!1),j=(0,m.Z)(v,2),_=j[0],Z=j[1],S=(0,a.useState)(!1),T=(0,m.Z)(S,2),w=T[0],C=T[1],y=(0,r.v9)((function(e){return e.objectBrowser.retentionConfig})),F=(0,E.F)([i],[N.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===y||void 0===y?void 0:y.mode);if(!o)return null;return(0,O.jsx)(he.Z,{title:"Delete Object",confirmText:"Delete",isOpen:t,titleIcon:(0,O.jsx)(p.NvT,{}),isLoading:x,onConfirm:function(){var e=(0,g.IO)(o).endsWith("/");b("DELETE","/api/v1/buckets/".concat(i,"/objects?path=").concat(o).concat(""!==l?"&version_id=".concat(l):"&recursive=".concat(e,"&all_versions=").concat(_)).concat(w?"&bypass=true":""))},onClose:function(){return n(!1)},confirmationContent:(0,O.jsxs)(me.Z,{sx:{width:"430px"},children:["Are you sure you want to delete: ",(0,O.jsx)("br",{}),(0,O.jsx)("b",{children:(0,g.IO)(o)})," ",""!==l?(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)("br",{}),(0,O.jsx)("br",{}),"Version ID:",(0,O.jsx)("br",{}),(0,O.jsx)("strong",{children:l})]}):"","? ",(0,O.jsx)("br",{}),(0,O.jsx)("br",{}),s&&""===l&&(0,O.jsx)(a.Fragment,{children:(0,O.jsx)(ee.Z,{label:"Delete All Versions",indicatorLabels:["Yes","No"],checked:_,value:"delete_versions",id:"delete-versions",name:"delete-versions",onChange:function(e){Z(!_)},description:""})}),F&&(_||""!==l)&&(0,O.jsx)(a.Fragment,{children:(0,O.jsx)("div",{style:{marginTop:10},children:(0,O.jsx)(ee.Z,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:w,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:function(e){C(!w)},description:""})})}),_&&(0,O.jsxs)(a.Fragment,{children:[(0,O.jsxs)("div",{style:{marginTop:10,border:"#c83b51 1px solid",borderRadius:3,padding:5,backgroundColor:"#c83b5120",color:"#c83b51"},children:["This will remove the object as well as all of its versions,"," ",(0,O.jsx)("br",{}),"This action is irreversible."]}),(0,O.jsx)("br",{}),"Are you sure you want to continue?"]})]})})},be=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},f.DF),f.ID),f.bK))}))((function(e){var n=e.classes,t=e.open,i=e.closeModalAndRefresh,o=e.objectName,r=e.bucketName,s=e.actualInfo,c=(0,u.TL)(),l=(0,a.useState)(!1),f=(0,m.Z)(l,2),h=f[0],x=f[1],b=(0,a.useState)(!1),_=(0,m.Z)(b,2),Z=_[0],S=_[1],T=s.version_id;(0,a.useEffect)((function(){var e=v()(s,"legal_hold_status","OFF");x("ON"===e)}),[s]);var w=function(){x(!1)};return(0,O.jsxs)(X.Z,{title:"Set Legal Hold",modalOpen:t,onClose:function(){w(),i(!1)},children:[(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.spacerBottom,children:["Object: ",r]}),(0,O.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault(),S(!0),j.Z.invoke("PUT","/api/v1/buckets/".concat(r,"/objects/legalhold?prefix=").concat((0,g.LL)(o),"&version_id=").concat(T),{status:h?"enabled":"disabled"}).then((function(){S(!1),i(!0)})).catch((function(e){c((0,I.zb)(e)),S(!1)}))}(e)},children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,O.jsx)(ee.Z,{value:"legalhold",id:"legalhold",name:"legalhold",checked:h,onChange:function(e){x(!h)},label:"Legal Hold Status",indicatorLabels:["Enabled","Disabled"],tooltip:"To enable this feature you need to enable versioning on the bucket before creation"})}),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,O.jsx)(p.zxk,{id:"clear",type:"button",variant:"regular",onClick:w,label:"Clear"}),(0,O.jsx)(p.zxk,{id:"save",type:"submit",variant:"callAction",disabled:Z,label:" Save"})]})]})]})})),ve=t(78562),je=t(79836),ge=t(53382),_e=t(35855),Ze=t(53994),Se=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)({propertiesIcon:{marginLeft:5,"& .min-icon":{height:12}},capitalizeFirst:{textTransform:"capitalize","& .min-icon":{width:16,height:16}},titleItem:{width:"35%"}},f.bK),f.$b))}))((function(e){var n=e.metaData,t=e.classes,i=e.linear,o=void 0!==i&&i,r=Object.keys(n);return o?(0,O.jsx)(a.Fragment,{children:r.map((function(e,i){var o=Array.isArray(n[e])?n[e].map(decodeURIComponent).join(", "):decodeURIComponent(n[e]);return(0,O.jsxs)(H.Z,{className:t.metadataLinear,children:[(0,O.jsx)("strong",{children:e}),(0,O.jsx)("br",{}),o]},"box-meta-".concat(e,"-").concat(i.toString()))}))}):(0,O.jsxs)(d.ZP,{container:!0,children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,sx:{marginTop:"25px",marginBottom:"5px"},children:(0,O.jsx)("h3",{style:{marginTop:"0",marginBottom:"0"},children:"Object Metadata"})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,children:(0,O.jsx)(je.Z,{className:t.table,"aria-label":"simple table",children:(0,O.jsx)(ge.Z,{children:r.map((function(e,i){var o=Array.isArray(n[e])?n[e].map(decodeURIComponent).join(", "):decodeURIComponent(n[e]);return(0,O.jsxs)(_e.Z,{children:[(0,O.jsx)(Ze.Z,{component:"th",scope:"row",className:t.titleItem,children:e}),(0,O.jsx)(Ze.Z,{align:"right",children:o})]},"tRow-".concat(i.toString()))}))})})})]})})),Te=t(45987),we=t(36151),Ce=["disabled","onClick","icon","label","classes"],Ee=(0,l.Z)((function(e){return(0,c.Z)({root:{padding:"0 15px",height:22,margin:0,color:"#5E5E5E",fontWeight:"normal",fontSize:14,whiteSpace:"nowrap",width:"100%",justifyContent:"flex-start","&:hover":{backgroundColor:"transparent",color:"#000"},"& .min-icon":{width:11},"&:disabled":{color:"#EBEBEB",borderColor:"#EBEBEB"}}})}))((function(e){var n=e.disabled,t=e.onClick,i=e.icon,a=e.label,r=e.classes,s=(0,Te.Z)(e,Ce);return(0,O.jsx)(we.Z,(0,o.Z)((0,o.Z)({},s),{},{disabled:n,onClick:t,className:(0,ie.Z)(r.root,"noDefaultHeight"),startIcon:i,sx:{height:"initial"},children:(0,O.jsx)("span",{className:"buttonItem",children:a})}))})),Ne=(0,l.Z)((function(){return(0,c.Z)((0,o.Z)({},f.$b))}))((function(e){var n=e.items,t=e.classes,i=e.title;return(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)("div",{className:t.titleLabel,children:i}),(0,O.jsxs)("ul",{className:t.objectActions,children:[(0,O.jsx)("li",{children:"Actions:"}),n.map((function(e,n){return(0,O.jsx)("li",{children:(0,O.jsx)(k.Z,{tooltip:e.tooltip||"",children:(0,O.jsx)(Ee,{label:e.label,icon:e.icon,onClick:e.action,disabled:e.disabled})})},"action-element-".concat(n.toString()))}))]})]})})),ye=t(37762),Ie=(0,l.Z)((function(e){return(0,c.Z)({fileName:{display:"flex",alignItems:"center","& .min-icon":{width:16,height:16,marginRight:4,minWidth:16,minHeight:16}},fileNameText:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})}))((function(e){var n=e.classes,t=e.icon,i=e.strings;return(0,O.jsxs)("div",{className:n.fileName,children:[t,(0,O.jsx)("span",{className:n.fileNameText,children:i[i.length-1]})]})})),Fe=[{icon:(0,O.jsx)(p.n9O,{}),extensions:["mp4","mov","avi","mpeg","mpg"]},{icon:(0,O.jsx)(p.mYf,{}),extensions:["mp3","m4a","aac"]},{icon:(0,O.jsx)(p.UU9,{}),extensions:["pdf"]},{icon:(0,O.jsx)(p.hjP,{}),extensions:["ppt","pptx"]},{icon:(0,O.jsx)(p.hz9,{}),extensions:["xls","xlsx"]},{icon:(0,O.jsx)(p.xDw,{}),extensions:["cer","crt","pem"]},{icon:(0,O.jsx)(p.jG9,{}),extensions:["html","xml","css","py","go","php","cpp","h","java"]},{icon:(0,O.jsx)(p.NqG,{}),extensions:["cfg","yaml"]},{icon:(0,O.jsx)(p.OkY,{}),extensions:["sql"]},{icon:(0,O.jsx)(p.ZAy,{}),extensions:["ttf","otf"]},{icon:(0,O.jsx)(p.p2x,{}),extensions:["doc","docx","txt","rtf"]},{icon:(0,O.jsx)(p.xhr,{}),extensions:["zip","rar","tar","gz"]},{icon:(0,O.jsx)(p.rtI,{}),extensions:["epub","mobi","azw","azw3"]},{icon:(0,O.jsx)(p.q$4,{}),extensions:["jpeg","jpg","gif","tiff","png","heic","dng"]}],ke=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e,i=(0,O.jsx)(p.MoH,{});e.endsWith("/")&&(i=(0,O.jsx)(p.BI,{}),t=e.slice(0,-1));for(var o=e.toLowerCase(),a=0,r=Fe;a<r.length;a++){var s,c=r[a],l=(0,ye.Z)(c.extensions);try{for(l.s();!(s=l.n()).done;){var d=s.value;o.endsWith(".".concat(d))&&(i=c.icon)}}catch(f){l.e(f)}finally{l.f()}}!e.endsWith("/")&&e.indexOf(".")<0&&(i=(0,O.jsx)(p.lrl,{}));var u=t.split("/");return n?i:(0,O.jsx)(Ie,{icon:i,strings:u})},Oe=t(21435),Le=t(81918),Be=t(29823),Pe=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({newTileHeader:{fontSize:18,fontWeight:"bold",color:"#000",margin:"35px 0",paddingBottom:15,display:"flex",alignItems:"center","& > svg":{marginRight:10}},tagsForLabel:{fontSize:16,margin:"20px 0 30px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%"},currentTagsContainer:{fontSize:14,fontWeight:"normal"},noTagsForObject:{color:"#858585"},deleteTag:{color:"#C83B51",marginLeft:5}},f.DF),f.ID),f.bK))}))((function(e){var n=e.modalOpen,t=e.onCloseAndUpdate,i=e.bucketName,s=e.actualInfo,c=e.classes,l=(0,u.TL)(),f=(0,r.v9)(I.N5),h=(0,a.useState)(""),x=(0,m.Z)(h,2),b=x[0],_=x[1],Z=(0,a.useState)(""),S=(0,m.Z)(Z,2),T=S[0],w=S[1],C=(0,a.useState)(!1),y=(0,m.Z)(C,2),F=y[0],k=y[1],L=(0,a.useState)(!1),B=(0,m.Z)(L,2),P=B[0],D=B[1],A=(0,a.useState)(""),R=(0,m.Z)(A,2),U=R[0],M=R[1],z=(0,a.useState)(""),G=(0,m.Z)(z,2),K=G[0],J=G[1],W=(0,g.LL)(s.name),V=s.tags,Y=Object.keys(V||{}),q=s.name.split("/").pop()||"",$=function(e){return(0,O.jsxs)("div",{className:c.tagsForLabel,children:["Tag",e?"s":""," for: ",(0,O.jsx)("strong",{children:q})]})};return(0,O.jsx)(a.Fragment,{children:(0,O.jsx)(X.Z,{modalOpen:n,title:P?(0,O.jsx)("span",{style:{color:"#C83B51"},children:"Delete Tag"}):"Edit Tags",onClose:function(){t(!0)},titleIcon:P?(0,O.jsx)(p.dRf,{style:{fill:"#C83B51"}}):(0,O.jsx)(p.T0F,{}),children:P?(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)(d.ZP,{container:!0,children:[$(!1),"Are you sure you want to delete the tag"," ",(0,O.jsxs)("b",{className:c.deleteTag,children:[U," : ",K]})," ","?",(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:[(0,O.jsx)(p.zxk,{id:"cancel",type:"button",variant:"regular",onClick:function(){M(""),J(""),D(!1)},label:"Cancel"}),(0,O.jsx)(p.zxk,{type:"submit",variant:"secondary",onClick:function(){var e=(0,o.Z)({},V);delete e[U];var n=f?s.version_id:"null";j.Z.invoke("PUT","/api/v1/buckets/".concat(i,"/objects/tags?prefix=").concat(W,"&version_id=").concat(n),{tags:e}).then((function(e){t(!0),k(!1)})).catch((function(e){l((0,I.zb)(e)),k(!1)}))},id:"deleteTag",label:"Delete Tag"})]})]})}):(0,O.jsxs)(d.ZP,{container:!0,children:[(0,O.jsx)(E.s,{scopes:[N.Ft.S3_GET_OBJECT_TAGGING,N.Ft.S3_GET_ACTIONS],resource:i,children:(0,O.jsxs)(H.Z,{sx:{display:"flex",flexFlow:"column",width:"100%"},children:[$(!0),(0,O.jsxs)("div",{className:c.currentTagsContainer,children:["Current Tags:",(0,O.jsx)("br",{}),0===Y.length?(0,O.jsx)("span",{className:c.noTagsForObject,children:"There are no tags for this object"}):(0,O.jsx)(a.Fragment,{}),(0,O.jsx)(H.Z,{sx:{marginTop:"5px",marginBottom:"15px"},children:Y.map((function(e,n){var t=v()(V,"".concat(e),"");return""!==t?(0,O.jsx)(E.s,{scopes:[N.Ft.S3_DELETE_OBJECT_TAGGING],resource:i,errorProps:{deleteIcon:null,onDelete:null},children:(0,O.jsx)(Le.Z,{style:{textTransform:"none",marginRight:"5px",marginBottom:"5px"},size:"small",label:"".concat(e," : ").concat(t),color:"primary",deleteIcon:(0,O.jsx)(Be.Z,{}),onDelete:function(){!function(e,n){M(e),J(n),D(!0)}(e,t)}})},"chip-".concat(n)):null}))})]})]})}),(0,O.jsx)(E.s,{scopes:[N.Ft.S3_PUT_OBJECT_TAGGING,N.Ft.S3_PUT_ACTIONS],resource:i,errorProps:{disabled:!0,onClick:null},children:(0,O.jsxs)(d.ZP,{container:!0,children:[(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:c.newTileHeader,children:[(0,O.jsx)(p.OCT,{})," Add New Tag"]}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,O.jsx)(Oe.Z,{value:b,label:"Tag Key",id:"newTagKey",name:"newTagKey",placeholder:"Enter Tag Key",onChange:function(e){_(e.target.value)}})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,O.jsx)(Oe.Z,{value:T,label:"Tag Label",id:"newTagLabel",name:"newTagLabel",placeholder:"Enter Tag Label",onChange:function(e){w(e.target.value)}})}),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:[(0,O.jsx)(p.zxk,{id:"clear",type:"button",variant:"regular",color:"primary",onClick:function(){w(""),_("")},label:"Clear"}),(0,O.jsx)(p.zxk,{type:"submit",variant:"callAction",disabled:""===T.trim()||""===b.trim()||F,onClick:function(){k(!0);var e={};e[b]=T;var n=(0,o.Z)((0,o.Z)({},V),e),a=f?s.version_id:"null";j.Z.invoke("PUT","/api/v1/buckets/".concat(i,"/objects/tags?prefix=").concat(W,"&version_id=").concat(a),{tags:n}).then((function(e){t(!0),k(!1)})).catch((function(e){l((0,I.zb)(e)),k(!1)}))},id:"saveTag",label:"Save"})]})]})})]})})})})),De=t(74165),Ae=t(15861),Re=t(73669),Ue=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},f.DF),f.ID),f.bK))}))((function(e){var n=e.classes,t=e.closeInspectModalAndRefresh,i=e.inspectOpen,o=e.inspectPath,r=e.volumeName,s=(0,u.TL)(),c=function(){return t(!1)},l=(0,a.useState)(!0),f=(0,m.Z)(l,2),h=f[0],x=f[1],b=(0,a.useState)(""),v=(0,m.Z)(b,2),j=v[0],_=v[1],Z=(0,a.useState)(""),S=(0,m.Z)(Z,2),T=S[0],w=S[1];if(!o)return null;var C=function(){var e=(0,Ae.Z)((0,De.Z)().mark((function e(n){return(0,De.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n,{method:"GET"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),E=function(){var e=(0,Ae.Z)((0,De.Z)().mark((function e(){var n,t,i;return(0,De.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,g.LL)(o+"/xl.meta"),t=(0,g.LL)(r),i="/api/v1/admin/inspect?volume=".concat(t,"&file=").concat(n,"&encrypt=").concat(h),C(i).then(function(){var e=(0,Ae.Z)((0,De.Z)().mark((function e(n){var t,i,o,a;return(0,De.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ok){e.next=5;break}return e.next=3,n.json();case 3:t=e.sent,s((0,I.Ih)({errorMessage:t.message,detailedError:t.code}));case 5:return e.next=7,n.blob();case 7:if(i=e.sent,o=n.headers.get("content-disposition").split('"')[1],a=(0,g.Do)(o)||"",(0,g.zZ)(i,o),w(o),""!==a){e.next=15;break}return c(),e.abrupt("return");case 15:_(a);case 16:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){s((0,I.Ih)(e))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,O.jsxs)(a.Fragment,{children:[!j&&(0,O.jsx)(X.Z,{modalOpen:i,titleIcon:(0,O.jsx)(p.Gp8,{}),title:"Inspect Object",onClose:c,children:(0,O.jsxs)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault()}(e)},children:["Would you like to encrypt ",(0,O.jsx)("b",{children:(0,g.IO)(o)}),"?"," ",(0,O.jsx)("br",{}),(0,O.jsx)(ee.Z,{label:"Encrypt",indicatorLabels:["Yes","No"],checked:h,value:"encrypt",id:"encrypt",name:"encrypt",onChange:function(e){x(!h)},description:""}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:(0,O.jsx)(p.zxk,{id:"inspect",type:"submit",variant:"callAction",color:"primary",onClick:E,label:"Inspect"})})]})}),j?(0,O.jsx)(X.Z,{modalOpen:i,title:"Inspect Decryption Key",onClose:function(){(0,g.kT)(T),c(),_("")},titleIcon:(0,O.jsx)(p.tvm,{}),children:(0,O.jsxs)(me.Z,{children:[(0,O.jsxs)(H.Z,{children:["This will be displayed only once. It cannot be recovered.",(0,O.jsx)("br",{}),"Use secure medium to share this key."]}),(0,O.jsx)(H.Z,{children:(0,O.jsx)(Re.Z,{value:j})})]})}):null]})})),Me=t(76610),ze=(0,K.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},f.ID),f.DF),f.bK),(0,f.Bz)(e.spacing(4))))})),Ge=function(e){var n=e.open,t=e.closeModal,i=e.currentItem,o=e.internalPaths,r=e.actualInfo,s=e.bucketName,c=ze(),l=(0,u.TL)(),f=(0,a.useState)(i),h=(0,m.Z)(f,2),x=h[0],b=h[1],v=(0,a.useState)(!1),j=(0,m.Z)(v,2),_=j[0],Z=j[1];return(0,O.jsxs)(X.Z,{title:"Rename Download",modalOpen:n,onClose:t,titleIcon:(0,O.jsx)(p.dY8,{}),children:[(0,O.jsxs)("div",{children:["The file you are trying to download has a long name.",(0,O.jsx)("br",{}),"This can cause issues on Windows Systems by trimming the file name after download.",(0,O.jsx)("br",{}),(0,O.jsx)("br",{})," We recommend to rename the file download"]}),(0,O.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){!function(e){e.preventDefault();var n=(0,g.LL)("".concat(s,"-").concat(r.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),i=(0,Me.YO)(8),a=(0,P.LR)(s,o,r.version_id,parseInt(r.size||"0"),x,i,(function(e){l((0,F.RO)({instanceID:n,progress:e}))}),(function(){l((0,F.oK)(n))}),(function(e){l((0,F.qJ)({instanceID:n,msg:e}))}),(function(){l((0,F.Im)(n))}));(0,Me.EN)(i,a),l((0,F.Mc)({ID:i,bucketName:s,done:!1,instanceID:n,percentage:0,prefix:x,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""})),t()}(e)},children:(0,O.jsxs)(d.ZP,{container:!0,children:[(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:c.modalFormScrollable,children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,O.jsx)(Oe.Z,{id:"download-filename",name:"download-filename",onChange:function(e){b(e.target.value)},label:"",type:"text",value:x,error:x.length>200&&!_?"Filename should be less than 200 characters long.":""})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:c.formFieldRow,children:(0,O.jsx)(ee.Z,{value:"acceptLongName",id:"acceptLongName",name:"acceptLongName",checked:_,onChange:function(e){Z(e.target.checked),e.target.checked&&b(i)},label:"Use Original Name"})})]}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:c.modalButtonBar,children:(0,O.jsx)(p.zxk,{id:"download-file",type:"submit",variant:"callAction",color:"primary",disabled:x.length>200&&!_,label:"Download File"})})]})})]})},Ke={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:"0",tags:{},version_id:null},Je=(0,l.Z)((function(){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({ObjectDetailsTitle:{display:"flex",alignItems:"center","& .min-icon":{width:26,height:26,minWidth:26,minHeight:26}},objectNameContainer:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",alignItems:"center",marginLeft:10},headerForSection:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingBottom:15,borderBottom:"#E2E2E2 2px solid",fontWeight:"bold",fontSize:18,color:"#000",margin:"20px 22px"},capitalizeFirst:{textTransform:"capitalize"}},f.Si),f.OR),f.bK),f.VI),f.$b))}))((function(e){var n=e.classes,t=e.internalPaths,i=e.bucketName,o=e.versioning,s=e.locking,c=e.onClosePanel,l=(0,u.TL)(),f=(0,r.v9)(I.N5),h=(0,r.v9)((function(e){return e.objectBrowser.versionsMode})),x=(0,r.v9)((function(e){return e.objectBrowser.selectedVersion})),b=(0,r.v9)((function(e){return e.objectBrowser.loadingObjectInfo})),_=(0,a.useState)(!1),Z=(0,m.Z)(_,2),S=Z[0],T=Z[1],w=(0,a.useState)(!1),C=(0,m.Z)(w,2),y=C[0],L=C[1],B=(0,a.useState)(!1),D=(0,m.Z)(B,2),A=D[0],R=D[1],U=(0,a.useState)(!1),M=(0,m.Z)(U,2),z=M[0],G=M[1],K=(0,a.useState)(!1),J=(0,m.Z)(K,2),W=J[0],Y=J[1],q=(0,a.useState)(null),$=(0,m.Z)(q,2),Q=$[0],X=$[1],ee=(0,a.useState)([]),ne=(0,m.Z)(ee,2),te=ne[0],ie=ne[1],oe=(0,a.useState)(null),ae=(0,m.Z)(oe,2),re=ae[0],se=ae[1],ce=(0,a.useState)([]),le=(0,m.Z)(ce,2),de=le[0],ue=le[1],me=(0,a.useState)(!1),he=(0,m.Z)(me,2),pe=he[0],je=he[1],ge=(0,a.useState)(!1),_e=(0,m.Z)(ge,2),Ze=_e[0],Te=_e[1],we=(0,a.useState)(0),Ce=(0,m.Z)(we,2),Ee=Ce[0],ye=Ce[1],Ie=(0,a.useState)(!1),Fe=(0,m.Z)(Ie,2),Oe=Fe[0],Le=Fe[1],Be=(0,a.useState)(null),De=(0,m.Z)(Be,2),Ae=De[0],Re=De[1],ze=(0,a.useState)(!1),Je=(0,m.Z)(ze,2),We=Je[0],He=Je[1],Ve=((0,g.IO)(t)||"").split("/").pop()||"",Ye=[];Q&&(Ye=Q.name.split("/")),(0,a.useEffect)((function(){if(f&&te&&te.length>=1){var e=te.find((function(e){return e.is_latest}))||Ke;""!==x&&(e=te.find((function(e){return e.version_id===x}))||Ke),e.is_delete_marker||He(!0),X(e)}}),[x,f,te]),(0,a.useEffect)((function(){b&&""!==t&&j.Z.invoke("GET","/api/v1/buckets/".concat(i,"/objects?prefix=").concat(t).concat(f?"&with_versions=true":"")).then((function(e){var n=e.objects||[];if(f){ie(n),ue(n);var t=n.reduce((function(e,n){return null!==n&&void 0!==n&&n.size?e+parseInt(n.size):e}),0);ye(t)}else{var i=n[0];X(i),ue([]),i.is_delete_marker||He(!0)}l((0,F.vH)(!1))})).catch((function(e){console.error("Error loading object details",e),l((0,F.vH)(!1))}))}),[b,i,t,l,f,x]),(0,a.useEffect)((function(){We&&""!==t&&j.Z.invoke("GET","/api/v1/buckets/".concat(i,"/objects/metadata?prefix=").concat(t)).then((function(e){var n=v()(e,"objectMetadata",{});Re(n),He(!1)})).catch((function(e){console.error("Error Getting Metadata Status: ",e.detailedError),He(!1)}))}),[i,t,We]);var qe=[];Q&&Q.tags&&(qe=Object.keys(Q.tags));var $e=(0,O.jsx)("div",{style:{textAlign:"center",marginTop:35},children:(0,O.jsx)(p.aNw,{})});if(!Q)return b?$e:null;var Qe=Ye.length>0?Ye[Ye.length-1]:Q.name,Xe=[i,Ve,[i,Q.name].join("/")],en=(0,E.F)(i,[N.Ft.S3_PUT_OBJECT_LEGAL_HOLD,N.Ft.S3_PUT_ACTIONS]),nn=(0,E.F)(Xe,[N.Ft.S3_PUT_OBJECT_TAGGING,N.Ft.S3_PUT_ACTIONS]),tn=(0,E.F)(Xe,[N.Ft.S3_GET_OBJECT_RETENTION,N.Ft.S3_PUT_OBJECT_RETENTION,N.Ft.S3_GET_ACTIONS,N.Ft.S3_PUT_ACTIONS],!0),on=(0,E.F)(Xe,[N.Ft.ADMIN_INSPECT_DATA]),an=(0,E.F)(Xe,[N.Ft.S3_GET_BUCKET_VERSIONING,N.Ft.S3_PUT_BUCKET_VERSIONING,N.Ft.S3_GET_OBJECT_VERSION,N.Ft.S3_GET_ACTIONS,N.Ft.S3_PUT_ACTIONS]),rn=(0,E.F)(Xe,[N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS]),sn=(0,E.F)([i,Ve,[i,Q.name].join("/")],[N.Ft.S3_DELETE_OBJECT]),cn=[{action:function(){!function(e){var n=(0,g.LL)("".concat(i,"-").concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.random()));if(e.name.length>200&&(0,g.mv)().toLowerCase().includes("win"))Le(!0);else{var o=(0,Me.YO)(8),a=(0,P.LR)(i,t,e.version_id,parseInt(e.size||"0"),null,o,(function(e){l((0,F.RO)({instanceID:n,progress:e}))}),(function(){l((0,F.oK)(n))}),(function(e){l((0,F.qJ)({instanceID:n,msg:e}))}),(function(){l((0,F.Im)(n))}));(0,Me.EN)(o,a),l((0,F.Mc)({ID:o,bucketName:i,done:!1,instanceID:n,percentage:0,prefix:e.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}}(Q)},label:"Download",disabled:!!Q.is_delete_marker||!rn,icon:(0,O.jsx)(p._8t,{}),tooltip:rn?"Download this Object":(0,N.MK)([N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS],"download this object")},{action:function(){T(!0)},label:"Share",disabled:!!Q.is_delete_marker||!rn,icon:(0,O.jsx)(p.aAc,{}),tooltip:rn?"Share this File":(0,N.MK)([N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS],"share this object")},{action:function(){Te(!0)},label:"Preview",disabled:!!Q.is_delete_marker||"none"===(0,P.Bg)(Ve)||!rn,icon:(0,O.jsx)(p.P99,{}),tooltip:rn?"Preview this File":(0,N.MK)([N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS],"preview this object")},{action:function(){G(!0)},label:"Legal Hold",disabled:!s||!f||!!Q.is_delete_marker||!en||""!==x,icon:(0,O.jsx)(p.fNL,{}),tooltip:en?s?"Change Legal Hold rules for this File":"Object Locking must be enabled on this bucket in order to set Legal Hold":(0,N.MK)([N.Ft.S3_PUT_OBJECT_LEGAL_HOLD,N.Ft.S3_PUT_ACTIONS],"change legal hold settings for this object")},{action:function(){L(!0)},label:"Retention",disabled:!f||!!Q.is_delete_marker||!tn||""!==x||!s,icon:(0,O.jsx)(p.E9d,{}),tooltip:tn?s?"Change Retention rules for this File":"Object Locking must be enabled on this bucket in order to set Retention Rules":(0,N.MK)([N.Ft.S3_GET_OBJECT_RETENTION,N.Ft.S3_PUT_OBJECT_RETENTION,N.Ft.S3_GET_ACTIONS,N.Ft.S3_PUT_ACTIONS],"change Retention Rules for this object")},{action:function(){R(!0)},label:"Tags",disabled:!!Q.is_delete_marker||""!==x||!nn,icon:(0,O.jsx)(p.DgT,{}),tooltip:nn?"Change Tags for this File":(0,N.MK)([N.Ft.S3_PUT_OBJECT_TAGGING,N.Ft.S3_GET_OBJECT_TAGGING,N.Ft.S3_GET_ACTIONS,N.Ft.S3_PUT_ACTIONS],"set Tags on this object")},{action:function(){Y(!0)},label:"Inspect",disabled:!f||!!Q.is_delete_marker||""!==x||!on,icon:(0,O.jsx)(p.Gp8,{}),tooltip:on?"Inspect this file":(0,N.MK)([N.Ft.ADMIN_INSPECT_DATA],"inspect this file")},{action:function(){l((0,F.db)({status:!h,objectName:Qe}))},label:h?"Hide Object Versions":"Display Object Versions",icon:(0,O.jsx)(p.cRd,{}),disabled:!f||!(Q.version_id&&"null"!==Q.version_id)||!an,tooltip:an?Q.version_id&&"null"!==Q.version_id?"Display Versions for this file":"":(0,N.MK)([N.Ft.S3_GET_BUCKET_VERSIONING,N.Ft.S3_PUT_BUCKET_VERSIONING,N.Ft.S3_GET_OBJECT_VERSION,N.Ft.S3_GET_ACTIONS,N.Ft.S3_PUT_ACTIONS],"display all versions of this object")}];return(0,O.jsxs)(a.Fragment,{children:[S&&Q&&(0,O.jsx)(V.default,{open:S,closeModalAndRefresh:function(){se(null),T(!1)},bucketName:i,dataObject:re||Q}),y&&Q&&(0,O.jsx)(fe,{open:y,closeModalAndRefresh:function(e){L(!1),e&&l((0,F.vH)(!0))},objectName:Ve,objectInfo:Q,bucketName:i}),pe&&(0,O.jsx)(xe,{deleteOpen:pe,selectedBucket:i,selectedObject:t,closeDeleteModalAndRefresh:function(e){je(!1),e&&""===x?c(!0):(l((0,F.Eq)(!0)),l((0,F.M3)("")),l((0,F.vH)(!0)))},versioning:f&&o,selectedVersion:x}),z&&Q&&(0,O.jsx)(be,{open:z,closeModalAndRefresh:function(e){G(!1),e&&l((0,F.vH)(!0))},objectName:Q.name,bucketName:i,actualInfo:Q}),Ze&&Q&&(0,O.jsx)(ve.default,{open:Ze,bucketName:i,object:{name:Q.name,version_id:Q.version_id||"null",size:parseInt(Q.size||"0"),content_type:"",last_modified:Q.last_modified},onClosePreview:function(){Te(!1)}}),A&&Q&&(0,O.jsx)(Pe,{modalOpen:A,bucketName:i,actualInfo:Q,onCloseAndUpdate:function(e){R(!1),e&&l((0,F.vH)(!0))}}),W&&Q&&(0,O.jsx)(Ue,{inspectOpen:W,volumeName:i,inspectPath:Q.name,closeInspectModalAndRefresh:function(e){Y(!1),e&&l((0,F.vH)(!0))}}),Oe&&Q&&(0,O.jsx)(Ge,{open:Oe,closeModal:function(){Le(!1)},currentItem:Ve,bucketName:i,internalPaths:t,actualInfo:Q}),b?(0,O.jsx)(a.Fragment,{children:$e}):(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)(Ne,{title:(0,O.jsxs)("div",{className:n.ObjectDetailsTitle,children:[ke(Qe,!0),(0,O.jsx)("span",{className:n.objectNameContainer,children:Qe})]}),items:cn}),(0,O.jsx)(k.Z,{tooltip:sn?"":(0,N.MK)([N.Ft.S3_DELETE_OBJECT],"delete this object"),children:(0,O.jsx)(d.ZP,{item:!0,xs:12,sx:{justifyContent:"center",display:"flex"},children:(0,O.jsx)(E.s,{resource:[i,Ve,[i,Q.name].join("/")],scopes:[N.Ft.S3_DELETE_OBJECT],errorProps:{disabled:!0},children:(0,O.jsx)(p.zxk,{id:"delete-element-click",icon:(0,O.jsx)(p.pJl,{}),iconLocation:"start",fullWidth:!0,variant:"secondary",onClick:function(){je(!0)},disabled:""===x&&Q.is_delete_marker,style:{width:"calc(100% - 44px)",margin:"8px 0"},label:"Delete".concat(""!==x?" version":"")})})})}),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.headerForSection,children:[(0,O.jsx)("span",{children:"Object Info"}),(0,O.jsx)(p.Gvh,{})]}),(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"Name:"}),(0,O.jsx)("br",{}),(0,O.jsx)("div",{style:{overflowWrap:"break-word"},children:Qe})]}),""!==x&&(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"Version ID:"}),(0,O.jsx)("br",{}),x]}),(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"Size:"}),(0,O.jsx)("br",{}),(0,g.ae)(Q.size||"0")]}),Q.version_id&&"null"!==Q.version_id&&""===x&&(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"Versions:"}),(0,O.jsx)("br",{}),de.length," version",1!==de.length?"s":"",","," ",(0,g.l5)(Ee)]}),""===x&&(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"Last Modified:"}),(0,O.jsx)("br",{}),function(e){var n=new Date,t=new Date(e),i=n.getTime()-t.getTime(),o=(0,g.nF)(i,"ms");return""!==o.trim()?"".concat(o," ago"):"Just now"}(Q.last_modified)]}),(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"ETAG:"}),(0,O.jsx)("br",{}),Q.etag||"N/A"]}),(0,O.jsxs)(H.Z,{className:n.detailContainer,children:[(0,O.jsx)("strong",{children:"Tags:"}),(0,O.jsx)("br",{}),0===qe.length?"N/A":qe.map((function(e,n){return(0,O.jsxs)("span",{children:[e,":",v()(Q,"tags.".concat(e),""),n<qe.length-1?", ":""]},"key-vs-".concat(n.toString()))}))]}),(0,O.jsx)(H.Z,{className:n.detailContainer,children:(0,O.jsx)(E.s,{scopes:[N.Ft.S3_GET_OBJECT_LEGAL_HOLD,N.Ft.S3_GET_ACTIONS],resource:i,children:(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)("strong",{children:"Legal Hold:"}),(0,O.jsx)("br",{}),Q.legal_hold_status?"On":"Off"]})})}),(0,O.jsx)(H.Z,{className:n.detailContainer,children:(0,O.jsx)(E.s,{scopes:[N.Ft.S3_GET_OBJECT_RETENTION,N.Ft.S3_GET_ACTIONS],resource:i,children:(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)("strong",{children:"Retention Policy:"}),(0,O.jsx)("br",{}),(0,O.jsx)("span",{className:n.capitalizeFirst,children:(Q.version_id&&Q.version_id,(0,O.jsx)(a.Fragment,{children:Q.retention_mode?Q.retention_mode.toLowerCase():"None"}))})]})})}),!Q.is_delete_marker&&(0,O.jsxs)(a.Fragment,{children:[(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.headerForSection,children:[(0,O.jsx)("span",{children:"Metadata"}),(0,O.jsx)(p.fRO,{})]}),(0,O.jsx)(H.Z,{className:n.detailContainer,children:Q&&Ae?(0,O.jsx)(Se,{metaData:Ae,linear:!0}):null})]})]})]})})),We=t(40986),He=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)({},f.oO))}))((function(e){var n=e.classes,t=e.versionToRestore,i=e.bucketName,o=e.objectPath,r=e.restoreOpen,s=e.onCloseAndUpdate,c=(0,u.TL)(),l=(0,a.useState)(!1),d=(0,m.Z)(l,2),f=d[0],h=d[1];return(0,O.jsx)(he.Z,{title:"Restore File Version",confirmText:"Restore",isOpen:r,isLoading:f,titleIcon:(0,O.jsx)(p.D7Y,{}),onConfirm:function(){h(!0),j.Z.invoke("PUT","/api/v1/buckets/".concat(i,"/objects/restore?prefix=").concat((0,g.LL)(o),"&version_id=").concat(t.version_id)).then((function(e){console.log("REStORE",e),h(!1),s(!0),c((0,F.rI)({prefix:o,objectInfo:t}))})).catch((function(e){c((0,I.Ih)(e)),h(!1)}))},confirmButtonProps:{variant:"secondary",disabled:f},onClose:function(){s(!1)},confirmationContent:(0,O.jsxs)(me.Z,{id:"alert-dialog-description",children:["Are you sure you want to restore ",(0,O.jsx)("br",{}),(0,O.jsx)("b",{children:o})," ",(0,O.jsx)("br",{})," with Version ID:",(0,O.jsx)("br",{}),(0,O.jsx)("b",{className:n.wrapText,children:t.version_id}),"?"]})})})),Ve=function(e){var n="#000",t="";switch(e.type){case"null":n="#07193E",t="NULL VERSION";break;case"deleted":n="#868686",t="DELETED";break;default:n="#174551",t="CURRENT VERSION"}return(0,O.jsx)("span",{style:{backgroundColor:n,padding:"0 5px",display:"inline-block",color:"#FFF",fontWeight:"bold",fontSize:12,borderRadius:2,whiteSpace:"nowrap",margin:"0 10px"},children:t})},Ye=t(34866),qe=(0,l.Z)((function(e){return(0,c.Z)({mainFileVersionItem:{borderBottom:"#E2E2E2 1px solid",padding:"1rem 0",margin:"0 0.5rem 0 2.5rem",cursor:"pointer","&.deleted":{color:"#868686"},"@media (max-width: 799px)":{padding:"5px 0px",margin:0}},intermediateLayer:{margin:"0 1.5rem 0 1.5rem","&:hover, &.selected":{backgroundColor:"#F8F8F8","& > div":{borderBottomColor:"#F8F8F8"}},"@media (max-width: 799px)":{margin:0,"&:hover, &.selected":{backgroundColor:"transparent","& > div":{borderBottomColor:"#E2E2E2"}}}},versionContainer:{fontSize:16,fontWeight:"bold",display:"flex",alignItems:"center","& svg.min-icon":{width:18,height:18,minWidth:18,minHeight:18,marginRight:10},"@media (max-width: 799px)":{fontSize:14,"& svg.min-icon":{display:"none"}}},buttonContainer:{textAlign:"right","& button":{marginLeft:"1.5rem"},"@media (max-width: 600px)":{"& button":{marginLeft:"5px"}}},versionID:{fontSize:"12px",margin:"2px 0",whiteSpace:"nowrap",textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden"},versionData:{marginRight:"10px",fontSize:12,color:"#868686","@media (max-width: 799px)":{textOverflow:"ellipsis",maxWidth:"95%",overflow:"hidden",whiteSpace:"nowrap"}},ctrItem:{position:"relative","&::before":{content:"' '",display:"block",position:"absolute",width:"2px",height:"calc(100% + 2px)",backgroundColor:"#F8F8F8",left:"24px"},"@media (max-width: 799px)":{"&::before":{display:"none"}}},collapsableInfo:{"@media (max-width: 799px)":{display:"flex",flexDirection:"column"}},versionItem:{"@media (max-width: 799px)":{display:"none"}}})}))((function(e){var n=e.classes,t=e.fileName,i=e.versionInfo,o=e.isSelected,a=e.checkable,r=e.isChecked,s=e.onCheck,c=e.onShare,l=e.onDownload,u=e.onRestore,f=e.onPreview,m=e.globalClick,h=e.index,b=e.key,v=e.style,j=i.is_delete_marker,_=[{icon:(0,O.jsx)(p.P99,{}),action:f,tooltip:"Preview"},{icon:(0,O.jsx)(p._8t,{}),action:l,tooltip:"Download this version"},{icon:(0,O.jsx)(p.aAc,{}),action:c,tooltip:"Share this version"},{icon:(0,O.jsx)(p.D7Y,{}),action:u,tooltip:"Restore this version"}],Z=null;i.is_delete_marker?Z="deleted":i.is_latest?Z="current":"null"===i.version_id&&(Z="null");var S=x.ou.now();return i.last_modified&&(S=x.ou.fromISO(i.last_modified)),(0,O.jsx)(d.ZP,{container:!0,flex:1,className:n.ctrItem,onClick:function(){m(i)},style:v,children:(0,O.jsx)(d.ZP,{item:!0,xs:12,className:"".concat(n.intermediateLayer," ").concat(o?"selected":""),children:(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:"".concat(n.mainFileVersionItem," ").concat(i.is_delete_marker?"deleted":""),children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,justifyContent:"space-between",children:(0,O.jsxs)(d.ZP,{container:!0,children:[(0,O.jsxs)(d.ZP,{item:!0,xs:!0,md:4,className:n.versionContainer,children:[a&&(0,O.jsx)(Ye.Z,{checked:r,id:"select-".concat(i.version_id),label:"",name:"select-".concat(i.version_id),onChange:function(e){e.stopPropagation(),e.preventDefault(),s(i.version_id||"")},value:i.version_id||"",disabled:i.is_delete_marker,overrideCheckboxStyles:{paddingLeft:0,height:34,width:25},noTopMargin:!0}),ke(t,!0)," v",h.toString(),(0,O.jsx)("span",{className:n.versionItem,children:Z&&(0,O.jsx)(Ve,{type:Z})})]}),(0,O.jsx)(d.ZP,{item:!0,xs:10,md:8,className:n.buttonContainer,children:_.map((function(e,t){return(0,O.jsx)(ae.Z,{title:e.tooltip,children:(0,O.jsx)(C.Z,{size:"small",id:"version-action-".concat(e.tooltip,"-").concat(t.toString()),className:"".concat(n.spacing," ").concat(j?n.buttonDisabled:""),disabled:j,onClick:function(n){n.stopPropagation(),j?n.preventDefault():e.action(i)},sx:{backgroundColor:"#F8F8F8",borderRadius:"100%",width:"28px",height:"28px",padding:"5px","& .min-icon":{width:"14px",height:"14px"}},children:e.icon})},"version-action-".concat(e.tooltip,"-").concat(t.toString()))}))})]})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.versionID,children:"null"!==i.version_id?i.version_id:"-"}),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.collapsableInfo,children:[(0,O.jsxs)("span",{className:n.versionData,children:[(0,O.jsx)("strong",{children:"Last modified:"})," ",S.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)")]}),(0,O.jsxs)("span",{className:n.versionData,children:[(0,O.jsx)("strong",{children:"Size:"})," ",(0,g.ae)(i.size||"0")]})]})]})})},b)})),$e=t(90673),Qe=function(e){var n=e.closeDeleteModalAndRefresh,t=e.deleteOpen,i=e.selectedBucket,o=e.selectedObject,s=(0,u.TL)(),c=(0,a.useState)(!1),l=(0,m.Z)(c,2),f=l[0],h=l[1],x=(0,a.useState)(""),b=(0,m.Z)(x,2),v=b[0],_=b[1],Z=(0,a.useState)(!1),S=(0,m.Z)(Z,2),T=S[0],w=S[1],C=(0,r.v9)((function(e){return e.objectBrowser.retentionConfig})),y=(0,E.F)([i],[N.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===C||void 0===C?void 0:C.mode);if((0,a.useEffect)((function(){f&&j.Z.invoke("DELETE","/api/v1/buckets/".concat(i,"/objects?path=").concat(o,"&non_current_versions=true").concat(T?"&bypass=true":"")).then((function(){n(!0)})).catch((function(e){s((0,I.Ih)(e)),h(!1)}))}),[f,n,s,o,i,T]),!o)return null;return(0,O.jsx)(he.Z,{title:"Delete Non-Current versions",confirmText:"Delete",isOpen:t,titleIcon:(0,O.jsx)(p.NvT,{}),isLoading:f,onConfirm:function(){h(!0)},onClose:function(){return n(!1)},confirmButtonProps:{disabled:"YES, PROCEED"!==v||f},confirmationContent:(0,O.jsxs)(me.Z,{children:["Are you sure you want to delete all the non-current versions for:"," ",(0,O.jsx)("b",{children:(0,g.IO)(o)}),"? ",(0,O.jsx)("br",{}),y&&(0,O.jsx)(a.Fragment,{children:(0,O.jsx)("div",{style:{marginTop:10},children:(0,O.jsx)(ee.Z,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:T,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:function(e){w(!T)},description:""})})}),(0,O.jsx)("br",{}),"To continue please type ",(0,O.jsx)("b",{children:"YES, PROCEED"})," in the box.",(0,O.jsx)(d.ZP,{item:!0,xs:12,children:(0,O.jsx)(Oe.Z,{id:"type-confirm",name:"retype-tenant",onChange:function(e){_(e.target.value)},label:"",value:v})})]})})},Xe=function(e){var n=e.closeDeleteModalAndRefresh,t=e.deleteOpen,i=e.selectedBucket,o=e.selectedVersions,s=e.selectedObject,c=(0,u.TL)(),l=(0,a.useState)(!1),d=(0,m.Z)(l,2),f=d[0],h=d[1],x=(0,a.useState)(!1),b=(0,m.Z)(x,2),v=b[0],g=b[1],_=(0,r.v9)((function(e){return e.objectBrowser.retentionConfig})),Z=(0,E.F)([i],[N.Ft.S3_BYPASS_GOVERNANCE_RETENTION])&&"governance"===(null===_||void 0===_?void 0:_.mode);return(0,a.useEffect)((function(){if(f){var e=o.map((function(e){return{path:s,versionID:e,recursive:!1}}));e.length>0&&j.Z.invoke("POST","/api/v1/buckets/".concat(i,"/delete-objects?all_versions=false").concat(v?"&bypass=true":""),e).then((function(){h(!1),n(!0)})).catch((function(e){c((0,I.Ih)(e)),h(!1)}))}}),[f,n,i,s,o,v,c]),o?(0,O.jsx)(he.Z,{title:"Delete Selected Versions",confirmText:"Delete",isOpen:t,titleIcon:(0,O.jsx)(p.NvT,{}),isLoading:f,onConfirm:function(){h(!0)},onClose:function(){return n(!1)},confirmationContent:(0,O.jsxs)(me.Z,{children:["Are you sure you want to delete the selected ",o.length," ","versions for ",(0,O.jsx)("strong",{children:s}),"?",Z&&(0,O.jsx)(a.Fragment,{children:(0,O.jsx)("div",{style:{marginTop:10},children:(0,O.jsx)(ee.Z,{label:"Bypass Governance Mode",indicatorLabels:["Yes","No"],checked:v,value:"bypass_governance",id:"bypass_governance",name:"bypass_governance",onChange:function(e){g(!v)},description:""})})})]})}):null},en=t(5171),nn={is_latest:!0,last_modified:"",legal_hold_status:"",name:"",retention_mode:"",retention_until_date:"",size:"0",tags:{},version_id:null},tn=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({versionsContainer:{padding:10,"@media (max-width: 799px)":{minHeight:800}},noBottomBorder:{borderBottom:0},versionsVirtualPanel:{flexGrow:1,height:"calc(100% - 120px)",overflow:"auto","@media (max-width: 799px)":{height:600}},screenTitleContainer:{position:"relative","&::before":{content:"' '",display:"block",position:"absolute",width:"2px",backgroundColor:"#F8F8F8",left:"24px",height:"40px",bottom:0},"@media (max-width: 799px)":{"&::before":{display:"none"}}},sortByLabel:{color:"#838383",fontWeight:"bold",whiteSpace:"nowrap",marginRight:12,fontSize:14,"@media (max-width: 600px)":{display:"none"}}},f.bp),f.Si),f.OR),f.VX),f.bK),f.VI),f.cx),f.C4),(0,f.Bz)(e.spacing(4))))}))((function(e){var n=e.classes,t=e.internalPaths,i=e.bucketName,o=(0,u.TL)(),s=(0,r.v9)((function(e){return e.objectBrowser.searchVersions})),c=(0,r.v9)((function(e){return e.objectBrowser.loadingVersions})),l=(0,r.v9)((function(e){return e.objectBrowser.selectedVersion})),f=(0,r.v9)(I.N5),h=(0,a.useState)(!1),x=(0,m.Z)(h,2),b=x[0],_=x[1],S=(0,a.useState)(null),T=(0,m.Z)(S,2),w=T[0],C=T[1],E=(0,a.useState)(null),N=(0,m.Z)(E,2),y=N[0],L=N[1],A=(0,a.useState)([]),R=(0,m.Z)(A,2),U=R[0],M=R[1],z=(0,a.useState)(!1),G=(0,m.Z)(z,2),K=G[0],J=G[1],W=(0,a.useState)(null),H=(0,m.Z)(W,2),Y=H[0],q=H[1],$=(0,a.useState)("date"),Q=(0,m.Z)($,2),X=Q[0],ee=Q[1],ne=(0,a.useState)(!1),te=(0,m.Z)(ne,2),ie=te[0],oe=te[1],ae=(0,a.useState)(!1),re=(0,m.Z)(ae,2),se=re[0],ce=re[1],le=(0,a.useState)(!1),de=(0,m.Z)(le,2),ue=de[0],fe=de[1],me=(0,a.useState)([]),he=(0,m.Z)(me,2),pe=he[0],xe=he[1],be=(0,a.useState)(!1),je=(0,m.Z)(be,2),ge=je[0],_e=je[1],Ze=[];w&&(Ze=w.name.split("/")),(0,a.useEffect)((function(){c||w||o((0,F.Eq)(!0))}),[c,w,o]),(0,a.useEffect)((function(){c&&""!==t&&j.Z.invoke("GET","/api/v1/buckets/".concat(i,"/objects?prefix=").concat(t).concat(f?"&with_versions=true":"")).then((function(e){var n=v()(e,"objects",[]),i=(0,g.IO)(t),a=n.filter((function(e){return e.name===i}));f?(C(a.find((function(e){return e.is_latest}))||nn),M(a)):(C(a[0]),M([])),o((0,F.Eq)(!1))})).catch((function(e){o((0,I.Ih)(e)),o((0,F.Eq)(!1))}))}),[c,i,t,o,f]);var Se=function(e){L(e),_(!0)},Te=function(e){L(e),oe(!0)},we=function(e){q(e),J(!0)},Ce=function(e){!function(e){var n=(0,g.LL)("".concat(i,"-").concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),a=(0,Me.YO)(8),r=(0,P.LR)(i,t,e.version_id,parseInt(e.size||"0"),null,a,(function(e){o((0,F.RO)({instanceID:n,progress:e}))}),(function(){o((0,F.oK)(n))}),(function(e){o((0,F.qJ)({instanceID:n,msg:e}))}),(function(){o((0,F.Im)(n))}));(0,Me.EN)(a,r),o((0,F.Mc)({ID:a,bucketName:i,done:!1,instanceID:n,percentage:0,prefix:e.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))}(e)},Ee=function(e){o((0,F.M3)(e.version_id||""))},Ne=U.filter((function(e){return!!e.version_id&&e.version_id.includes(s)})),ye=U.reduce((function(e,n){return n.size?e+parseInt(n.size):e}),0);Ne.sort((function(e,n){if("size"===X)return e.size&&n.size?e.size<n.size?-1:e.size>n.size?1:0:0;var t=new Date(e.last_modified).getTime(),i=new Date(n.last_modified).getTime();return t<i?1:t>i?-1:0}));var Ie=function(e){if(pe.includes(e)){var n=pe.filter((function(n){return n!==e}));xe(n)}else{var t=(0,Z.Z)(pe);t.push(e),xe(t)}};return(0,O.jsxs)(a.Fragment,{children:[b&&w&&(0,O.jsx)(V.default,{open:b,closeModalAndRefresh:function(){L(null),_(!1),oe(!1)},bucketName:i,dataObject:y||w}),K&&w&&Y&&(0,O.jsx)(He,{restoreOpen:K,bucketName:i,versionToRestore:Y,objectPath:w.name,onCloseAndUpdate:function(e){J(!1),q(null),e&&(o((0,F.Eq)(!0)),o((0,F.vH)(!0)))}}),ie&&w&&(0,O.jsx)(ve.default,{open:ie,bucketName:i,object:{name:w.name,version_id:y&&y.version_id?y.version_id:"null",size:parseInt(y&&y.size?y.size:"0"),content_type:"",last_modified:w.last_modified},onClosePreview:function(){oe(!1)}}),se&&(0,O.jsx)(Qe,{deleteOpen:se,closeDeleteModalAndRefresh:function(e){ce(!1),e&&(o((0,F.Eq)(!0)),o((0,F.M3)("")),o((0,F.vH)(!0)))},selectedBucket:i,selectedObject:t}),ge&&(0,O.jsx)(Xe,{selectedBucket:i,selectedObject:(0,g.IO)(t),deleteOpen:ge,selectedVersions:pe,closeDeleteModalAndRefresh:function(e){_e(!1),e&&(o((0,F.Eq)(!0)),o((0,F.M3)("")),o((0,F.vH)(!0)),xe([]))}}),(0,O.jsxs)(d.ZP,{container:!0,className:n.versionsContainer,children:[!w&&(0,O.jsx)(d.ZP,{item:!0,xs:12,children:(0,O.jsx)(We.Z,{})}),w&&(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,children:(0,O.jsx)(B,{bucketName:i,internalPaths:(0,g.IO)(t),hidePathButton:!0})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.screenTitleContainer,children:(0,O.jsx)(D.Z,{icon:(0,O.jsx)("span",{className:n.listIcon,children:(0,O.jsx)(p.cRd,{})}),title:(0,O.jsxs)("span",{className:n.titleSpacer,children:[Ze.length>0?Ze[Ze.length-1]:w.name," ","Versions"]}),subTitle:(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.bucketDetails,children:[(0,O.jsx)("span",{className:n.detailsSpacer,children:(0,O.jsxs)("strong",{children:[U.length," Version",1===U.length?"":"s","\xa0\xa0\xa0"]})}),(0,O.jsx)("span",{className:n.detailsSpacer,children:(0,O.jsx)("strong",{children:(0,g.l5)(ye)})})]})}),actions:(0,O.jsxs)(a.Fragment,{children:[(0,O.jsx)(k.Z,{tooltip:"Select Multiple Versions",children:(0,O.jsx)(p.zxk,{id:"select-multiple-versions",onClick:function(){fe(!ue)},icon:(0,O.jsx)(p.amE,{}),variant:ue?"callAction":"regular",style:{marginRight:8}})}),ue&&(0,O.jsx)(k.Z,{tooltip:"Delete Selected Versions",children:(0,O.jsx)(p.zxk,{id:"delete-multiple-versions",onClick:function(){_e(!0)},icon:(0,O.jsx)(p.pJl,{}),variant:"secondary",style:{marginRight:8},disabled:0===pe.length})}),(0,O.jsx)(k.Z,{tooltip:"Delete Non Current Versions",children:(0,O.jsx)(p.zxk,{id:"delete-non-current",onClick:function(){ce(!0)},icon:(0,O.jsx)(p.utM,{}),variant:"secondary",style:{marginRight:15},disabled:U.length<=1})}),(0,O.jsx)("span",{className:n.sortByLabel,children:"Sort by"}),(0,O.jsx)($e.Z,{id:"sort-by",label:"",value:X,onChange:function(e){ee(e.target.value)},name:"sort-by",options:[{label:"Date",value:"date"},{label:"Size",value:"size"}]})]}),className:n.noBottomBorder})}),(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.versionsVirtualPanel,children:w.version_id&&"null"!==w.version_id&&(0,O.jsx)(en.aV,{style:{width:"100%"},containerStyle:{width:"100%",maxWidth:"100%"},width:1,height:800,rowCount:Ne.length,rowHeight:108,rowRenderer:function(e){var n=e.key,t=e.index,i=(e.isScrolling,e.isVisible,e.style),o=U.length-t;return(0,O.jsx)(qe,{style:i,fileName:(null===w||void 0===w?void 0:w.name)||"",versionInfo:Ne[t],index:o,onDownload:Ce,onRestore:we,onShare:Se,onPreview:Te,globalClick:Ee,isSelected:l===Ne[t].version_id,checkable:ue,onCheck:Ie,isChecked:pe.includes(Ne[t].version_id||"")},n)}})})]})]})]})})),on=t(9859),an=function(e){if(e.name.endsWith("/"))return"";var n=x.ou.now(),t=x.ou.fromISO(e.last_modified);return n.hasSame(t,"day")&&n.hasSame(t,"month")&&n.hasSame(t,"year")?"Today, ".concat(t.toFormat("HH:mm")):t.toFormat("ccc, LLL dd yyyy HH:mm (ZZZZ)")},rn=function(e){return e.name.endsWith("/")||!e.size?"-":(0,g.ae)(String(e.size))},sn=[{label:"Name",elementKey:"name",renderFunction:ke,enableSort:!0},{label:"Last Modified",elementKey:"last_modified",renderFunction:an,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:rn,renderFullObject:!0,width:100,enableSort:!0}],cn=[{label:"Name",elementKey:"name",renderFunction:ke,enableSort:!0},{label:"Object Date",elementKey:"last_modified",renderFunction:an,renderFullObject:!0,enableSort:!0},{label:"Size",elementKey:"size",renderFunction:rn,renderFullObject:!0,width:100,enableSort:!0},{label:"Deleted",elementKey:"delete_flag",renderFunction:function(e){return e?"Yes":"No"},width:60}],ln=t(92983),dn=t(46078),un=(0,K.Z)((function(e){return(0,c.Z)({browsePaper:{border:0,height:"calc(100vh - 290px)","&.isEmbedded":{height:"calc(100vh - 315px)"},"&.actionsPanelOpen":{minHeight:"100%"},"@media (max-width: 800px)":{width:800}},parentWrapper:{position:"relative",height:"calc(100% - 60px)","@media (max-width: 800px)":{overflowX:"auto"}},"@global":{".rowLine:hover  .iconFileElm":{backgroundImage:"url(/images/ob_file_filled.svg)"},".rowLine:hover  .iconFolderElm":{backgroundImage:"url(/images/ob_folder_filled.svg)"}}})})),fn=function(){var e=un(),n=(0,u.TL)(),t=(0,s.UO)(),i=(0,s.s0)(),o=(0,a.useState)("ASC"),c=(0,m.Z)(o,2),l=c[0],d=c[1],f=(0,a.useState)("name"),h=(0,m.Z)(f,2),p=h[0],x=h[1],b=t.bucketName||"",j=(0,r.v9)((function(e){return e.objectBrowser.objectDetailsOpen})),_=(0,r.v9)((function(e){return e.objectBrowser.loadingObjects})),S=(0,r.v9)(dn.$4),T=!(null===S||void 0===S||!S.includes("object-browser-only")),w=(0,r.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),C=(0,r.v9)((function(e){return e.objectBrowser.records})),y=(0,r.v9)((function(e){return e.objectBrowser.searchObjects})),I=(0,r.v9)((function(e){return e.objectBrowser.selectedObjects})),k=(0,E.F)(b,[N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET]),L=C.filter((function(e){return""===y||e.name.toLowerCase().indexOf(y.toLowerCase())>=0})).sort((0,P.P_)(p)),B=[];B="ASC"===l?L:L.reverse();var D=[{type:"view",label:"View",onClick:function(e){n((0,F.S2)([]));var t="/browser/".concat(b).concat(e?"/".concat((0,g.LL)(e)):"");i(t),n((0,F.vb)(!0)),n((0,F.Eq)(!0)),n((0,F.EE)("".concat(e?"".concat((0,g.LL)(e)):""))),n((0,F.d_)(!0))},sendOnlyId:!0}];return(0,O.jsx)(ln.Z,{itemActions:D,columns:w?cn:sn,isLoading:_,entityName:"Objects",idField:"name",records:B,customPaperHeight:"".concat(e.browsePaper," ").concat(T?"isEmbedded":""," ").concat(j?"actionsPanelOpen":""),selectedItems:I,onSelect:function(e){var t=e.target,i=t.value,o=t.checked,a=(0,Z.Z)(I);return o?a.push(i):a=a.filter((function(e){return e!==i})),n((0,F.S2)(a)),n((0,F.EE)(null)),a},customEmptyMessage:k?"This location is empty".concat(w?"":", please try uploading a new file"):(0,N.MK)([N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET],"view Objects in this bucket"),sortConfig:{currentSort:p,currentDirection:l,triggerSort:function(e){var t=v()(e,"sortDirection","DESC");x(e.sortBy),d(t),n((0,F.Cn)(!0))}},onSelectAll:function(){if(n((0,F.EE)(null)),I.length!==B.length){var e=B.map((function(e){return e.name}));n((0,F.S2)(e))}else n((0,F.S2)([]))},rowStyle:function(e){var n,t=e.index;return null!==(n=B[t])&&void 0!==n&&n.delete_flag?"deleted":""},parentClassName:e.parentWrapper})},mn=t(96382),hn=(0,mn.hg)("objectBrowser/downloadSelected",function(){var e=(0,Ae.Z)((0,De.Z)().mark((function e(n,t){var i,o,a,r,s,c;return(0,De.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.getState,t.rejectWithValue,o=t.dispatch,a=i(),r=function(e){var t=(0,g.LL)("".concat(n,"-").concat(e.name,"-").concat((new Date).getTime(),"-").concat(Math.random())),i=(0,Me.YO)(8),a=(0,P.LR)(n,(0,g.LL)(e.name),e.version_id,e.size,null,i,(function(e){o((0,F.RO)({instanceID:t,progress:e}))}),(function(){o((0,F.oK)(t))}),(function(e){o((0,F.qJ)({instanceID:t,msg:e}))}),(function(){o((0,F.Im)(t))}));(0,Me.EN)(i,a),o((0,F.Mc)({ID:i,bucketName:n,done:!1,instanceID:t,percentage:0,prefix:e.name,type:"download",waitingForFile:!0,failed:!1,cancelled:!1,errorMessage:""}))},0===a.objectBrowser.selectedObjects.length){e.next=12;break}if(s=[],c=function(e){return a.objectBrowser.selectedObjects.includes(e.name)},1!==(s=a.objectBrowser.records.filter(c)).length){e.next=11;break}if(!(s[0].name.length>200&&(0,g.mv)().toLowerCase().includes("win"))){e.next=11;break}return o((0,F.$y)(s[0])),e.abrupt("return");case 11:s.forEach((function(e){r(e)}));case 12:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),pn=(0,mn.hg)("objectBrowser/openPreview",function(){var e=(0,Ae.Z)((0,De.Z)().mark((function e(n,t){var i,o,a,r,s;return(0,De.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getState,t.rejectWithValue,o=t.dispatch,1===(a=i()).objectBrowser.selectedObjects.length&&(s=function(e){return a.objectBrowser.selectedObjects.includes(e.name)},(r=a.objectBrowser.records.find(s))&&(o((0,F.eP)(r)),o((0,F.ei)(!0))));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),xn=(0,mn.hg)("objectBrowser/openShare",function(){var e=(0,Ae.Z)((0,De.Z)().mark((function e(n,t){var i,o,a,r,s;return(0,De.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.getState,t.rejectWithValue,o=t.dispatch,1===(a=i()).objectBrowser.selectedObjects.length&&(s=function(e){return a.objectBrowser.selectedObjects.includes(e.name)},(r=a.objectBrowser.records.find(s))&&(o((0,F.eP)(r)),o((0,F.Qf)(!0))));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),bn=(0,y.Z)(a.lazy((function(){return t.e(711).then(t.bind(t,50711))}))),vn=(0,y.Z)(a.lazy((function(){return Promise.resolve().then(t.bind(t,34433))}))),jn=(0,y.Z)(a.lazy((function(){return Promise.all([t.e(3691),t.e(9683),t.e(6901)]).then(t.bind(t,26901))}))),gn=(0,y.Z)(a.lazy((function(){return Promise.resolve().then(t.bind(t,78562))}))),_n=(0,K.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)((0,o.Z)({badgeOverlap:{"& .MuiBadge-badge":{top:10,right:1,width:5,height:5,minWidth:5}},screenTitle:{borderBottom:0,paddingTop:0,paddingLeft:0,paddingRight:0}},f.VX),f.OR),f.qg),{},{searchField:(0,o.Z)((0,o.Z)({},f.qg.searchField),{},{maxWidth:380}),screenTitleContainer:{border:"#EAEDEE 1px solid",padding:"0.8rem 15px 0"},labelStyle:{color:"#969FA8",fontSize:"12px"},breadcrumbsContainer:{padding:"12px 14px 5px"},fullContainer:{position:"relative","@media (max-width: 799px)":{width:0}},hideListOnSmall:{"@media (max-width: 799px)":{display:"none"}}},f.C4),f.cx),(0,f.Bz)(e.spacing(4))))})),Zn={borderWidth:2,borderRadius:2,borderColor:"#eeeeee",outline:"none"},Sn={borderStyle:"dashed",backgroundColor:"#fafafa",borderColor:"#2196f3"},Tn={borderStyle:"dashed",backgroundColor:"#fafafa",borderColor:"#00e676"},wn=function(){var e,n=_n(),t=(0,u.TL)(),i=(0,s.UO)(),c=(0,s.s0)(),l=(0,s.TH)(),f=(0,r.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),b=(0,r.v9)((function(e){return e.objectBrowser.rewind.bucketToRewind})),Z=(0,r.v9)((function(e){return e.objectBrowser.versionsMode})),S=(0,r.v9)((function(e){return e.objectBrowser.showDeleted})),T=(0,r.v9)((function(e){return e.objectBrowser.objectDetailsOpen})),w=(0,r.v9)((function(e){return e.objectBrowser.selectedInternalPaths})),C=(0,r.v9)((function(e){return e.objectBrowser.loadingObjects})),y=(0,r.v9)((function(e){return e.objectBrowser.simplePath})),L=(0,r.v9)((function(e){return e.objectBrowser.isVersioned})),R=(0,r.v9)((function(e){return e.objectBrowser.lockingEnabled})),U=(0,r.v9)((function(e){return e.objectBrowser.downloadRenameModal})),M=(0,r.v9)((function(e){return e.objectBrowser.selectedPreview})),z=(0,r.v9)((function(e){return e.objectBrowser.shareFileModalOpen})),K=(0,r.v9)((function(e){return e.objectBrowser.previewOpen})),J=(0,r.v9)((function(e){return e.objectBrowser.selectedBucket})),H=(0,r.v9)(on.HQ),V=(0,r.v9)(on.G6),Y=(0,a.useState)(!1),q=(0,m.Z)(Y,2),$=q[0],Q=q[1],X=(0,a.useState)(!1),ee=(0,m.Z)(X,2),ne=ee[0],te=ee[1],ie=(0,a.useState)(!1),oe=(0,m.Z)(ie,2),ae=oe[0],re=oe[1],se=(0,a.useState)(!1),ce=(0,m.Z)(se,2),le=ce[0],de=ce[1],ue=(0,a.useState)(!1),fe=(0,m.Z)(ue,2),me=fe[0],he=fe[1],pe=(0,a.useState)(null),xe=(0,m.Z)(pe,2),be=xe[0],ve=xe[1],je=i.bucketName||"",ge=l.pathname.split("/browser/".concat(je,"/")),_e=2===ge.length?ge[1]:"",Ze=(0,g.IO)(_e),Se=Ze.split("/").filter((function(e){return""!==e})),Te=[je];Se.length>0&&(Te=Te.concat(Se));var we=(0,a.useRef)(null),Ce=(0,a.useRef)(null),Ee=(0,E.F)(je,[N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS]),ye=(0,E.F)(je,[N.Ft.S3_DELETE_OBJECT]),Ie=(0,E.F)(Te,[N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS],!0,!0),Fe=(0,E.F)(je,[N.Ft.S3_DELETE_OBJECT]),ke=(0,r.v9)((function(e){return e.objectBrowser.selectedObjects}));(0,a.useEffect)((function(){t((0,F.G4)("")),t((0,F.Cn)(!0)),t((0,F.S2)([]))}),[y,t]),(0,a.useEffect)((function(){f&&b!==je&&t((0,F._w)())}),[f,b,je,t]),(0,a.useEffect)((function(){null!==Ce.current&&(Ce.current.setAttribute("directory",""),Ce.current.setAttribute("webkitdirectory",""))}),[Ce]),(0,a.useEffect)((function(){if(1===ke.length){var e=ke[0];"none"!==(0,P.Bg)(e)?he(!0):he(!1),e.endsWith("/")?de(!1):de(!0)}else de(!1),he(!1)}),[ke]),(0,a.useEffect)((function(){be||j.Z.invoke("GET","/api/v1/buckets/".concat(je,"/quota")).then((function(e){var n=null;e.quota&&(n=e),ve(n)})).catch((function(e){console.error("Error Getting Quota Status: ",e.detailedError),ve(null)}))}),[be,je]),(0,a.useEffect)((function(){ke.length>0?t((0,F.vb)(!0)):0!==ke.length||null!==w||C||t((0,F.vb)(!1))}),[ke,w,t,C]),(0,a.useEffect)((function(){ae||(t((0,on.d5)(!0)),re(!0))}),[ae,t,re]),(0,a.useEffect)((function(){H&&j.Z.invoke("GET","/api/v1/buckets/".concat(je)).then((function(e){t((0,on.d5)(!1)),t((0,on.f4)(e)),t((0,F.RS)(je))})).catch((function(e){t((0,on.d5)(!1)),t((0,I.Ih)(e))}))}),[je,H,t]),(0,a.useEffect)((function(){""!==J&&j.Z.invoke("GET","/api/v1/buckets/".concat(J,"/retention")).then((function(e){t((0,F.c8)(e))})).catch((function(e){t((0,F.c8)(null))}))}),[J,t]);var Oe=function(e){if(null!==e&&void 0!==e&&null!==e.target.files&&void 0!==e.target.files){e.preventDefault();for(var n=[],t=0;t<e.target.files.length;t++)n.push(e.target.files[t]);Le(n,""),e.target.value=""}},Le=(0,a.useCallback)((function(e,n){var i="";y&&(i=y.endsWith("/")?y:y+"/");!function(e,n,i,o){var a=function(a){return new Promise((function(r,s){var c="api/v1/buckets/".concat(n,"/objects/upload"),l=a.name,d=new Blob([a],{type:a.type}),u="",f=v()(a,"path",""),m=v()(a,"webkitRelativePath",""),h=o,p=(0,Me.YO)(8);if(""!==f?h=f:""!==m&&(h=m),""!==i||""!==h){var x=h.split("/").slice(0,-1).join("/"),b=i.endsWith("/")?i.slice(0,-1):i;u=(0,g.LL)("".concat(b).concat(b.endsWith("/")||""===x||x.startsWith("/")?"":"/").concat(x).concat(!x.endsWith("/")||""===x.trim()&&!i.endsWith("/")?"/":""))}""!==u&&(c="".concat(c,"?prefix=").concat(u));var j=(0,g.LL)("".concat(n,"-").concat(u,"-").concat((new Date).getTime(),"-").concat(Math.random())),_=new XMLHttpRequest;_.open("POST",c,!0);var Z=e.length>1,S="An error occurred while uploading the file".concat(Z?"s":"","."),T={413:"Error - File size too large"};_.withCredentials=!1,_.onload=function(e){if(_.status>=200&&_.status<300)t((0,F.oK)(j)),r({status:_.status}),(0,Me.GM)(p);else{if(T[_.status])S=T[_.status];else if(_.response)try{var n=JSON.parse(_.response);S=n.detailedMessage}catch(i){S="something went wrong"}t((0,F.qJ)({instanceID:j,msg:S})),s({status:_.status,message:S}),(0,Me.GM)(p)}},_.upload.addEventListener("error",(function(e){s(S),t((0,F.qJ)({instanceID:j,msg:"A network error occurred."}))})),_.upload.addEventListener("progress",(function(e){var n=Math.floor(100*e.loaded/e.total);t((0,F.RO)({instanceID:j,progress:n}))})),_.onerror=function(){s(S),t((0,F.qJ)({instanceID:j,msg:"A network error occurred."}))},_.onloadend=function(){0===e.length&&t((0,F.Cn)(!0))},_.onabort=function(){t((0,F.Im)(j))};var w=new FormData;void 0!==a.size&&(w.append(a.size.toString(),d,l),(0,Me.EN)(p,_),t((0,F.Mc)({ID:p,bucketName:n,done:!1,instanceID:j,percentage:0,prefix:"".concat((0,g.IO)(u)).concat(l),type:"upload",waitingForFile:!1,failed:!1,cancelled:!1,errorMessage:""})),(0,Me.N5)(p,w),(0,Me.EN)(p,_))}))},r=[];t((0,F.LD)());for(var s=0;s<e.length;s++){var c=e[s];r.push(a(c))}Promise.allSettled(r).then((function(e){var n=e.filter((function(e){return"rejected"===e.status}));if(n.length>0){var i=r.length,o=r.length-n.length,a={errorMessage:"There were some errors during file upload",detailedError:"Uploaded files ".concat(o,"/").concat(i)};t((0,I.Ih)(a))}t((0,F.Cn)(!0)),t((0,F.S2)([]))}))}(e,je,i,n)}),[je,t,y]),Be=(0,a.useCallback)((function(e){if(e&&e.length>0&&Ie){var n=e[0].path;Le(e,n)}Ie||t((0,I.Ih)({errorMessage:"Upload not allowed",detailedError:(0,N.MK)([N.Ft.S3_PUT_OBJECT,N.Ft.S3_PUT_ACTIONS],"upload objects to this location")}))}),[Le]),Pe=(0,h.uI)({noClick:!0,onDrop:Be}),De=Pe.getRootProps,Ae=Pe.getInputProps,Re=Pe.isDragActive,Ue=Pe.isDragAccept,ze=(0,a.useMemo)((function(){return(0,o.Z)((0,o.Z)((0,o.Z)({},Zn),Re?Sn:{}),Ue?Tn:{})}),[Re,Ue]),Ke=function(e){if(t((0,F.EE)(null)),t((0,F.db)({status:!1})),T&&null!==w){var n=(0,g.IO)(_e).split("/");n.pop();var i="";n&&n.length>0&&(i="".concat(n.join("/"),"/")),c("/browser/".concat(je,"/").concat((0,g.LL)(i)))}t((0,F.vb)(!1)),t((0,F.S2)([])),e&&t((0,F.Cn)(!0))},We=x.ou.now();null!==V&&void 0!==V&&V.creation_date&&(We=x.ou.fromISO(V.creation_date));var He=[{action:function(){t(hn(je))},label:"Download",disabled:!Ee||0===(null===ke||void 0===ke?void 0:ke.length),icon:(0,O.jsx)(p._8t,{}),tooltip:Ee?"Download Selected":(0,N.MK)([N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS],"download objects from this bucket")},{action:function(){t(xn())},label:"Share",disabled:1!==ke.length||!le,icon:(0,O.jsx)(p.aAc,{}),tooltip:le?"Share Selected File":"Sharing unavailable"},{action:function(){t(pn())},label:"Preview",disabled:1!==ke.length||!me,icon:(0,O.jsx)(p.P99,{}),tooltip:me?"Preview Selected File":"Preview unavailable"},{action:function(){Q(!0)},label:"Delete",icon:(0,O.jsx)(p.pJl,{}),disabled:!ye||0===ke.length||!Fe,tooltip:ye?"Delete Selected Files":(0,N.MK)([N.Ft.S3_DELETE_OBJECT],"delete objects in this bucket")}];return(0,O.jsxs)(a.Fragment,{children:[z&&M&&(0,O.jsx)(vn,{open:z,closeModalAndRefresh:function(){t((0,F.Qf)(!1)),t((0,F.eP)(null))},bucketName:je,dataObject:{name:M.name,last_modified:"",version_id:M.version_id}}),$&&(0,O.jsx)(bn,{deleteOpen:$,selectedBucket:je,selectedObjects:ke,closeDeleteModalAndRefresh:function(e){Q(!1),e&&(t((0,I.y1)("Objects deleted successfully.")),t((0,F.S2)([])),t((0,F.Cn)(!0)))},versioning:L}),ne&&(0,O.jsx)(jn,{open:ne,closeModalAndRefresh:function(){te(!1)},bucketName:je}),K&&(0,O.jsx)(gn,{open:K,bucketName:je,object:M,onClosePreview:function(){t((0,F.ei)(!1)),t((0,F.eP)(null))}}),!!U&&(0,O.jsx)(Ge,{open:!!U,closeModal:function(){t((0,F.$y)(null))},currentItem:(null===(e=U.name.split("/"))||void 0===e?void 0:e.pop())||"",bucketName:je,internalPaths:_e,actualInfo:{name:U.name,last_modified:"",version_id:U.version_id,size:U.size.toString()}}),(0,O.jsxs)(A.Z,{variant:"full",children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.screenTitleContainer,children:(0,O.jsx)(D.Z,{className:n.screenTitle,icon:(0,O.jsx)("span",{className:n.listIcon,children:(0,O.jsx)(p.wNb,{})}),title:(0,O.jsx)("span",{className:n.titleSpacer,children:je}),subTitle:(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.bucketDetails,children:[(0,O.jsxs)("span",{className:n.detailsSpacer,children:["Created on:\xa0\xa0",(0,O.jsx)("strong",{children:null!==V&&void 0!==V&&V.creation_date?We.toFormat("ccc, LLL dd yyyy HH:mm:ss (ZZZZ)"):""})]}),(0,O.jsxs)("span",{className:n.detailsSpacer,children:["Access:\xa0\xa0\xa0",(0,O.jsx)("strong",{children:(null===V||void 0===V?void 0:V.access)||""})]}),V&&(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)("span",{className:n.detailsSpacer,children:[V.size&&(0,O.jsx)(a.Fragment,{children:(0,g.l5)(V.size)}),V.size&&be&&(0,O.jsxs)(a.Fragment,{children:[" / ",(0,g.l5)(be.quota)]}),V.size&&V.objects?" - ":"",V.objects&&(0,O.jsxs)(a.Fragment,{children:[V.objects,"\xa0Object",V.objects&&1!==V.objects?"s":""]})]})})]})}),actions:(0,O.jsx)(a.Fragment,{children:(0,O.jsxs)("div",{className:n.actionsSection,children:[(0,O.jsx)(k.Z,{tooltip:"Rewind Bucket",children:(0,O.jsx)(p.zxk,{id:"rewind-objects-list",label:"Rewind",icon:(0,O.jsx)(_.Z,{badgeContent:" ",color:"secondary",variant:"dot",invisible:!f,className:n.badgeOverlap,sx:{height:16},children:(0,O.jsx)(p.F_y,{style:{minWidth:16,minHeight:16,width:16,height:16,marginTop:-3}})}),variant:"regular",onClick:function(){te(!0)},disabled:!L||!(0,E.F)(je,[N.Ft.S3_GET_OBJECT,N.Ft.S3_GET_ACTIONS])})}),(0,O.jsx)(k.Z,{tooltip:"Reload List",children:(0,O.jsx)(p.zxk,{id:"refresh-objects-list",label:"Refresh",icon:(0,O.jsx)(p.DuK,{}),variant:"regular",onClick:function(){Z?t((0,F.Eq)(!0)):(t((0,F.o_)()),t((0,F._D)(!0)),t((0,F.Cn)(!0)))},disabled:!(0,E.F)(je,[N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET])||f})}),(0,O.jsx)("input",{type:"file",multiple:!0,onChange:Oe,style:{display:"none"},ref:we}),(0,O.jsx)("input",{type:"file",multiple:!0,onChange:Oe,style:{display:"none"},ref:Ce}),(0,O.jsx)(G,{bucketName:je,uploadPath:Te.join("/"),uploadFileFunction:function(e){we&&we.current&&we.current.click(),e()},uploadFolderFunction:function(e){Ce&&Ce.current&&Ce.current.click(),e()}})]})})})}),(0,O.jsxs)("div",(0,o.Z)((0,o.Z)({id:"object-list-wrapper"},De({style:(0,o.Z)({},ze)})),{},{children:[(0,O.jsx)("input",(0,o.Z)({},Ae())),(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.tableBlock,sx:{border:"#EAEDEE 1px solid",borderTop:0},children:[Z?(0,O.jsx)(a.Fragment,{children:null!==w&&(0,O.jsx)(tn,{internalPaths:w,bucketName:je})}):(0,O.jsx)(E.s,{scopes:[N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET],resource:je,errorProps:{disabled:!0},children:(0,O.jsxs)(d.ZP,{item:!0,xs:12,className:n.fullContainer,children:[(0,O.jsx)(d.ZP,{item:!0,xs:12,className:n.breadcrumbsContainer,children:(0,O.jsx)(B,{bucketName:je,internalPaths:Ze,additionalOptions:!L||f?null:(0,O.jsx)("div",{children:(0,O.jsx)(Ye.Z,{name:"deleted_objects",id:"showDeletedObjects",value:"deleted_on",label:"Show deleted objects",onChange:function(){t((0,F.o_)()),t((0,F.mz)(!S)),Ke(!0)},checked:S,overrideLabelClasses:n.labelStyle,className:n.overrideShowDeleted,noTopMargin:!0})}),hidePathButton:!1})}),(0,O.jsx)(fn,{})]})}),(0,O.jsx)(E.s,{scopes:[N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET],resource:je,errorProps:{disabled:!0},children:(0,O.jsxs)(W,{open:T,closePanel:function(){Ke(!1)},className:"".concat(Z?n.hideListOnSmall:""),children:[ke.length>0&&(0,O.jsx)(Ne,{items:He,title:"Selected Objects:"}),null!==w&&(0,O.jsx)(Je,{internalPaths:w,bucketName:je,onClosePanel:Ke,versioning:L,locking:R})]})})]})]}))]})]})},Cn=t(32291),En=t(84669),Nn=t(59114),yn=t(73996),In=t(49535),Fn=t(26824),kn=0,On=0,Ln=!1,Bn=function e(n,t){if(!Ln){Ln=!0;var o=new URL(window.location.toString()),a=o.port,r=new URL(document.baseURI).pathname,s=(0,Fn.x2)(o.protocol);(i=new WebSocket("".concat(s,"://").concat(o.hostname,":").concat(a).concat(r,"ws/objectManager"))).onopen=function(){Ln=!1,n&&n(),On=0},t&&(i.onmessage=t);var c=function(){On<=5?(e(n,t),On+=1):console.error("Websocket not available.")};i.onclose=function(){Ln=!1,console.warn("Websocket Disconnected. Attempting Reconnection..."),setTimeout(c,3e3)},i.onerror=function(){Ln=!1,console.error("Error in websocket connection. Attempting reconnection..."),setTimeout(c,3e3)}}},Pn=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)({},(0,f.Bz)(e.spacing(4))))}))((function(){var e=(0,u.TL)(),n=(0,s.s0)(),t=(0,s.UO)(),o=(0,s.TH)(),c=(0,r.v9)((function(e){return e.objectBrowser.loadingVersioning})),l=(0,r.v9)((function(e){return e.objectBrowser.versionsMode})),f=(0,r.v9)((function(e){return e.objectBrowser.searchObjects})),m=(0,r.v9)((function(e){return e.objectBrowser.versionedFile})),h=(0,r.v9)((function(e){return e.objectBrowser.searchVersions})),x=(0,r.v9)((function(e){return e.objectBrowser.rewind.rewindEnabled})),b=(0,r.v9)((function(e){return e.objectBrowser.rewind.dateToRewind})),v=(0,r.v9)((function(e){return e.objectBrowser.showDeleted})),_=(0,r.v9)((function(e){return e.console.session.allowResources})),Z=(0,r.v9)((function(e){return e.objectBrowser.loadingObjects})),S=(0,r.v9)((function(e){return e.objectBrowser.loadingLocking})),T=(0,r.v9)((function(e){return e.objectBrowser.loadRecords})),w=(0,r.v9)((function(e){return e.objectBrowser.selectedInternalPaths})),C=(0,r.v9)((function(e){return e.objectBrowser.simplePath})),y=(0,r.v9)((function(e){return e.objectBrowser.isOpeningObjectDetail})),L=(0,r.v9)(dn.$4),B=t.bucketName||"",D=o.pathname.split("/browser/".concat(B,"/")),A=2===D.length?D[1]:"",R=!(null===L||void 0===L||!L.includes("object-browser-only")),U=(0,a.useCallback)((function(n){e((0,F.Cn)(!1));var t=JSON.parse(n.data.toString());if(kn===t.request_id){if(t.request_id!==kn)return;if("The Access Key Id you provided does not exist in our records."===t.error)window.location.reload();else if("Access Denied."===t.error){var i=t.prefix,o="";if(i){var a=(0,g.IO)(i);o=a.endsWith("/")?a:a+"/"}var r=(0,P.kh)(B,o,_||[]);return void(r&&0!==r.length?e((0,F.ZJ)(r)):e((0,I.Ih)({errorMessage:t.error,detailedError:t.error})))}if(t.request_end)return e((0,F.Cn)(!1)),void e((0,F._D)(!1));t.data&&e((0,F.rW)(t.data))}}),[e,_,B]),M=(0,a.useCallback)((function(n,t){if(i&&1===i.readyState)try{var o=kn+1;e((0,F.o_)());var a={bucket_name:B,prefix:(0,g.LL)(n),mode:x||v?"rewind":"objects",date:t.toISOString(),request_id:o};i.send(JSON.stringify(a)),kn=o}catch(r){console.error(r)}else{Bn((function(){M(n,t)}),U)}}),[B,x,v,e,U]);(0,a.useEffect)((function(){return function(){var e={mode:"cancel",request_id:kn};i&&1===i.readyState&&i.send(JSON.stringify(e))}}),[]),(0,a.useEffect)((function(){var n=(0,g.IO)(A);e((0,F.IJ)(!0)),n.endsWith("/")||""===n?(e((0,F.vb)(!1)),e((0,F.EE)(null)),e((0,F.Su)(""===n?"/":n))):(e((0,F.vH)(!0)),e((0,F.vb)(!0)),e((0,F.Eq)(!0)),e((0,F.EE)("".concat(n?"".concat((0,g.LL)(n)):""))),e((0,F.Su)("".concat(n.split("/").slice(0,-1).join("/"),"/"))))}),[A,b,x,e]),(0,a.useEffect)((function(){if(!Z&&!T&&!x&&!y){var n=(0,g.IO)(A);if(!n.endsWith("/")&&C!==n&&""!==n){(0,F._D)(!0);var t="".concat(n.split("/").slice(0,-1).join("/"),"/");M(t,new Date)}}e((0,F.d_)(!1))}),[Z,T,e,A,M,x,C]);var z=(0,In.Z)(B,[N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET]);(0,a.useEffect)((function(){if(Z&&z){var n="";if(A){var t=(0,g.IO)(A);n=w===A?"".concat((0,g.IO)(A).split("/").slice(0,-1).join("/"),"/"):t.endsWith("/")?t:t+"/"}var i=new Date;x&&b&&(i=b),M(n,i)}else e((0,F.Cn)(!1))}),[Z,A,e,b,x,z,M]),(0,a.useEffect)((function(){e((0,F.db)({status:!1}))}),[A,e]),(0,a.useEffect)((function(){c&&(z?j.Z.invoke("GET","/api/v1/buckets/".concat(B,"/versioning")).then((function(n){e((0,F.lS)(n.is_versioned)),e((0,F.IJ)(!1))})).catch((function(n){console.error("Error Getting Object Versioning Status: ",n.detailedError),e((0,F.IJ)(!1))})):(e((0,F.IJ)(!1)),e((0,F.o_)())))}),[B,c,e,z]),(0,a.useEffect)((function(){S&&(z?j.Z.invoke("GET","/api/v1/buckets/".concat(B,"/object-locking")).then((function(n){e((0,F.lY)(n.object_locking_enabled)),e((0,F.Jn)(!1))})).catch((function(n){console.error("Error Getting Object Locking Status: ",n.detailedError),e((0,F.Jn)(!1))})):(e((0,F.o_)()),e((0,F.Jn)(!1))))}),[B,S,e,z]),(0,a.useEffect)((function(){S&&(z?j.Z.invoke("GET","/api/v1/buckets/".concat(B,"/object-locking")).then((function(n){e((0,F.lY)(n.object_locking_enabled)),(0,F.Jn)(!1)})).catch((function(e){console.error("Error Getting Object Locking Status: ",e.detailedError),(0,F.Jn)(!1)})):(e((0,F.o_)()),(0,F.Jn)(!1)))}),[B,S,e,z]);var G=(0,In.Z)(B,[N.Ft.S3_GET_BUCKET_POLICY,N.Ft.S3_PUT_BUCKET_POLICY,N.Ft.S3_GET_BUCKET_VERSIONING,N.Ft.S3_PUT_BUCKET_VERSIONING,N.Ft.S3_GET_BUCKET_ENCRYPTION_CONFIGURATION,N.Ft.S3_PUT_BUCKET_ENCRYPTION_CONFIGURATION,N.Ft.S3_DELETE_BUCKET,N.Ft.S3_GET_BUCKET_NOTIFICATIONS,N.Ft.S3_PUT_BUCKET_NOTIFICATIONS,N.Ft.S3_GET_REPLICATION_CONFIGURATION,N.Ft.S3_PUT_REPLICATION_CONFIGURATION,N.Ft.S3_GET_LIFECYCLE_CONFIGURATION,N.Ft.S3_PUT_LIFECYCLE_CONFIGURATION,N.Ft.ADMIN_GET_BUCKET_QUOTA,N.Ft.ADMIN_SET_BUCKET_QUOTA,N.Ft.S3_PUT_BUCKET_TAGGING,N.Ft.S3_GET_BUCKET_TAGGING,N.Ft.S3_LIST_BUCKET_VERSIONS,N.Ft.S3_GET_BUCKET_POLICY_STATUS,N.Ft.S3_DELETE_BUCKET_POLICY,N.Ft.S3_GET_ACTIONS,N.Ft.S3_PUT_ACTIONS]),K=(0,O.jsx)(a.Fragment,{children:l?(0,O.jsx)(a.Fragment,{children:(0,O.jsx)(Nn.Z,{placeholder:"Start typing to filter versions of ".concat(m),onChange:function(n){e((0,F.Pr)(n))},value:h})}):(0,O.jsx)(E.s,{scopes:[N.Ft.S3_LIST_BUCKET,N.Ft.S3_ALL_LIST_BUCKET],resource:B,errorProps:{disabled:!0},children:(0,O.jsx)(Nn.Z,{placeholder:"Start typing to filter objects in the bucket",onChange:function(n){e((0,F.G4)(n))},value:f})})});return(0,O.jsxs)(a.Fragment,{children:[R?(0,O.jsxs)(d.ZP,{container:!0,sx:{padding:"20px 32px 0"},children:[(0,O.jsx)(d.ZP,{children:(0,O.jsx)(yn.Z,{marginRight:30,marginTop:10})}),(0,O.jsx)(d.ZP,{item:!0,xs:!0,children:K})]}):(0,O.jsx)(Cn.Z,{label:(0,O.jsx)(En.Z,{label:"Object Browser",to:N.gA.OBJECT_BROWSER_VIEW}),actions:(0,O.jsx)(E.s,{scopes:N.D[N.EI.BUCKET_ADMIN],resource:B,errorProps:{disabled:!0},children:(0,O.jsx)(k.Z,{tooltip:G?"Configure Bucket":"You do not have the required permissions to configure this bucket. Please contact your MinIO administrator to request "+N.EI.BUCKET_ADMIN+" permisions.",children:(0,O.jsx)(p.zxk,{id:"configure-bucket-main",color:"primary","aria-label":"Configure Bucket",onClick:function(){n("/buckets/".concat(B,"/admin"))},icon:(0,O.jsx)(p.ewm,{style:{width:20,height:20,marginTop:-3}}),style:{padding:"0 10px"}})})}),middleComponent:K}),(0,O.jsx)(d.ZP,{children:(0,O.jsx)(wn,{})})]})}))},34433:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var i=t(29439),o=t(1413),a=t(72791),r=t(78687),s=t(75952),c=t(11135),l=t(25787),d=t(78029),u=t.n(d),f=t(61889),m=t(40986),h=t(23814),p=t(81207),x=t(56028),b=t(64163),v=t(30829),j=t(99779),g=t(21435),_=t(80184),Z=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)((0,o.Z)({},h.YI),h.Hr),{},{labelContainer:{display:"flex",alignItems:"center",marginBottom:15},fieldContainer:(0,o.Z)((0,o.Z)({},h.YI.fieldContainer),{},{display:"flex",alignItems:"center",justifyContent:"space-between",paddingBottom:10,marginTop:11,marginBottom:6}),dateInputContainer:{margin:"0 10px"},durationInputs:{display:"flex",alignItems:"center",justifyContent:"flex-start"},validityIndicator:{display:"flex",alignItems:"center",justifyContent:"flex-start",marginTop:25,marginLeft:10},invalidDurationText:{marginTop:15,display:"flex",color:"red",fontSize:11},reverseInput:{flexFlow:"row-reverse","& > label":{fontWeight:400,marginLeft:15,marginRight:25}},validityText:{fontSize:14,marginTop:15,display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{flexFlow:"column"},"& > .min-icon":{color:"#5E5E5E",width:15,height:15,marginRight:10}},validTill:{fontWeight:"bold",marginLeft:15}}))}))((function(e){var n=e.classes,t=e.id,o=e.initialDate,r=e.label,c=e.maxDays,l=e.entity,d=e.onChange,u=(0,a.useState)(7),m=(0,i.Z)(u,2),h=m[0],p=m[1],x=(0,a.useState)(0),b=(0,i.Z)(x,2),Z=b[0],S=b[1],T=(0,a.useState)(0),w=(0,i.Z)(T,2),C=w[0],E=w[1],N=(0,a.useState)(!0),y=(0,i.Z)(N,2),I=y[0],F=y[1],k=(0,a.useState)(j.ou.now()),O=(0,i.Z)(k,2),L=O[0],B=O[1];(0,a.useEffect)((function(){isNaN(Z)||isNaN(h)||isNaN(C)||B(function(e,n,t,i){return j.ou.fromJSDate(e).plus({days:n,hours:t,minutes:i})}(o,h,Z,C))}),[o,h,Z,C]),(0,a.useEffect)((function(){if(I){var e=L.toFormat("yyyy-MM-dd HH:mm:ss");d(e.split(" ").join("T"),!0)}else d("0000-00-00",!1)}),[L,d,I]),(0,a.useEffect)((function(){var e=!0;(h<0||c&&h>c||isNaN(h))&&(e=!1),(Z<0||Z>23||isNaN(Z))&&(e=!1),(C<0||C>59||isNaN(C))&&(e=!1),!c||h!==c||0===Z&&0===C||(e=!1),F(e)}),[L,c,d,h,Z,C]);var P={style:{textAlign:"center",paddingRight:10,paddingLeft:10,width:25},className:"removeArrows"};return(0,_.jsx)(a.Fragment,{children:(0,_.jsxs)(f.ZP,{container:!0,className:n.fieldContainer,children:[(0,_.jsx)(f.ZP,{item:!0,xs:12,className:n.labelContainer,children:(0,_.jsx)(v.Z,{htmlFor:t,className:n.inputLabel,sx:{marginLeft:"10px"},children:(0,_.jsx)("span",{children:r})})}),(0,_.jsxs)(f.ZP,{item:!0,xs:12,className:n.durationInputs,children:[(0,_.jsx)(f.ZP,{item:!0,className:n.dateInputContainer,children:(0,_.jsx)(g.Z,{id:t,className:n.reverseInput,type:"number",min:"0",max:c?c.toString():"999",label:"Days",name:t,onChange:function(e){p(parseInt(e.target.value))},value:h.toString(),extraInputProps:P,noLabelMinWidth:!0})}),(0,_.jsx)(f.ZP,{item:!0,className:n.dateInputContainer,children:(0,_.jsx)(g.Z,{id:t,className:n.reverseInput,type:"number",min:"0",max:"23",label:"Hours",name:t,onChange:function(e){S(parseInt(e.target.value))},value:Z.toString(),extraInputProps:P,noLabelMinWidth:!0})}),(0,_.jsx)(f.ZP,{item:!0,className:n.dateInputContainer,children:(0,_.jsx)(g.Z,{id:t,className:n.reverseInput,type:"number",min:"0",max:"59",label:"Minutes",name:t,onChange:function(e){E(parseInt(e.target.value))},value:C.toString(),extraInputProps:P,noLabelMinWidth:!0})})]}),(0,_.jsx)(f.ZP,{item:!0,xs:12,className:"".concat(n.validityIndicator," ").concat(n.formFieldRow),children:I?(0,_.jsxs)("div",{className:n.validityText,children:[(0,_.jsx)(s.xPt,{}),(0,_.jsxs)("div",{className:n.validityLabel,children:[l," will be available until:"]})," ",(0,_.jsx)("div",{className:n.validTill,children:L.toFormat("MM/dd/yyyy HH:mm:ss")})]}):(0,_.jsx)("div",{className:n.invalidDurationText,children:"Please select a valid duration."})})]})})})),S=t(45248),T=t(87995),w=t(25469),C=(0,l.Z)((function(e){return(0,c.Z)((0,o.Z)((0,o.Z)({shareLinkInfo:{fontSize:14,fontWeight:400},copyShareLink:{display:"flex","@media (max-width: 900px)":{flexFlow:"column",alignItems:"center",justifyContent:"center"}},copyShareLinkInput:{"& div:first-child":{marginTop:0},"@media (max-width: 900px)":{minWidth:250}},copyShareLinkBtn:{display:"flex",alignItems:"center",justifyContent:"center","@media (max-width: 900px)":{marginTop:10}}},h.ID),h.DF))}))((function(e){var n=e.classes,t=e.open,o=e.closeModalAndRefresh,c=e.bucketName,l=e.dataObject,d=(0,w.TL)(),h=(0,r.v9)(T.N5),v=(0,a.useState)(""),j=(0,i.Z)(v,2),g=j[0],C=j[1],E=(0,a.useState)(!0),N=(0,i.Z)(E,2),y=N[0],I=N[1],F=(0,a.useState)(!1),k=(0,i.Z)(F,2),O=k[0],L=k[1],B=(0,a.useState)(""),P=(0,i.Z)(B,2),D=P[0],A=P[1],R=(0,a.useState)(!0),U=(0,i.Z)(R,2),M=U[0],z=U[1],G=(0,a.useState)("null"),K=(0,i.Z)(G,2),J=K[0],W=K[1],H=new Date;return(0,a.useEffect)((function(){if(void 0===l.version_id)return h?(p.Z.invoke("GET","/api/v1/buckets/".concat(c,"/objects?prefix=").concat((0,S.LL)(l.name)).concat(h?"&with_versions=true":"")).then((function(e){var n=(e.objects||[]).find((function(e){return e.is_latest}));W(n?"".concat(n.version_id):"null")})).catch((function(e){d((0,T.zb)(e))})),void I(!1)):(W("null"),void I(!1));W(l.version_id||"null"),I(!1)}),[c,l,h,d]),(0,a.useEffect)((function(){if(M&&!y){L(!0),C("");var e=new Date("".concat(D)),n=new Date,t=Math.ceil((e.getTime()-n.getTime())/1e3);t>0&&p.Z.invoke("GET","/api/v1/buckets/".concat(c,"/objects/share?prefix=").concat((0,S.LL)(l.name),"&version_id=").concat(J).concat(""!==D?"&expires=".concat(t,"s"):"")).then((function(e){C(e),L(!1)})).catch((function(e){d((0,T.zb)(e)),C(""),L(!1)}))}}),[l,D,c,M,C,d,h,y,J]),(0,_.jsx)(a.Fragment,{children:(0,_.jsxs)(x.Z,{title:"Share File",titleIcon:(0,_.jsx)(s.aAc,{style:{fill:"#4CCB92"}}),modalOpen:t,onClose:function(){o()},children:[y&&(0,_.jsx)(f.ZP,{item:!0,xs:12,children:(0,_.jsx)(m.Z,{})}),!y&&(0,_.jsxs)(a.Fragment,{children:[(0,_.jsxs)(f.ZP,{item:!0,xs:12,className:n.shareLinkInfo,children:["This is a temporary URL with integrated access credentials for sharing objects valid for up to 7 days.",(0,_.jsx)("br",{}),(0,_.jsx)("br",{}),"The temporary URL expires after the configured time limit."]}),(0,_.jsx)("br",{}),(0,_.jsx)(f.ZP,{item:!0,xs:12,className:n.dateContainer,children:(0,_.jsx)(Z,{initialDate:H,id:"date",label:"Active for",maxDays:7,onChange:function(e,n){z(n),n?A(e):(A(""),C(""))},entity:"Link"})}),(0,_.jsx)(f.ZP,{item:!0,xs:12,className:"".concat(n.copyShareLink," ").concat(n.formFieldRow," "),children:(0,_.jsx)(f.ZP,{item:!0,xs:12,className:n.copyShareLinkInput,children:(0,_.jsx)(b.Z,{content:g,actionButton:(0,_.jsx)(u(),{text:g,children:(0,_.jsx)(s.zxk,{id:"copy-path",variant:"regular",onClick:function(){d((0,T.MK)("Share URL Copied to clipboard"))},disabled:""===g||O,style:{marginRight:"5px",width:"28px",height:"28px",padding:"0px"},icon:(0,_.jsx)(s.TIy,{})})})})})})]})]})})}))},78562:function(e,n,t){t.r(n),t.d(n,{default:function(){return b}});var i=t(72791),o=t(56028),a=t(4942),r=t(29439),s=t(11135),c=t(25787),l=t(61889),d=t(40986),u=t(47922),f=t(45248),m=t(28182),h=t(80184),p=(0,c.Z)((function(){return(0,s.Z)({iframeContainer:{border:"0px",flex:"1 1 auto",width:"100%",height:250,backgroundColor:"transparent",borderRadius:5,"&.image":{height:500},"&.text":{height:700},"&.audio":{height:150},"&.video":{height:350},"&.fullHeight":{height:"calc(100vh - 185px)"}},iframeBase:{backgroundColor:"#fff"},iframeHidden:{display:"none"}})}))((function(e){var n=e.bucketName,t=e.object,o=e.isFullscreen,s=void 0!==o&&o,c=e.classes,p=(0,i.useState)(!0),x=(0,r.Z)(p,2),b=x[0],v=x[1],j="";if(t){var g=(0,f.LL)(t.name),_=document.baseURI.replace(window.location.origin,"");j="".concat(window.location.origin).concat(_,"api/v1/buckets/").concat(n,"/objects/download?preview=true&prefix=").concat(g),t.version_id&&(j=j.concat("&version_id=".concat(t.version_id)))}var Z=(0,u.Bg)((null===t||void 0===t?void 0:t.name)||""),S=function(){v(!1)};return(0,h.jsxs)(i.Fragment,{children:[b&&(0,h.jsx)(l.ZP,{item:!0,xs:12,children:(0,h.jsx)(d.Z,{})}),(0,h.jsxs)("div",{style:{textAlign:"center"},children:["video"===Z&&(0,h.jsx)("video",{style:{width:"auto",height:"auto",maxWidth:"calc(100vw - 100px)",maxHeight:"calc(100vh - 200px)"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:S,children:(0,h.jsx)("source",{src:j,type:"video/mp4"})}),"audio"===Z&&(0,h.jsx)("audio",{style:{width:"100%",height:"auto"},autoPlay:!0,controls:!0,muted:!1,playsInline:!0,onPlay:S,children:(0,h.jsx)("source",{src:j,type:"audio/mpeg"})}),"image"===Z&&(0,h.jsx)("img",{style:{width:"auto",height:"auto",maxWidth:"100vw",maxHeight:"100vh"},src:j,alt:"preview",onLoad:S}),"video"!==Z&&"audio"!==Z&&"image"!==Z&&(0,h.jsx)("div",{className:(0,m.Z)(c.iframeBase,(0,a.Z)({},c.iframeHidden,b)),children:(0,h.jsx)("iframe",{src:j,title:"File Preview",allowTransparency:!0,className:"".concat(c.iframeContainer," ").concat(s?"fullHeight":Z),onLoad:S,children:"File couldn't be loaded. Please try Download instead"})})]})]})})),x=t(75952),b=function(e){var n=e.open,t=e.bucketName,a=e.object,r=e.onClosePreview;return(0,h.jsx)(i.Fragment,{children:(0,h.jsx)(o.Z,{modalOpen:n,title:"Preview - ".concat(null===a||void 0===a?void 0:a.name),onClose:r,wideLimit:!1,titleIcon:(0,h.jsx)(x.$30,{}),children:(0,h.jsx)(p,{bucketName:t,object:a})})})}},47922:function(e,n,t){t.d(n,{Bg:function(){return r},LR:function(){return a},P_:function(){return s},kh:function(){return c}});var i=t(45248),o=t(76610),a=function(e,n,t,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,d=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,f=document.createElement("a");document.body.appendChild(f);var m=document.baseURI.replace(window.location.origin,""),h="".concat(window.location.origin).concat(m,"api/v1/buckets/").concat(e,"/objects/download?prefix=").concat(n).concat(null!==r&&""!==r.trim()?"&override_file_name=".concat((0,i.LL)(r||"")):"");t&&(h=h.concat("&version_id=".concat(t)));var p=new XMLHttpRequest;return p.open("GET",h,!0),p.addEventListener("progress",(function(e){var n=Math.round(e.loaded/a*100);c&&c(n)}),!1),p.responseType="blob",p.onreadystatechange=function(){if(4===p.readyState)if(200===p.status){var e=p.getResponseHeader("Content-Disposition"),n="download";if(e)n=decodeURIComponent(e).split('"')[1];l&&l(),(0,o.GM)(s);var t=document.createElement("a");t.href=window.URL.createObjectURL(p.response),t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t)}else{if("application/json"===p.getResponseHeader("Content-Type")){var i=JSON.parse(p.response);if(i.detailedMessage)return void d(i.detailedMessage)}d("Unexpected response status code (".concat(p.status,")."))}},p.onerror=function(){d&&d("A network error occurred.")},p.onabort=function(){u&&u()},p},r=function(e){var n=e.split(".").pop();return n?(n=n.toLowerCase(),["jif","jfif","apng","avif","svg","webp","bmp","ico","jpg","jpe","jpeg","gif","png","heic"].includes(n)?"image":["pdf","txt","json"].includes(n)?"text":["wav","mp3","alac","aiff","dsd","pcm"].includes(n)?"audio":["mp4","avi","mpg","webm","mov","flv","mkv","wmv","avchd","mpeg-4"].includes(n)?"video":"none"):"none"},s=function(e){switch(e){case"name":return function(e,n){return e.name.localeCompare(n.name)};case"last_modified":return function(e,n){return new Date(e.last_modified).getTime()-new Date(n.last_modified).getTime()};case"size":return function(e,n){return(e.size||-1)-(n.size||-1)}}},c=function(e,n,t){if(0===t.length)return null;var i=t.filter((function(n){return n.resource.endsWith(":".concat(e))||n.resource.includes(":".concat(e,"/"))}));if(0===i.length)return null;var o=[],a=n.split("/");return i.forEach((function(e){var n=(e.resource.split(":").pop()||"").split("/");n.length>1&&n.every((function(e,n){return"*"!==e&&((!a[n]||a[n]===e)&&(a[n]||o.push({name:"".concat(e,"/"),size:0,last_modified:"",version_id:""}),!0))})),"StringEquals"!==e.conditionOperator&&"StringLike"!==e.conditionOperator||e.prefixes.forEach((function(e){if(""!==e){var n=e.split("/"),t=[];n.every((function(e,n){return!e.includes("*")&&""!==e&&(e!==a[n]?(o.push({name:"".concat(t.join("/")).concat(t.length>0?"/":"").concat(e,"/"),size:0,last_modified:"",version_id:""}),!1):(""!==e&&t.push(e),!0))}))}}))})),o}},75578:function(e,n,t){var i=t(1413),o=t(72791),a=t(80184);n.Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;function t(t){return(0,a.jsx)(o.Suspense,{fallback:n,children:(0,a.jsx)(e,(0,i.Z)({},t))})}return t}},64163:function(e,n,t){var i=t(1413),o=t(72791),a=t(61889),r=t(11135),s=t(25787),c=t(23814),l=t(80184);n.Z=(0,s.Z)((function(e){return(0,r.Z)((0,i.Z)({},c.xx))}))((function(e){var n=e.classes,t=e.label,i=void 0===t?"":t,r=e.content,s=e.multiLine,c=void 0!==s&&s,d=e.actionButton;return(0,l.jsx)(o.Fragment,{children:(0,l.jsxs)(a.ZP,{className:n.prefinedContainer,children:[""!==i&&(0,l.jsx)(a.ZP,{item:!0,xs:12,className:n.predefinedTitle,children:i}),(0,l.jsxs)(a.ZP,{item:!0,xs:12,className:"".concat(n.predefinedList," ").concat(d?n.includesActionButton:""),children:[(0,l.jsx)(a.ZP,{item:!0,xs:12,className:c?n.innerContentMultiline:n.innerContent,children:r}),d&&(0,l.jsx)("div",{className:n.overlayShareOption,children:d})]})]})})}))},56028:function(e,n,t){var i=t(29439),o=t(1413),a=t(72791),r=t(78687),s=t(13400),c=t(55646),l=t(5574),d=t(65661),u=t(39157),f=t(11135),m=t(25787),h=t(23814),p=t(25469),x=t(29823),b=t(28057),v=t(87995),j=t(80184);n.Z=(0,m.Z)((function(e){return(0,f.Z)((0,o.Z)((0,o.Z)({},h.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},h.sN))}))((function(e){var n=e.onClose,t=e.modalOpen,f=e.title,m=e.children,h=e.classes,g=e.wideLimit,_=void 0===g||g,Z=e.noContentPadding,S=e.titleIcon,T=void 0===S?null:S,w=(0,p.TL)(),C=(0,a.useState)(!1),E=(0,i.Z)(C,2),N=E[0],y=E[1],I=(0,r.v9)((function(e){return e.system.modalSnackBar}));(0,a.useEffect)((function(){w((0,v.MK)(""))}),[w]),(0,a.useEffect)((function(){if(I){if(""===I.message)return void y(!1);"error"!==I.type&&y(!0)}}),[I]);var F=_?{classes:{paper:h.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},k="";return I&&(k=I.detailedErrorMsg,(""===I.detailedErrorMsg||I.detailedErrorMsg.length<5)&&(k=I.message)),(0,j.jsxs)(l.Z,(0,o.Z)((0,o.Z)({open:t,classes:h},F),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:h.root,children:[(0,j.jsxs)(d.Z,{className:h.title,children:[(0,j.jsxs)("div",{className:h.titleText,children:[T," ",f]}),(0,j.jsx)("div",{className:h.closeContainer,children:(0,j.jsx)(s.Z,{"aria-label":"close",id:"close",className:h.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,j.jsx)(x.Z,{})})})]}),(0,j.jsx)(b.Z,{isModal:!0}),(0,j.jsx)(c.Z,{open:N,className:h.snackBarModal,onClose:function(){y(!1),w((0,v.MK)(""))},message:k,ContentProps:{className:"".concat(h.snackBar," ").concat(I&&"error"===I.type?h.errorSnackBar:"")},autoHideDuration:I&&"error"===I.type?1e4:5e3}),(0,j.jsx)(u.Z,{className:Z?"":h.content,children:m})]}))}))},73669:function(e,n,t){var i=t(29439),o=t(72791),a=t(64554),r=t(75952),s=t(21435),c=t(80184);n.Z=function(e){var n=e.value,t=(0,o.useState)(!1),l=(0,i.Z)(t,2),d=l[0],u=l[1];return(0,c.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",flexFlow:{sm:"row",xs:"column"}},children:[(0,c.jsx)(s.Z,{id:"inspect-dec-key",name:"inspect-dec-key",placeholder:"",label:"",type:d?"text":"password",onChange:function(){},value:n,overlayIcon:(0,c.jsx)(r.TIy,{}),extraInputProps:{readOnly:!0},overlayAction:function(){return navigator.clipboard.writeText(n)}}),(0,c.jsx)(r.zxk,{id:"show-hide-key",style:{marginLeft:"10px"},variant:"callAction",onClick:function(){return u(!d)},label:"Show/Hide"})]})}},26824:function(e,n,t){t.d(n,{HE:function(){return a},V9:function(){return i},ci:function(){return o},x2:function(){return r}});var i=1006,o=1008,a=1011,r=function(e){var n="ws";return"https:"===e&&(n="wss"),n}}}]);
//# sourceMappingURL=5882.ad761d2c.chunk.js.map