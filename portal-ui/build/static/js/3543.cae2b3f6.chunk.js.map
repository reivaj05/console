{"version":3,"file":"static/js/3543.cae2b3f6.chunk.js","mappings":"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","sources":["screens/Console/Common/FormComponents/FilterInputWrapper/FilterInputWrapper.tsx","screens/Console/Logs/LogSearch/utils.ts","screens/Console/Logs/LogSearch/LogSearchFullModal.tsx","screens/Console/Common/MissingIntegration/MissingIntegration.tsx","screens/Console/Logs/LogSearch/LogsSearchMain.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport TextField from \"@mui/material/TextField\";\nimport { searchField } from \"../common/styleLibrary\";\n\ninterface IFilterInputWrapper {\n  classes: any;\n  value: string;\n  onChange: (txtVar: string) => any;\n  label: string;\n  placeholder?: string;\n  id: string;\n  name: string;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    searchField: {\n      ...searchField.searchField,\n      height: 30,\n      padding: 0,\n      \"& input\": {\n        padding: \"0 12px\",\n        height: 28,\n        fontSize: 12,\n        fontWeight: 600,\n        color: \"#393939\",\n      },\n      \"&.isDisabled\": {\n        \"&:hover\": {\n          borderColor: \"#EAEDEE\",\n        },\n      },\n      \"& input.Mui-disabled\": {\n        backgroundColor: \"#EAEAEA\",\n      },\n    },\n    labelStyle: {\n      color: \"#393939\",\n      fontSize: 12,\n      marginBottom: 4,\n    },\n    buttonKit: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    fieldContainer: {\n      flexGrow: 1,\n      margin: \"0 15px\",\n    },\n  });\n\nconst FilterInputWrapper = ({\n  classes,\n  label,\n  onChange,\n  value,\n  placeholder = \"\",\n  id,\n  name,\n}: IFilterInputWrapper) => {\n  return (\n    <Fragment>\n      <div className={classes.fieldContainer}>\n        <div className={classes.labelStyle}>{label}</div>\n        <div className={classes.buttonKit}>\n          <TextField\n            placeholder={placeholder}\n            id={id}\n            name={name}\n            label=\"\"\n            onChange={(val) => {\n              onChange(val.target.value);\n            }}\n            InputProps={{\n              disableUnderline: true,\n            }}\n            className={classes.searchField}\n            value={value}\n          />\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(FilterInputWrapper);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const LogSearchColumnLabels = {\n  time: \"Timestamp\",\n  api_name: \"API Name\",\n  access_key: \"Access Key\",\n  bucket: \"Bucket\",\n  object: \"Object\",\n  remote_host: \"Remote Host\",\n  request_id: \"Request ID\",\n  user_agent: \"User Agent\",\n  response_status: \"Response Status\",\n  response_status_code: \"Response Status Code\",\n  request_content_length: \"Request Content Length\",\n  response_content_length: \"Response Content Length\",\n  time_to_response_ns: \"Time to Response NS\",\n};\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport { Theme } from \"@mui/material/styles\";\nimport { Button } from \"mds\";\nimport get from \"lodash/get\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport ModalWrapper from \"../../Common/ModalWrapper/ModalWrapper\";\nimport { modalBasic } from \"../../Common/FormComponents/common/styleLibrary\";\nimport { IReqInfoSearchResults } from \"./types\";\nimport { LogSearchColumnLabels } from \"./utils\";\n\ninterface ILogSearchFullModal {\n  modalOpen: boolean;\n  logSearchElement: IReqInfoSearchResults;\n  onClose: () => void;\n  classes: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    buttonContainer: {\n      textAlign: \"right\",\n    },\n    objectKeyCol: {\n      fontWeight: 700,\n      paddingRight: \"10px\",\n      textAlign: \"left\",\n    },\n    ...modalBasic,\n  });\n\nconst LogSearchFullModal = ({\n  modalOpen,\n  logSearchElement,\n  onClose,\n  classes,\n}: ILogSearchFullModal) => {\n  const jsonItems = Object.keys(logSearchElement);\n\n  return (\n    <Fragment>\n      <ModalWrapper\n        modalOpen={modalOpen}\n        title=\"Full Log Information\"\n        onClose={() => {\n          onClose();\n        }}\n      >\n        <Grid container>\n          <Grid item xs={12}>\n            <table>\n              <tbody>\n                {jsonItems.map((objectKey: string, index: number) => (\n                  <tr key={`logSearch-${index.toString()}`}>\n                    <th className={classes.objectKeyCol}>\n                      {get(LogSearchColumnLabels, objectKey, `${objectKey}`)}\n                    </th>\n                    <td>{get(logSearchElement, objectKey, \"\")}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </Grid>\n          <Grid item xs={12} className={classes.buttonContainer}>\n            <Button\n              id={\"close-log-search\"}\n              variant=\"callAction\"\n              color=\"primary\"\n              onClick={onClose}\n              label={\"Close\"}\n            />\n          </Grid>\n        </Grid>\n      </ModalWrapper>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(LogSearchFullModal);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment } from \"react\";\nimport { Grid } from \"@mui/material\";\nimport HelpBox from \"../../../../common/HelpBox\";\n\ninterface IMissingIntegration {\n  iconComponent: any;\n  entity: string;\n  documentationLink: string;\n}\n\nconst MissingIntegration = ({\n  iconComponent,\n  entity,\n  documentationLink,\n}: IMissingIntegration) => {\n  return (\n    <Grid\n      container\n      justifyContent={\"center\"}\n      alignContent={\"center\"}\n      alignItems={\"center\"}\n    >\n      <Grid item xs={8}>\n        <HelpBox\n          title={`${entity} not available`}\n          iconComponent={iconComponent}\n          help={\n            <Fragment>\n              This feature is not available.\n              <br />\n              Please configure{\" \"}\n              <a href={documentationLink} target=\"_blank\" rel=\"noreferrer\">\n                {entity}\n              </a>{\" \"}\n              first to use this feature.\n            </Fragment>\n          }\n        />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default MissingIntegration;\n","// This file is part of MinIO Console Server\n// Copyright (c) 2021 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useCallback, useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Button } from \"mds\";\nimport { Theme } from \"@mui/material/styles\";\nimport { Grid } from \"@mui/material\";\nimport get from \"lodash/get\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport {\n  advancedFilterToggleStyles,\n  containerForHeader,\n  logsCommon,\n  tableStyles,\n} from \"../../Common/FormComponents/common/styleLibrary\";\nimport { IReqInfoSearchResults, ISearchResponse } from \"./types\";\nimport { niceBytes, nsToSeconds } from \"../../../../common/utils\";\nimport { ErrorResponseHandler } from \"../../../../common/types\";\nimport api from \"../../../../common/api\";\nimport TableWrapper from \"../../Common/TableWrapper/TableWrapper\";\nimport FilterInputWrapper from \"../../Common/FormComponents/FilterInputWrapper/FilterInputWrapper\";\nimport LogSearchFullModal from \"./LogSearchFullModal\";\nimport { LogSearchColumnLabels } from \"./utils\";\nimport DateRangeSelector from \"../../Common/FormComponents/DateRangeSelector/DateRangeSelector\";\nimport PageHeader from \"../../Common/PageHeader/PageHeader\";\nimport PageLayout from \"../../Common/Layout/PageLayout\";\nimport ArrowForwardIosIcon from \"@mui/icons-material/ArrowForwardIos\";\nimport {\n  CONSOLE_UI_RESOURCE,\n  IAM_SCOPES,\n} from \"../../../../common/SecureComponent/permissions\";\nimport { SecureComponent } from \"../../../../common/SecureComponent\";\nimport { SearchIcon } from \"../../../../icons\";\nimport MissingIntegration from \"../../Common/MissingIntegration/MissingIntegration\";\nimport { setErrorSnackMessage } from \"../../../../systemSlice\";\nimport { selFeatures } from \"../../consoleSlice\";\nimport { useAppDispatch } from \"../../../../store\";\n\ninterface ILogSearchProps {\n  classes: any;\n}\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    blockCollapsed: {\n      display: \"none\",\n      overflowY: \"hidden\",\n    },\n    filterOpen: {\n      display: \"block\",\n      marginBottom: 12,\n    },\n    endLineAction: {\n      marginBottom: 15,\n      padding: \"0 15px 0 15px\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-end\",\n    },\n    filtersContainer: {\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      marginBottom: 12,\n    },\n    innerContainer: {\n      backgroundColor: \"#fff\",\n    },\n    noticeLabel: {\n      marginLeft: 15,\n      marginBottom: 15,\n      fontSize: 12,\n      color: \"#9C9C9C\",\n    },\n\n    tableFOpen: {\n      height: \"calc(100vh - 520px)\",\n    },\n    tableFClosed: {\n      height: \"calc(100vh - 320px)\",\n    },\n    ...tableStyles,\n    ...advancedFilterToggleStyles,\n\n    searchOptions: {\n      display: \"flex\",\n      padding: 15,\n      \"@media (max-width: 900px)\": {\n        flexFlow: \"column\",\n      },\n    },\n    formBox: {\n      border: \"1px solid #EAEAEA\",\n      marginBottom: 15,\n    },\n    dateRangePicker: {\n      \"& div\": {\n        marginBottom: 0,\n      },\n    },\n    advancedButton: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"flex-start\",\n    },\n    ...logsCommon,\n    ...containerForHeader(theme.spacing(4)),\n  });\n\nconst LogsSearchMain = ({ classes }: ILogSearchProps) => {\n  const dispatch = useAppDispatch();\n  const features = useSelector(selFeatures);\n\n  const [loading, setLoading] = useState<boolean>(true);\n  const [timeStart, setTimeStart] = useState<any>(null);\n  const [timeEnd, setTimeEnd] = useState<any>(null);\n  const [filterOpen, setFilterOpen] = useState<boolean>(false);\n  const [records, setRecords] = useState<IReqInfoSearchResults[]>([]);\n  const [bucket, setBucket] = useState<string>(\"\");\n  const [apiName, setApiName] = useState<string>(\"\");\n  const [accessKey, setAccessKey] = useState<string>(\"\");\n  const [userAgent, setUserAgent] = useState<string>(\"\");\n  const [object, setObject] = useState<string>(\"\");\n  const [requestID, setRequestID] = useState<string>(\"\");\n  const [responseStatus, setResponseStatus] = useState<string>(\"\");\n  const [sortOrder, setSortOrder] = useState<\"ASC\" | \"DESC\" | undefined>(\n    \"DESC\"\n  );\n  const [columnsShown, setColumnsShown] = useState<string[]>([\n    \"time\",\n    \"api_name\",\n    \"access_key\",\n    \"bucket\",\n    \"object\",\n    \"remote_host\",\n    \"request_id\",\n    \"user_agent\",\n    \"response_status\",\n  ]);\n  const [nextPage, setNextPage] = useState<number>(0);\n  const [alreadyFetching, setAlreadyFetching] = useState<boolean>(false);\n  const [logSearchExtrasOpen, setLogSearchExtrasOpen] =\n    useState<boolean>(false);\n  const [selectedItem, setSelectedItem] =\n    useState<IReqInfoSearchResults | null>(null);\n\n  let recordsResp: any = null;\n  const logSearchEnabled = features && features.includes(\"log-search\");\n\n  const fetchRecords = useCallback(() => {\n    if (!alreadyFetching && logSearchEnabled) {\n      setAlreadyFetching(true);\n      let queryParams = `${bucket !== \"\" ? `&fp=bucket:${bucket}` : \"\"}${\n        object !== \"\" ? `&fp=object:${object}` : \"\"\n      }${apiName !== \"\" ? `&fp=api_name:${apiName}` : \"\"}${\n        accessKey !== \"\" ? `&fp=access_key:${accessKey}` : \"\"\n      }${requestID !== \"\" ? `&fp=request_id:${requestID}` : \"\"}${\n        userAgent !== \"\" ? `&fp=user_agent:${userAgent}` : \"\"\n      }${responseStatus !== \"\" ? `&fp=response_status:${responseStatus}` : \"\"}`;\n\n      queryParams = queryParams.trim();\n\n      if (queryParams.endsWith(\",\")) {\n        queryParams = queryParams.slice(0, -1);\n      }\n\n      api\n        .invoke(\n          \"GET\",\n          `/api/v1/logs/search?q=reqinfo${\n            queryParams !== \"\" ? `${queryParams}` : \"\"\n          }&pageSize=100&pageNo=${nextPage}&order=${\n            sortOrder === \"DESC\" ? \"timeDesc\" : \"timeAsc\"\n          }${\n            timeStart !== null ? `&timeStart=${timeStart.toISOString()}` : \"\"\n          }${timeEnd !== null ? `&timeEnd=${timeEnd.toISOString()}` : \"\"}`\n        )\n        .then((res: ISearchResponse) => {\n          const fetchedResults = res.results || [];\n\n          setLoading(false);\n          setAlreadyFetching(false);\n          setRecords(fetchedResults);\n          setNextPage(nextPage + 1);\n\n          if (recordsResp !== null) {\n            recordsResp();\n          }\n        })\n        .catch((err: ErrorResponseHandler) => {\n          setLoading(false);\n          setAlreadyFetching(false);\n          dispatch(setErrorSnackMessage(err));\n        });\n    } else {\n      setLoading(false);\n      setAlreadyFetching(false);\n    }\n  }, [\n    alreadyFetching,\n    logSearchEnabled,\n    bucket,\n    object,\n    apiName,\n    accessKey,\n    requestID,\n    userAgent,\n    responseStatus,\n    nextPage,\n    sortOrder,\n    timeStart,\n    timeEnd,\n    recordsResp,\n    dispatch,\n  ]);\n\n  useEffect(() => {\n    if (loading) {\n      setRecords([]);\n      fetchRecords();\n    }\n  }, [loading, sortOrder, fetchRecords]);\n\n  const triggerLoad = () => {\n    setNextPage(0);\n    setLoading(true);\n  };\n\n  const selectColumn = (colName: string, active: boolean) => {\n    let newArray = [...columnsShown];\n\n    if (!active) {\n      newArray = columnsShown.filter((element) => element !== colName);\n    } else {\n      if (!newArray.includes(colName)) {\n        newArray.push(colName);\n      }\n    }\n    setColumnsShown(newArray);\n  };\n\n  const sortChange = (sortData: any) => {\n    const newSortDirection = get(sortData, \"sortDirection\", \"DESC\");\n    setSortOrder(newSortDirection);\n    setNextPage(0);\n    setLoading(true);\n  };\n\n  const loadMoreRecords = (_: { startIndex: number; stopIndex: number }) => {\n    fetchRecords();\n    return new Promise((resolve) => {\n      recordsResp = resolve;\n    });\n  };\n\n  const openExtraInformation = (item: IReqInfoSearchResults) => {\n    setSelectedItem(item);\n    setLogSearchExtrasOpen(true);\n  };\n\n  const closeViewExtraInformation = () => {\n    setSelectedItem(null);\n    setLogSearchExtrasOpen(false);\n  };\n\n  return (\n    <Fragment>\n      {logSearchExtrasOpen && selectedItem !== null && (\n        <LogSearchFullModal\n          logSearchElement={selectedItem}\n          modalOpen={logSearchExtrasOpen}\n          onClose={closeViewExtraInformation}\n        />\n      )}\n\n      <PageHeader label=\"Audit Logs\" />\n      <PageLayout>\n        {!logSearchEnabled ? (\n          <MissingIntegration\n            entity={\"Audit Logs\"}\n            iconComponent={<SearchIcon />}\n            documentationLink=\"https://github.com/minio/operator/tree/master/logsearchapi\"\n          />\n        ) : (\n          <Fragment>\n            {\" \"}\n            <Grid xs={12} className={classes.formBox}>\n              <Grid item xs={12} className={`${classes.searchOptions}`}>\n                <div className={classes.dateRangePicker}>\n                  <DateRangeSelector\n                    setTimeEnd={setTimeEnd}\n                    setTimeStart={setTimeStart}\n                    timeEnd={timeEnd}\n                    timeStart={timeStart}\n                  />\n                </div>\n\n                <Grid item className={classes.advancedButton}>\n                  <button\n                    onClick={() => {\n                      setFilterOpen(!filterOpen);\n                    }}\n                    className={classes.advancedConfiguration}\n                  >\n                    {filterOpen ? \"Hide\" : \"Show\"} advanced Filters{\" \"}\n                    <span\n                      className={\n                        filterOpen\n                          ? classes.advancedOpen\n                          : classes.advancedClosed\n                      }\n                    >\n                      <ArrowForwardIosIcon />\n                    </span>\n                  </button>\n                </Grid>\n              </Grid>\n              <Grid\n                item\n                xs={12}\n                className={`${classes.blockCollapsed} ${\n                  filterOpen ? classes.filterOpen : \"\"\n                }`}\n              >\n                <div className={classes.innerContainer}>\n                  <div className={classes.noticeLabel}>\n                    Enable your preferred options to get filtered records.\n                    <br />\n                    You can use '*' to match any character, '.' to signify a\n                    single character or '\\' to scape an special character (E.g.\n                    mybucket-*)\n                  </div>\n                  <div className={classes.filtersContainer}>\n                    <FilterInputWrapper\n                      onChange={setBucket}\n                      value={bucket}\n                      label={\"Bucket\"}\n                      id=\"bucket\"\n                      name=\"bucket\"\n                    />\n                    <FilterInputWrapper\n                      onChange={setApiName}\n                      value={apiName}\n                      label={\"API Name\"}\n                      id=\"api_name\"\n                      name=\"api_name\"\n                    />\n                    <FilterInputWrapper\n                      onChange={setAccessKey}\n                      value={accessKey}\n                      label={\"Access Key\"}\n                      id=\"access_key\"\n                      name=\"access_key\"\n                    />\n                    <FilterInputWrapper\n                      onChange={setUserAgent}\n                      value={userAgent}\n                      label={\"User Agent\"}\n                      id=\"user_agent\"\n                      name=\"user_agent\"\n                    />\n                  </div>\n                  <div className={classes.filtersContainer}>\n                    <FilterInputWrapper\n                      onChange={setObject}\n                      value={object}\n                      label={\"Object\"}\n                      id=\"object\"\n                      name=\"object\"\n                    />\n                    <FilterInputWrapper\n                      onChange={setRequestID}\n                      value={requestID}\n                      label={\"Request ID\"}\n                      id=\"request_id\"\n                      name=\"request_id\"\n                    />\n                    <FilterInputWrapper\n                      onChange={setResponseStatus}\n                      value={responseStatus}\n                      label={\"Response Status\"}\n                      id=\"response_status\"\n                      name=\"response_status\"\n                    />\n                  </div>\n                </div>\n              </Grid>\n              <Grid item xs={12} className={classes.endLineAction}>\n                <Button\n                  id={\"get-information\"}\n                  type=\"button\"\n                  variant=\"callAction\"\n                  onClick={triggerLoad}\n                  label={\"Get Information\"}\n                />\n              </Grid>\n            </Grid>\n            <Grid item xs={12} className={classes.tableBlock}>\n              <SecureComponent\n                scopes={[IAM_SCOPES.ADMIN_HEALTH_INFO]}\n                resource={CONSOLE_UI_RESOURCE}\n                errorProps={{ disabled: true }}\n              >\n                <TableWrapper\n                  columns={[\n                    {\n                      label: LogSearchColumnLabels.time,\n                      elementKey: \"time\",\n                      enableSort: true,\n                    },\n                    {\n                      label: LogSearchColumnLabels.api_name,\n                      elementKey: \"api_name\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.access_key,\n                      elementKey: \"access_key\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.bucket,\n                      elementKey: \"bucket\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.object,\n                      elementKey: \"object\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.remote_host,\n                      elementKey: \"remote_host\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.request_id,\n                      elementKey: \"request_id\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.user_agent,\n                      elementKey: \"user_agent\",\n                    },\n                    {\n                      label: LogSearchColumnLabels.response_status,\n                      elementKey: \"response_status\",\n                      renderFunction: (element) => (\n                        <Fragment>\n                          <span>\n                            {element.response_status_code} (\n                            {element.response_status})\n                          </span>\n                        </Fragment>\n                      ),\n                      renderFullObject: true,\n                    },\n                    {\n                      label: LogSearchColumnLabels.request_content_length,\n                      elementKey: \"request_content_length\",\n                      renderFunction: niceBytes,\n                    },\n                    {\n                      label: LogSearchColumnLabels.response_content_length,\n                      elementKey: \"response_content_length\",\n                      renderFunction: niceBytes,\n                    },\n                    {\n                      label: LogSearchColumnLabels.time_to_response_ns,\n                      elementKey: \"time_to_response_ns\",\n                      renderFunction: nsToSeconds,\n                      contentTextAlign: \"right\",\n                    },\n                  ]}\n                  isLoading={loading}\n                  records={records}\n                  entityName=\"Logs\"\n                  customEmptyMessage={\n                    \"There is no information with this criteria\"\n                  }\n                  idField=\"request_id\"\n                  columnsSelector\n                  columnsShown={columnsShown}\n                  onColumnChange={selectColumn}\n                  customPaperHeight={\n                    filterOpen ? classes.tableFOpen : classes.tableFClosed\n                  }\n                  sortConfig={{\n                    currentSort: \"time\",\n                    currentDirection: sortOrder,\n                    triggerSort: sortChange,\n                  }}\n                  infiniteScrollConfig={{\n                    recordsCount: 1000000,\n                    loadMoreRecords: loadMoreRecords,\n                  }}\n                  itemActions={[\n                    {\n                      type: \"view\",\n                      onClick: openExtraInformation,\n                    },\n                  ]}\n                  textSelectable\n                />\n              </SecureComponent>\n            </Grid>\n          </Fragment>\n        )}\n      </PageLayout>\n    </Fragment>\n  );\n};\n\nexport default withStyles(styles)(LogsSearchMain);\n"],"names":["withStyles","theme","createStyles","searchField","height","padding","fontSize","fontWeight","color","borderColor","backgroundColor","labelStyle","marginBottom","buttonKit","display","alignItems","fieldContainer","flexGrow","margin","classes","label","onChange","value","placeholder","id","name","Fragment","className","TextField","val","target","InputProps","disableUnderline","LogSearchColumnLabels","time","api_name","access_key","bucket","object","remote_host","request_id","user_agent","response_status","response_status_code","request_content_length","response_content_length","time_to_response_ns","buttonContainer","textAlign","objectKeyCol","paddingRight","modalBasic","modalOpen","logSearchElement","onClose","jsonItems","Object","keys","ModalWrapper","title","Grid","container","item","xs","map","objectKey","index","get","toString","variant","onClick","iconComponent","entity","documentationLink","justifyContent","alignContent","HelpBox","help","href","rel","blockCollapsed","overflowY","filterOpen","endLineAction","filtersContainer","innerContainer","noticeLabel","marginLeft","tableFOpen","tableFClosed","tableStyles","advancedFilterToggleStyles","searchOptions","flexFlow","formBox","border","dateRangePicker","advancedButton","logsCommon","containerForHeader","spacing","dispatch","useAppDispatch","features","useSelector","selFeatures","useState","loading","setLoading","timeStart","setTimeStart","timeEnd","setTimeEnd","setFilterOpen","records","setRecords","setBucket","apiName","setApiName","accessKey","setAccessKey","userAgent","setUserAgent","setObject","requestID","setRequestID","responseStatus","setResponseStatus","sortOrder","setSortOrder","columnsShown","setColumnsShown","nextPage","setNextPage","alreadyFetching","setAlreadyFetching","logSearchExtrasOpen","setLogSearchExtrasOpen","selectedItem","setSelectedItem","recordsResp","logSearchEnabled","includes","fetchRecords","useCallback","queryParams","trim","endsWith","slice","api","toISOString","then","res","fetchedResults","results","catch","err","setErrorSnackMessage","useEffect","PageHeader","PageLayout","DateRangeSelector","advancedConfiguration","advancedOpen","advancedClosed","ArrowForwardIos","type","tableBlock","SecureComponent","scopes","IAM_SCOPES","resource","CONSOLE_UI_RESOURCE","errorProps","disabled","TableWrapper","columns","elementKey","enableSort","renderFunction","element","renderFullObject","niceBytes","nsToSeconds","contentTextAlign","isLoading","entityName","customEmptyMessage","idField","columnsSelector","onColumnChange","colName","active","newArray","push","filter","customPaperHeight","sortConfig","currentSort","currentDirection","triggerSort","sortData","newSortDirection","infiniteScrollConfig","recordsCount","loadMoreRecords","_","Promise","resolve","itemActions","textSelectable"],"sourceRoot":""}