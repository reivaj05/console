"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[7021],{68456:function(e,n,a){a.d(n,{QT:function(){return o},YH:function(){return l},mo:function(){return s}});var t=a(61889),i=a(75952),r=a(80184),s=function(){return(0,r.jsxs)(t.ZP,{container:!0,columnGap:1,children:[(0,r.jsx)(t.ZP,{children:(0,r.jsx)(i.gyG,{width:"16px",height:"16px"})}),(0,r.jsx)(t.ZP,{item:!0,children:"Open ID"})]})},o=function(){return(0,r.jsxs)(t.ZP,{container:!0,columnGap:1,children:[(0,r.jsx)(t.ZP,{children:(0,r.jsx)(i.vcZ,{width:"16px",height:"16px"})}),(0,r.jsx)(t.ZP,{item:!0,children:"LDAP / Active Directory"})]})},l=function(){return(0,r.jsxs)(t.ZP,{container:!0,columnGap:1,children:[(0,r.jsx)(t.ZP,{children:(0,r.jsx)(i.oyc,{width:"16px",height:"16px"})}),(0,r.jsx)(t.ZP,{item:!0,children:"Built-in"})]})}},37021:function(e,n,a){a.r(n);var t=a(93433),i=a(29439),r=a(1413),s=a(72791),o=a(78687),l=a(51691),c=a(20890),d=a(20068),u=a(13400),m=a(75952),h=a(61889),p=a(11135),x=a(25787),v=a(20165),f=a(3579),_=a(23814),Z=a(68456),g=a(84741),j=a(40968),D=a(87995),b=a(25469),N=a(83679),S=a(21435),I=a(37516),y=a(23508),k=a(81207),A=a(42419),R=a(27247),C=a(50896),w=a(80184),P=(0,o.$j)((function(e){return{loadingTenant:e.tenants.loadingTenant,selectedTenant:e.tenants.currentTenant,tenant:e.tenants.tenantInfo}}),null);n.default=(0,x.Z)((function(e){return(0,p.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)((0,r.Z)({adUserDnRows:{display:"flex",marginBottom:10},buttonTray:{marginLeft:10,display:"flex",height:38,"& button":{background:"#EAEAEA"}},overlayAction:{marginLeft:10,"& svg":{maxWidth:15,maxHeight:15},"& button":{background:"#EAEAEA"}}},_.oZ),_.bK),{},{loaderAlign:{textAlign:"center"},bold:{fontWeight:"bold"},italic:{fontStyle:"italic"},fileItem:{marginRight:10,display:"flex","& div label":{minWidth:50},"@media (max-width: 900px)":{flexFlow:"column"}}},(0,_.Bz)(e.spacing(4))),_.QV),_.DF),_.oO),_.AK))}))(P((function(e){var n=e.classes,a=(0,b.TL)(),r=(0,o.v9)((function(e){return e.tenants.tenantInfo})),p=(0,o.v9)((function(e){return e.tenants.loadingTenant})),x=(0,s.useState)(!1),_=(0,i.Z)(x,2),P=_[0],F=_[1],L=(0,s.useState)(!1),T=(0,i.Z)(L,2),U=T[0],O=T[1],B=(0,s.useState)("Built-in"),G=(0,i.Z)(B,2),q=G[0],z=G[1],E=(0,s.useState)(""),K=(0,i.Z)(E,2),H=K[0],V=K[1],M=(0,s.useState)(""),W=(0,i.Z)(M,2),Q=W[0],Y=W[1],$=(0,s.useState)(""),J=(0,i.Z)($,2),X=J[0],ee=J[1],ne=(0,s.useState)(!1),ae=(0,i.Z)(ne,2),te=ae[0],ie=ae[1],re=(0,s.useState)(""),se=(0,i.Z)(re,2),oe=se[0],le=se[1],ce=(0,s.useState)(""),de=(0,i.Z)(ce,2),ue=de[0],me=de[1],he=(0,s.useState)(""),pe=(0,i.Z)(he,2),xe=pe[0],ve=pe[1],fe=(0,s.useState)(""),_e=(0,i.Z)(fe,2),Ze=_e[0],ge=_e[1],je=(0,s.useState)(""),De=(0,i.Z)(je,2),be=De[0],Ne=De[1],Se=(0,s.useState)(""),Ie=(0,i.Z)(Se,2),ye=Ie[0],ke=Ie[1],Ae=(0,s.useState)(!1),Re=(0,i.Z)(Ae,2),Ce=Re[0],we=Re[1],Pe=(0,s.useState)(""),Fe=(0,i.Z)(Pe,2),Le=Fe[0],Te=Fe[1],Ue=(0,s.useState)(""),Oe=(0,i.Z)(Ue,2),Be=Oe[0],Ge=Oe[1],qe=(0,s.useState)(""),ze=(0,i.Z)(qe,2),Ee=ze[0],Ke=ze[1],He=(0,s.useState)(""),Ve=(0,i.Z)(He,2),Me=Ve[0],We=Ve[1],Qe=(0,s.useState)(!1),Ye=(0,i.Z)(Qe,2),$e=Ye[0],Je=Ye[1],Xe=(0,s.useState)(!1),en=(0,i.Z)(Xe,2),nn=en[0],an=en[1],tn=(0,s.useState)(!1),rn=(0,i.Z)(tn,2),sn=rn[0],on=rn[1],ln=(0,s.useState)([""]),cn=(0,i.Z)(ln,2),dn=cn[0],un=cn[1],mn=(0,s.useState)([""]),hn=(0,i.Z)(mn,2),pn=hn[0],xn=hn[1],vn=(0,s.useState)({}),fn=(0,i.Z)(vn,2),_n=fn[0],Zn=fn[1],gn=function(e){Zn((0,g.he)(_n,e))},jn=(0,s.useState)(!1),Dn=(0,i.Z)(jn,2),bn=Dn[0],Nn=Dn[1];(0,s.useEffect)((function(){var e=[];"OpenID"===q&&(e=[].concat((0,t.Z)(e),[{fieldKey:"openID_CONFIGURATION_URL",required:!0,value:H},{fieldKey:"openID_clientID",required:!0,value:Q},{fieldKey:"openID_secretID",required:!0,value:X},{fieldKey:"openID_claimName",required:!0,value:ue}])),"AD"===q&&(e=[].concat((0,t.Z)(e),[{fieldKey:"AD_URL",required:!0,value:Ze},{fieldKey:"ad_lookupBindDN",required:!0,value:be}]));var n=(0,j.R)(e);Nn(0===Object.keys(n).length),Zn(n)}),[q,H,Q,X,ue,Ze,be]);var Sn=(0,s.useCallback)((function(){k.Z.invoke("GET","/api/v1/namespaces/".concat(null===r||void 0===r?void 0:r.namespace,"/tenants/").concat(null===r||void 0===r?void 0:r.name,"/identity-provider")).then((function(e){e&&(e.oidc?(z("OpenID"),V(e.oidc.configuration_url),Y(e.oidc.client_id),ee(e.oidc.secret_id),le(e.oidc.callback_url),me(e.oidc.claim_name),ve(e.oidc.scopes)):e.active_directory&&(z("AD"),ge(e.active_directory.url),Ne(e.active_directory.lookup_bind_dn),ke(e.active_directory.lookup_bind_password),Te(e.active_directory.user_dn_search_base_dn),Ge(e.active_directory.user_dn_search_filter),Ke(e.active_directory.group_search_base_dn),We(e.active_directory.group_search_filter),Je(e.active_directory.skip_tls_verification),an(e.active_directory.server_insecure),on(e.active_directory.server_start_tls)))})).catch((function(e){a((0,D.Ih)(e))}))}),[r,a]);(0,s.useEffect)((function(){r&&Sn()}),[r,Sn]);return(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(y.Z,{title:"Save and Restart",confirmText:"Restart",cancelText:"Cancel",titleIcon:(0,w.jsx)(m.EjK,{}),isLoading:P,onClose:function(){return O(!1)},isOpen:U,onConfirm:function(){F(!0);var e={};switch(q){case"AD":e.active_directory={url:Ze,lookup_bind_dn:be,lookup_bind_password:ye,user_dn_search_base_dn:Le,user_dn_search_filter:Be,group_search_base_dn:Ee,group_search_filter:Me,skip_tls_verification:$e,server_insecure:nn,server_start_tls:sn};break;case"OpenID":e.oidc={configuration_url:H,client_id:Q,secret_id:X,callback_url:oe,claim_name:ue,scopes:xe}}k.Z.invoke("POST","/api/v1/namespaces/".concat(null===r||void 0===r?void 0:r.namespace,"/tenants/").concat(null===r||void 0===r?void 0:r.name,"/identity-provider"),e).then((function(){F(!1),O(!1),Sn()})).catch((function(e){a((0,D.Ih)(e)),F(!1)}))},confirmationContent:(0,w.jsx)(l.Z,{children:"Are you sure you want to save the changes and restart the service?"})}),p?(0,w.jsx)("div",{className:n.loaderAlign,children:(0,w.jsx)(m.aNw,{})}):(0,w.jsxs)(s.Fragment,{children:[(0,w.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,w.jsx)("h1",{className:n.sectionTitle,children:"Identity Provider"}),(0,w.jsx)("hr",{className:n.hrClass})]}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.protocolRadioOptions,paddingBottom:1,children:(0,w.jsx)(N.Z,{currentSelection:q,id:"idp-options",name:"idp-options",label:"Protocol",onChange:function(e){z(e.target.value)},selectorOptions:[{label:(0,w.jsx)(Z.YH,{}),value:"Built-in"},{label:(0,w.jsx)(Z.mo,{}),value:"OpenID"},{label:(0,w.jsx)(Z.QT,{}),value:"AD"}]})}),"OpenID"===q&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"openID_CONFIGURATION_URL",name:"openID_CONFIGURATION_URL",onChange:function(e){V(e.target.value),gn("openID_CONFIGURATION_URL")},label:"Configuration URL",value:H,placeholder:"https://your-identity-provider.com/.well-known/openid-configuration",error:_n.openID_CONFIGURATION_URL||"",required:!0})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"openID_clientID",name:"openID_clientID",onChange:function(e){Y(e.target.value),gn("openID_clientID")},label:"Client ID",value:Q,error:_n.openID_clientID||"",required:!0})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{type:te?"text":"password",id:"openID_secretID",name:"openID_secretID",onChange:function(e){ee(e.target.value),gn("openID_secretID")},label:"Secret ID",value:X,error:_n.openID_secretID||"",required:!0,overlayIcon:te?(0,w.jsx)(v.Z,{}):(0,w.jsx)(f.Z,{}),overlayAction:function(){return ie(!te)}})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"openID_callbackURL",name:"openID_callbackURL",onChange:function(e){le(e.target.value),gn("openID_callbackURL")},label:"Callback URL",value:oe,placeholder:"https://your-console-endpoint:9443/oauth_callback",error:_n.openID_callbackURL||""})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"openID_claimName",name:"openID_claimName",onChange:function(e){me(e.target.value),gn("openID_claimName")},label:"Claim Name",value:ue,error:_n.openID_claimName||"",required:!0})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"openID_scopes",name:"openID_scopes",onChange:function(e){ve(e.target.value),gn("openID_scopes")},label:"Scopes",value:xe})})]}),"AD"===q&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"AD_URL",name:"AD_URL",onChange:function(e){ge(e.target.value),gn("AD_URL")},label:"LDAP Server Address",value:Ze,placeholder:"ldap-server:636",error:_n.AD_URL||"",required:!0})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(I.Z,{value:"ad_skipTLS",id:"ad_skipTLS",name:"ad_skipTLS",checked:$e,onChange:function(e){var n=e.target.checked;Je(n)},label:"Skip TLS Verification"})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(I.Z,{value:"ad_serverInsecure",id:"ad_serverInsecure",name:"ad_serverInsecure",checked:nn,onChange:function(e){var n=e.target.checked;an(n)},label:"Server Insecure"})}),nn?(0,w.jsxs)(h.ZP,{item:!0,xs:12,children:[(0,w.jsx)(c.Z,{className:n.error,variant:"caption",display:"block",gutterBottom:!0,children:"Warning: All traffic with Active Directory will be unencrypted"}),(0,w.jsx)("br",{})]}):null,(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(I.Z,{value:"ad_serverStartTLS",id:"ad_serverStartTLS",name:"ad_serverStartTLS",checked:sn,onChange:function(e){var n=e.target.checked;on(n)},label:"Start TLS connection to AD/LDAP server"})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"ad_lookupBindDN",name:"ad_lookupBindDN",onChange:function(e){Ne(e.target.value),gn("ad_lookupBindDN")},label:"Lookup Bind DN",value:be,placeholder:"cn=admin,dc=min,dc=io",error:_n.ad_lookupBindDN||"",required:!0})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{type:Ce?"text":"password",id:"ad_lookupBindPassword",name:"ad_lookupBindPassword",onChange:function(e){ke(e.target.value)},label:"Lookup Bind Password",value:ye,placeholder:"admin",overlayIcon:Ce?(0,w.jsx)(v.Z,{}):(0,w.jsx)(f.Z,{}),overlayAction:function(){return we(!Ce)}})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"ad_userDNSearchBaseDN",name:"ad_userDNSearchBaseDN",onChange:function(e){Te(e.target.value)},label:"User DN Search Base DN",value:Le,placeholder:"dc=min,dc=io"})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"ad_userDNSearchFilter",name:"ad_userDNSearchFilter",onChange:function(e){Ge(e.target.value)},label:"User DN Search Filter",value:Be,placeholder:"(sAMAcountName=%s)"})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"ad_groupSearchBaseDN",name:"ad_groupSearchBaseDN",onChange:function(e){Ke(e.target.value)},label:"Group Search Base DN",value:Ee,placeholder:"ou=hwengg,dc=min,dc=io;ou=swengg,dc=min,dc=io"})}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,w.jsx)(S.Z,{id:"ad_groupSearchFilter",name:"ad_groupSearchFilter",onChange:function(e){We(e.target.value)},label:"Group Search Filter",value:Me,placeholder:"(&(objectclass=groupOfNames)(member=%s))"})})]}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.buttonContainer,children:(0,w.jsx)(m.zxk,{id:"save-idp",type:"submit",variant:"callAction",color:"primary",disabled:!bn||P,onClick:function(){return O(!0)},label:"Save"})}),"AD"===q&&(0,w.jsxs)(s.Fragment,{children:[(0,w.jsx)(C.Z,{children:"User & Group management"}),(0,w.jsx)("br",{}),(0,w.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,w.jsx)("legend",{className:n.descriptionText,children:"List of user DNs (Distinguished Names) to be added as Tenant Administrators"}),(0,w.jsx)(h.ZP,{item:!0,xs:12,children:dn.map((function(e,a){return(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("div",{className:n.adUserDnRows,children:[(0,w.jsx)(S.Z,{id:"ad-userdn-".concat(a.toString()),label:"",placeholder:"",name:"ad-userdn-".concat(a.toString()),value:dn[a],onChange:function(e){un(dn.map((function(n,t){return t===a?e.target.value:n})))},index:a,error:_n["ad-userdn-".concat(a.toString())]||""},"csv-ad-userdn-".concat(a.toString())),(0,w.jsxs)("div",{className:n.buttonTray,children:[(0,w.jsx)(d.Z,{title:"Add User","aria-label":"add",children:(0,w.jsx)(u.Z,{size:"small",onClick:function(){un([].concat((0,t.Z)(dn),[""]))},children:(0,w.jsx)(A.Z,{})})}),(0,w.jsx)(d.Z,{title:"Remove","aria-label":"add",children:(0,w.jsx)(u.Z,{size:"small",style:{marginLeft:16},onClick:function(){dn.length>1&&un(dn.filter((function(e,n){return n!==a})))},children:(0,w.jsx)(R.Z,{})})})]})]})},"identityField-".concat(a.toString()))}))})]}),(0,w.jsxs)("fieldset",{className:n.fieldGroup,children:[(0,w.jsx)("legend",{className:n.descriptionText,children:"List of group DNs (Distinguished Names) to be added as Tenant Administrators"}),(0,w.jsx)(h.ZP,{item:!0,xs:12,children:pn.map((function(e,a){return(0,w.jsx)(s.Fragment,{children:(0,w.jsxs)("div",{className:n.adUserDnRows,children:[(0,w.jsx)(S.Z,{id:"ad-groupdn-".concat(a.toString()),label:"",placeholder:"",name:"ad-groupdn-".concat(a.toString()),value:pn[a],onChange:function(e){xn(pn.map((function(n,t){return t===a?e.target.value:n})))},index:a,error:_n["ad-groupdn-".concat(a.toString())]||""},"csv-ad-groupdn-".concat(a.toString())),(0,w.jsxs)("div",{className:n.buttonTray,children:[(0,w.jsx)(d.Z,{title:"Add Group","aria-label":"add",children:(0,w.jsx)(u.Z,{size:"small",onClick:function(){xn([].concat((0,t.Z)(pn),[""]))},children:(0,w.jsx)(A.Z,{})})}),(0,w.jsx)(d.Z,{title:"Remove","aria-label":"add",children:(0,w.jsx)(u.Z,{size:"small",style:{marginLeft:16},onClick:function(){pn.length>1&&xn(pn.filter((function(e,n){return n!==a})))},children:(0,w.jsx)(R.Z,{})})})]})]})},"identityField-".concat(a.toString()))}))})]}),(0,w.jsx)("br",{}),(0,w.jsx)(h.ZP,{item:!0,xs:12,className:n.buttonContainer,children:(0,w.jsx)(m.zxk,{id:"add-additional-dns",type:"submit",variant:"callAction",disabled:!bn||P,onClick:function(){return function(){F(!0);var e={};"AD"===q&&(e={user_dns:dn.filter((function(e){return""!==e.trim()})),group_dns:pn.filter((function(e){return""!==e.trim()}))});k.Z.invoke("POST","/api/v1/namespaces/".concat(null===r||void 0===r?void 0:r.namespace,"/tenants/").concat(null===r||void 0===r?void 0:r.name,"/set-administrators"),e).then((function(){F(!1),xn([""]),un([""]),Sn(),a((0,D.y1)("Administrators added successfully"))})).catch((function(e){a((0,D.Ih)(e)),F(!1)}))}()},label:"Add additional DNs"})})]})]})]})})))},42419:function(e,n,a){var t=a(64836);n.Z=void 0;var i=t(a(45649)),r=a(80184),s=(0,i.default)((0,r.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");n.Z=s},27247:function(e,n,a){var t=a(64836);n.Z=void 0;var i=t(a(45649)),r=a(80184),s=(0,i.default)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");n.Z=s}}]);
//# sourceMappingURL=7021.35a1212b.chunk.js.map