"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[1604],{1604:function(e,t,n){n.r(t);var a=n(29439),i=n(1413),o=n(72791),s=n(75952),l=n(40986),c=n(11135),r=n(25787),u=n(61889),d=n(23814),m=n(81207),f=n(56028),Z=n(83679),p=n(21435),x=n(87995),h=n(25469),v=n(80184);t.default=(0,r.Z)((function(e){return(0,c.Z)((0,i.Z)((0,i.Z)((0,i.Z)((0,i.Z)({},d.bK),d.QV),d.DF),d.ID))}))((function(e){var t=e.classes,n=e.open,i=e.bucketName,c=e.closeModalAndRefresh,r=(0,h.TL)(),d=(0,o.useState)(!1),b=(0,a.Z)(d,2),j=b[0],g=b[1],N=(0,o.useState)(!0),k=(0,a.Z)(N,2),C=k[0],y=k[1],S=(0,o.useState)("compliance"),w=(0,a.Z)(S,2),P=w[0],M=w[1],R=(0,o.useState)("days"),B=(0,a.Z)(R,2),E=B[0],_=B[1],D=(0,o.useState)(1),z=(0,a.Z)(D,2),F=z[0],T=z[1],O=(0,o.useState)(!1),A=(0,a.Z)(O,2),K=A[0],L=A[1];return(0,o.useEffect)((function(){Number.isNaN(F)||F<1?L(!1):L(!0)}),[F]),(0,o.useEffect)((function(){C&&m.Z.invoke("GET","/api/v1/buckets/".concat(i,"/retention")).then((function(e){y(!1),M(e.mode),T(e.validity),_(e.unit)})).catch((function(e){y(!1)}))}),[C,i]),(0,v.jsx)(f.Z,{title:"Set Retention Configuration",modalOpen:n,onClose:function(){c()},children:C?(0,v.jsx)(s.aNw,{style:{width:16,height:16}}):(0,v.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),j||(g(!0),m.Z.invoke("PUT","/api/v1/buckets/".concat(i,"/retention"),{mode:P,unit:E,validity:F}).then((function(){g(!1),c()})).catch((function(e){g(!1),r((0,x.zb)(e))})))},children:(0,v.jsxs)(u.ZP,{container:!0,children:[(0,v.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalFormScrollable,children:[(0,v.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,v.jsx)(Z.Z,{currentSelection:P,id:"retention_mode",name:"retention_mode",label:"Retention Mode",onChange:function(e){M(e.target.value)},selectorOptions:[{value:"compliance",label:"Compliance"},{value:"governance",label:"Governance"}]})}),(0,v.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,v.jsx)(Z.Z,{currentSelection:E,id:"retention_unit",name:"retention_unit",label:"Retention Unit",onChange:function(e){_(e.target.value)},selectorOptions:[{value:"days",label:"Days"},{value:"years",label:"Years"}]})}),(0,v.jsx)(u.ZP,{item:!0,xs:12,className:t.formFieldRow,children:(0,v.jsx)(p.Z,{type:"number",id:"retention_validity",name:"retention_validity",onChange:function(e){T(e.target.valueAsNumber)},label:"Retention Validity",value:String(F),required:!0,min:"1"})})]}),(0,v.jsxs)(u.ZP,{item:!0,xs:12,className:t.modalButtonBar,children:[(0,v.jsx)(s.zxk,{id:"cancel",type:"button",variant:"regular",disabled:j,onClick:function(){c()},label:"Cancel"}),(0,v.jsx)(s.zxk,{id:"set",type:"submit",variant:"callAction",color:"primary",disabled:j||!K,label:"Set"})]}),j&&(0,v.jsx)(u.ZP,{item:!0,xs:12,children:(0,v.jsx)(l.Z,{})})]})})})}))},56028:function(e,t,n){var a=n(29439),i=n(1413),o=n(72791),s=n(78687),l=n(13400),c=n(55646),r=n(5574),u=n(65661),d=n(39157),m=n(11135),f=n(25787),Z=n(23814),p=n(25469),x=n(29823),h=n(28057),v=n(87995),b=n(80184);t.Z=(0,f.Z)((function(e){return(0,m.Z)((0,i.Z)((0,i.Z)({},Z.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},Z.sN))}))((function(e){var t=e.onClose,n=e.modalOpen,m=e.title,f=e.children,Z=e.classes,j=e.wideLimit,g=void 0===j||j,N=e.noContentPadding,k=e.titleIcon,C=void 0===k?null:k,y=(0,p.TL)(),S=(0,o.useState)(!1),w=(0,a.Z)(S,2),P=w[0],M=w[1],R=(0,s.v9)((function(e){return e.system.modalSnackBar}));(0,o.useEffect)((function(){y((0,v.MK)(""))}),[y]),(0,o.useEffect)((function(){if(R){if(""===R.message)return void M(!1);"error"!==R.type&&M(!0)}}),[R]);var B=g?{classes:{paper:Z.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},E="";return R&&(E=R.detailedErrorMsg,(""===R.detailedErrorMsg||R.detailedErrorMsg.length<5)&&(E=R.message)),(0,b.jsxs)(r.Z,(0,i.Z)((0,i.Z)({open:n,classes:Z},B),{},{scroll:"paper",onClose:function(e,n){"backdropClick"!==n&&t()},className:Z.root,children:[(0,b.jsxs)(u.Z,{className:Z.title,children:[(0,b.jsxs)("div",{className:Z.titleText,children:[C," ",m]}),(0,b.jsx)("div",{className:Z.closeContainer,children:(0,b.jsx)(l.Z,{"aria-label":"close",id:"close",className:Z.closeButton,onClick:t,disableRipple:!0,size:"small",children:(0,b.jsx)(x.Z,{})})})]}),(0,b.jsx)(h.Z,{isModal:!0}),(0,b.jsx)(c.Z,{open:P,className:Z.snackBarModal,onClose:function(){M(!1),y((0,v.MK)(""))},message:E,ContentProps:{className:"".concat(Z.snackBar," ").concat(R&&"error"===R.type?Z.errorSnackBar:"")},autoHideDuration:R&&"error"===R.type?1e4:5e3}),(0,b.jsx)(d.Z,{className:N?"":Z.content,children:f})]}))}))}}]);
//# sourceMappingURL=1604.6758414b.chunk.js.map