"use strict";(self.webpackChunkportal_ui=self.webpackChunkportal_ui||[]).push([[9952],{99952:function(e,n,t){t.r(n),t.d(n,{default:function(){return P}});var s=t(29439),a=t(1413),i=t(72791),o=t(61889),l=t(40986),c=t(75952),r=t(11135),d=t(25787),u=t(23814),m=t(81207),p=t(56028),x=t(90673),f=t(87995),h=t(25469),Z=t(56087),k=t(38442),v=t(27454),j=t(51691),g=t(21435),y=t(9505),b=t(23508),S=t(40214),C=t(80184),M=function(e){var n=e.closeAddModalAndRefresh,t=e.addOpen,a=(0,h.TL)(),l=(0,y.Z)((function(){return n(!0)}),(function(e){n(!1),a((0,f.Ih)(e))})),c=(0,s.Z)(l,2),r=c[0],d=c[1],u=(0,i.useState)(""),m=(0,s.Z)(u,2),p=m[0],x=m[1];return(0,C.jsx)(b.Z,{title:"",confirmText:"Create",isOpen:t,isLoading:r,onConfirm:function(){d("POST","/api/v1/kms/keys/",{key:p})},onClose:function(){return n(!1)},confirmButtonProps:{disabled:-1!==p.indexOf(" ")||""===p||r,variant:"callAction"},confirmationContent:(0,C.jsxs)(j.Z,{children:[(0,C.jsx)(S.Z,{helpText:"Create Key",contents:["Create a new cryptographic key in the Key Management Service server connected to MINIO."]}),(0,C.jsx)(o.ZP,{item:!0,xs:12,marginTop:3,children:(0,C.jsx)(g.Z,{id:"key-name",name:"key-name",label:"Key Name",autoFocus:!0,value:p,error:-1!==p.indexOf(" ")?"Key name cannot contain spaces":"",onChange:function(e){x(e.target.value)}})})]})})},P=(0,d.Z)((function(e){return(0,r.Z)((0,a.Z)((0,a.Z)({},u.ID),u.DF))}))((function(e){var n=e.classes,t=e.open,a=e.encryptionCfg,r=e.selectedBucket,d=e.closeModalAndRefresh,u=(0,h.TL)(),j=(0,i.useState)(!1),g=(0,s.Z)(j,2),y=g[0],b=g[1],S=(0,i.useState)(""),P=(0,s.Z)(S,2),B=P[0],E=P[1],N=(0,i.useState)("disabled"),T=(0,s.Z)(N,2),K=T[0],O=T[1],z=(0,i.useState)([]),D=(0,s.Z)(z,2),I=D[0],w=D[1],A=(0,i.useState)(!1),R=(0,s.Z)(A,2),F=R[0],L=R[1],W=(0,i.useState)(!1),_=(0,s.Z)(W,2),G=_[0],H=_[1];(0,i.useEffect)((function(){a&&("AES256"===a.algorithm?O("sse-s3"):(O("sse-kms"),E(a.kmsMasterKeyID)))}),[a]),(0,i.useEffect)((function(){"sse-kms"===K&&m.Z.invoke("GET","/api/v1/kms/keys").then((function(e){w(e.results),L(!1)})).catch((function(e){L(!1),u((0,f.zb)(e))}))}),[K,F,u]);return(0,C.jsxs)(i.Fragment,{children:[G&&(0,C.jsx)(M,{addOpen:G,closeAddModalAndRefresh:function(e){H(!1),L(!0)}}),(0,C.jsx)(p.Z,{modalOpen:t,onClose:function(){d()},title:"Enable Bucket Encryption",titleIcon:(0,C.jsx)(c.Xn4,{}),children:(0,C.jsx)("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),y||("disabled"===K?m.Z.invoke("POST","/api/v1/buckets/".concat(r,"/encryption/disable")).then((function(){b(!1),d()})).catch((function(e){b(!1),u((0,f.zb)(e))})):m.Z.invoke("POST","/api/v1/buckets/".concat(r,"/encryption/enable"),{encType:K,kmsKeyID:B}).then((function(){b(!1),d()})).catch((function(e){b(!1),u((0,f.zb)(e))})))},children:(0,C.jsxs)(o.ZP,{container:!0,children:[(0,C.jsxs)(o.ZP,{item:!0,xs:12,className:n.modalFormScrollable,children:[(0,C.jsx)(o.ZP,{item:!0,xs:12,className:n.formFieldRow,children:(0,C.jsx)(x.Z,{onChange:function(e){O(e.target.value)},id:"select-encryption-type",name:"select-encryption-type",label:"Encryption Type",value:K,options:[{label:"Disabled",value:"disabled"},{label:"SSE-S3",value:"sse-s3"},{label:"SSE-KMS",value:"sse-kms"}]})}),"sse-kms"===K&&(0,C.jsxs)(o.ZP,{item:!0,xs:12,className:n.formFieldRow,display:"flex",children:[(0,C.jsx)(x.Z,{onChange:function(e){E(e.target.value)},id:"select-kms-key-id",name:"select-kms-key-id",label:"KMS Key ID",value:B,options:I.map((function(e){return{label:e.name,value:e.name}}))}),(0,C.jsx)(o.ZP,{marginLeft:1,children:(0,C.jsx)(k.s,{scopes:[Z.Ft.KMS_IMPORT_KEY],resource:Z.C3,errorProps:{disabled:!0},children:(0,C.jsx)(v.Z,{tooltip:"Add key",children:(0,C.jsx)(c.zxk,{id:"import-key",variant:"regular",icon:(0,C.jsx)(c.dtP,{}),onClick:function(e){H(!0),e.preventDefault()}})})})})]})]}),(0,C.jsxs)(o.ZP,{item:!0,xs:12,className:n.modalButtonBar,children:[(0,C.jsx)(c.zxk,{id:"cancel",type:"submit",variant:"regular",onClick:function(){d()},disabled:y,label:"Cancel"}),(0,C.jsx)(c.zxk,{id:"save",type:"submit",variant:"callAction",disabled:y,label:"Save"})]}),y&&(0,C.jsx)(o.ZP,{item:!0,xs:12,children:(0,C.jsx)(l.Z,{})})]})})})]})}))},56028:function(e,n,t){var s=t(29439),a=t(1413),i=t(72791),o=t(78687),l=t(13400),c=t(55646),r=t(5574),d=t(65661),u=t(39157),m=t(11135),p=t(25787),x=t(23814),f=t(25469),h=t(29823),Z=t(28057),k=t(87995),v=t(80184);n.Z=(0,p.Z)((function(e){return(0,m.Z)((0,a.Z)((0,a.Z)({},x.Qw),{},{content:{padding:25,paddingBottom:0},customDialogSize:{width:"100%",maxWidth:765}},x.sN))}))((function(e){var n=e.onClose,t=e.modalOpen,m=e.title,p=e.children,x=e.classes,j=e.wideLimit,g=void 0===j||j,y=e.noContentPadding,b=e.titleIcon,S=void 0===b?null:b,C=(0,f.TL)(),M=(0,i.useState)(!1),P=(0,s.Z)(M,2),B=P[0],E=P[1],N=(0,o.v9)((function(e){return e.system.modalSnackBar}));(0,i.useEffect)((function(){C((0,k.MK)(""))}),[C]),(0,i.useEffect)((function(){if(N){if(""===N.message)return void E(!1);"error"!==N.type&&E(!0)}}),[N]);var T=g?{classes:{paper:x.customDialogSize}}:{maxWidth:"lg",fullWidth:!0},K="";return N&&(K=N.detailedErrorMsg,(""===N.detailedErrorMsg||N.detailedErrorMsg.length<5)&&(K=N.message)),(0,v.jsxs)(r.Z,(0,a.Z)((0,a.Z)({open:t,classes:x},T),{},{scroll:"paper",onClose:function(e,t){"backdropClick"!==t&&n()},className:x.root,children:[(0,v.jsxs)(d.Z,{className:x.title,children:[(0,v.jsxs)("div",{className:x.titleText,children:[S," ",m]}),(0,v.jsx)("div",{className:x.closeContainer,children:(0,v.jsx)(l.Z,{"aria-label":"close",id:"close",className:x.closeButton,onClick:n,disableRipple:!0,size:"small",children:(0,v.jsx)(h.Z,{})})})]}),(0,v.jsx)(Z.Z,{isModal:!0}),(0,v.jsx)(c.Z,{open:B,className:x.snackBarModal,onClose:function(){E(!1),C((0,k.MK)(""))},message:K,ContentProps:{className:"".concat(x.snackBar," ").concat(N&&"error"===N.type?x.errorSnackBar:"")},autoHideDuration:N&&"error"===N.type?1e4:5e3}),(0,v.jsx)(u.Z,{className:y?"":x.content,children:p})]}))}))},40214:function(e,n,t){t(72791);var s=t(64554),a=t(75952),i=t(80184);n.Z=function(e){var n=e.helpText,t=e.contents;return(0,i.jsxs)(s.Z,{sx:{flex:1,border:"1px solid #eaeaea",borderRadius:"2px",display:"flex",flexFlow:"column",padding:"20px"},children:[(0,i.jsxs)(s.Z,{sx:{fontSize:"16px",fontWeight:600,display:"flex",alignItems:"center",marginBottom:"16px",paddingBottom:"20px","& .min-icon":{height:"21px",width:"21px",marginRight:"15px"}},children:[(0,i.jsx)(a.M9A,{}),(0,i.jsx)("div",{children:n})]}),(0,i.jsx)(s.Z,{sx:{fontSize:"14px",marginBottom:"15px"},children:t.map((function(e){return(0,i.jsx)(s.Z,{sx:{paddingBottom:"20px"},children:e})}))})]})}}}]);
//# sourceMappingURL=9952.5ed9b96a.chunk.js.map