{"version":3,"file":"static/js/7847.90a046cb.chunk.js","mappings":"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","sources":["screens/Console/Marketplace/euTimezones.ts","screens/Console/Marketplace/SetEmailModal.tsx","screens/Console/Marketplace/Marketplace.tsx"],"sourcesContent":["// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nexport const euTimezones = [\n  \"europe/amsterdam\",\n  \"europe/andorra\",\n  \"europe/astrakhan\",\n  \"europe/athens\",\n  \"europe/belgrade\",\n  \"europe/berlin\",\n  \"europe/bratislava\",\n  \"europe/brussels\",\n  \"europe/bucharest\",\n  \"europe/budapest\",\n  \"europe/busingen\",\n  \"europe/chisinau\",\n  \"europe/copenhagen\",\n  \"europe/dublin\",\n  \"europe/gibraltar\",\n  \"europe/guernsey\",\n  \"europe/helsinki\",\n  \"europe/isle_of_man\",\n  \"europe/istanbul\",\n  \"europe/jersey\",\n  \"europe/kaliningrad\",\n  \"europe/kiev\",\n  \"europe/kirov\",\n  \"europe/lisbon\",\n  \"europe/ljubljana\",\n  \"europe/london\",\n  \"europe/luxembourg\",\n  \"europe/madrid\",\n  \"europe/malta\",\n  \"europe/mariehamn\",\n  \"europe/minsk\",\n  \"europe/monaco\",\n  \"europe/moscow\",\n  \"europe/oslo\",\n  \"europe/paris\",\n  \"europe/podgorica\",\n  \"europe/prague\",\n  \"europe/riga\",\n  \"europe/rome\",\n  \"europe/samara\",\n  \"europe/san_marino\",\n  \"europe/sarajevo\",\n  \"europe/saratov\",\n  \"europe/simferopol\",\n  \"europe/skopje\",\n  \"europe/sofia\",\n  \"europe/stockholm\",\n  \"europe/tallinn\",\n  \"europe/tirane\",\n  \"europe/ulyanovsk\",\n  \"europe/uzhgorod\",\n  \"europe/vaduz\",\n  \"europe/vatican\",\n  \"europe/vienna\",\n  \"europe/vilnius\",\n  \"europe/volgograd\",\n  \"europe/warsaw\",\n  \"europe/zagreb\",\n  \"europe/zaporozhye\",\n  \"europe/zurich\",\n];\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport { Theme } from \"@mui/material/styles\";\nimport createStyles from \"@mui/styles/createStyles\";\nimport withStyles from \"@mui/styles/withStyles\";\nimport { containerForHeader } from \"../Common/FormComponents/common/styleLibrary\";\nimport ConfirmDialog from \"../Common/ModalWrapper/ConfirmDialog\";\nimport useApi from \"../Common/Hooks/useApi\";\nimport React, { Fragment, useState } from \"react\";\nimport { ISetEmailModalProps } from \"./types\";\nimport { InfoIcon } from \"../../../icons\";\nimport { ErrorResponseHandler } from \"../../../common/types\";\nimport InputBoxWrapper from \"../Common/FormComponents/InputBoxWrapper/InputBoxWrapper\";\nimport { setErrorSnackMessage, setSnackBarMessage } from \"../../../systemSlice\";\nimport { useAppDispatch } from \"../../../store\";\nimport { euTimezones } from \"./euTimezones\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    pageTitle: {\n      fontSize: 18,\n      marginBottom: 20,\n      textAlign: \"center\",\n    },\n    pageSubTitle: {\n      textAlign: \"center\",\n    },\n    ...containerForHeader(theme.spacing(4)),\n  });\n\nconst reEmail =\n  // eslint-disable-next-line\n  /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\nconst SetEmailModal = ({ open, closeModal }: ISetEmailModalProps) => {\n  const dispatch = useAppDispatch();\n\n  const onError = (err: ErrorResponseHandler) => {\n    dispatch(setErrorSnackMessage(err));\n    closeModal();\n  };\n\n  const onSuccess = (res: any) => {\n    let msg = `Email ${email} has been saved`;\n    dispatch(setSnackBarMessage(msg));\n    closeModal();\n  };\n\n  const [isLoading, invokeApi] = useApi(onSuccess, onError);\n  const [email, setEmail] = useState<string>(\"\");\n  const [isEmailSet, setIsEmailSet] = useState<boolean>(false);\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    let v = event.target.value;\n    setIsEmailSet(reEmail.test(v));\n    setEmail(v);\n  };\n\n  const onConfirm = () => {\n    const isInEU = isEU();\n    invokeApi(\"POST\", \"/api/v1/mp-integration\", { email, isInEU });\n  };\n\n  const isEU = () => {\n    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    return euTimezones.includes(tz.toLocaleLowerCase());\n  };\n\n  return open ? (\n    <ConfirmDialog\n      title={\"Register Email\"}\n      confirmText={\"Register\"}\n      isOpen={open}\n      titleIcon={<InfoIcon />}\n      isLoading={isLoading}\n      cancelText={\"Later\"}\n      onConfirm={onConfirm}\n      onClose={closeModal}\n      confirmButtonProps={{\n        color: \"info\",\n        disabled: !isEmailSet || isLoading,\n      }}\n      confirmationContent={\n        <Fragment>\n          <p>\n            Your Marketplace subscription includes support access from the\n            <a\n              href=\"https://min.io/product/subnet\"\n              target=\"_blank\"\n              rel=\"noreferrer\"\n            >\n              MinIO Subscription Network (SUBNET)\n            </a>\n            .\n            <br />\n            Enter your email to register now.\n          </p>\n          <p>\n            To register later, contact{\" \"}\n            <a href=\"mailto: support@min.io\">support@min.io</a>.\n          </p>\n          <InputBoxWrapper\n            id=\"set-mp-email\"\n            name=\"set-mp-email\"\n            onChange={handleInputChange}\n            label={\"\"}\n            placeholder=\"Enter email\"\n            type={\"email\"}\n            value={email}\n          />\n        </Fragment>\n      }\n    />\n  ) : null;\n};\n\nexport default withStyles(styles)(SetEmailModal);\n","// This file is part of MinIO Console Server\n// Copyright (c) 2022 MinIO, Inc.\n//\n// This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n// You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport PageHeader from \"../Common/PageHeader/PageHeader\";\nimport SetEmailModal from \"./SetEmailModal\";\nimport PageLayout from \"../Common/Layout/PageLayout\";\nimport { selFeatures } from \"../consoleSlice\";\nimport { useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { resourcesConfigurations } from \"../Tenants/AddTenant/Steps/TenantResources/utils\";\nimport { selShowMarketplace, showMarketplace } from \"../../../systemSlice\";\nimport { Navigate } from \"react-router-dom\";\nimport { useAppDispatch } from \"../../../store\";\n\nconst Marketplace = () => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const features = useSelector(selFeatures);\n  const displayMarketplace = useSelector(selShowMarketplace);\n  const [isMPMode, setMPMode] = useState<boolean>(true);\n\n  useEffect(() => {\n    let mpMode = false;\n    if (features && features.length !== 0) {\n      features.forEach((feature) => {\n        if (feature in resourcesConfigurations) {\n          mpMode = true;\n          return;\n        }\n      });\n    }\n    setMPMode(mpMode);\n  }, [features, displayMarketplace]);\n\n  const getTargetPath = () => {\n    let targetPath = \"/\";\n    if (\n      localStorage.getItem(\"redirect-path\") &&\n      localStorage.getItem(\"redirect-path\") !== \"\"\n    ) {\n      targetPath = `${localStorage.getItem(\"redirect-path\")}`;\n      localStorage.setItem(\"redirect-path\", \"\");\n    }\n    return targetPath;\n  };\n\n  const closeModal = () => {\n    dispatch(showMarketplace(false));\n    navigate(getTargetPath());\n  };\n\n  if (!displayMarketplace || !isMPMode) {\n    return <Navigate to={{ pathname: getTargetPath() }} />;\n  }\n\n  if (features) {\n    return (\n      <Fragment>\n        <PageHeader label=\"Operator Marketplace\" />\n        <PageLayout>\n          <SetEmailModal open={true} closeModal={closeModal} />\n        </PageLayout>\n      </Fragment>\n    );\n  }\n  return null;\n};\n\nexport default Marketplace;\n"],"names":["euTimezones","reEmail","withStyles","theme","createStyles","pageTitle","fontSize","marginBottom","textAlign","pageSubTitle","containerForHeader","spacing","open","closeModal","dispatch","useAppDispatch","useApi","res","msg","email","setSnackBarMessage","err","setErrorSnackMessage","isLoading","invokeApi","useState","setEmail","isEmailSet","setIsEmailSet","isEU","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","includes","toLocaleLowerCase","ConfirmDialog","title","confirmText","isOpen","titleIcon","cancelText","onConfirm","isInEU","onClose","confirmButtonProps","color","disabled","confirmationContent","Fragment","href","target","rel","InputBoxWrapper","id","name","onChange","event","v","value","test","label","placeholder","type","navigate","useNavigate","features","useSelector","selFeatures","displayMarketplace","selShowMarketplace","isMPMode","setMPMode","useEffect","mpMode","length","forEach","feature","resourcesConfigurations","getTargetPath","targetPath","localStorage","getItem","setItem","PageHeader","PageLayout","showMarketplace","to","pathname"],"sourceRoot":""}